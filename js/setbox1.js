webpackJsonp(["50a0"], {
    "+1e3": function (t, e, i) { "use strict"; var n = i("PNqo"), o = /\.((?:png|jpg)\d*)(?=$|\?)/, s = L.TileLayer.extend({ includes: [i("aqup")], options: { sanitizer: i("1FN7") }, formats: ["png", "jpg", "png32", "png64", "png128", "png256", "jpg70", "jpg80", "jpg90"], scalePrefix: "@2x.", initialize: function (t, e) { L.TileLayer.prototype.initialize.call(this, void 0, e), this._tilejson = {}, e && e.format && n.strict_oneof(e.format, this.formats), this._loadTileJSON(t) }, setFormat: function (t) { return n.strict(t, "string"), this.options.format = t, this.redraw(), this }, setUrl: null, _setTileJSON: function (t) { return n.strict(t, "object"), this.options.format = this.options.format || t.tiles[0].match(o)[1], L.extend(this.options, { tiles: t.tiles, attribution: this.options.sanitizer(t.attribution), minZoom: t.minzoom || 0, maxZoom: t.maxzoom || 18, tms: "tms" === t.scheme, bounds: t.bounds && n.lbounds(t.bounds) }), this._tilejson = t, this.redraw(), this }, getTileJSON: function () { return this._tilejson }, getTileUrl: function (t) { var e = this.options.tiles, i = e[Math.floor(Math.abs(t.x + t.y) % e.length)], n = L.Util.template(i, t); return n ? n.replace(o, (L.Browser.retina ? this.scalePrefix : ".") + this.options.format) : n }, _update: function () { this.options.tiles && L.TileLayer.prototype._update.call(this) } }); t.exports.TileLayer = s, t.exports.tileLayer = function (t, e) { return new s(t, e) } }, "/2bY": function (t, e, i) { "use strict"; var n = i("w4/X"); i("Wscr"), t.exports = n }, "19Xh": function (t, e, i) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); i("ibUv"); var n = i("TLA3"), o = (i.n(n), i("/2bY")); i.n(o) }, "1FN7": function (t, e, i) { var n = i("ZoVb"); function o(t) { "use strict"; return /^https?/.test(t.getScheme()) ? t.toString() : /^mailto?/.test(t.getScheme()) ? t.toString() : "data" == t.getScheme() && /^image/.test(t.getPath()) ? t.toString() : void 0 } function s(t) { return t } t.exports = function (t) { return t ? n(t, o, s) : "" } }, 418: function (t, e, i) { t.exports = i("19Xh") }, "60t1": function (t, e) {
    /*!
     * mustache.js - Logic-less {{mustache}} templates with JavaScript
     * http://github.com/janl/mustache.js
     */var i, n; i = this, n = function (t) { var e = Object.prototype.toString, i = Array.isArray || function (t) { return "[object Array]" === e.call(t) }; function n(t) { return "function" == typeof t } function o(t) { return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&") } function s(t, e) { return null != t && "object" == typeof t && e in t } var a = RegExp.prototype.test, r = /\S/; function l(t) { return !function (t, e) { return a.call(t, e) }(r, t) } var h = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "/": "&#x2F;", "`": "&#x60;", "=": "&#x3D;" }, u = /\s*/, c = /\s+/, p = /\s*=/, d = /\s*\}/, m = /#|\^|\/|>|\{|&|=|!/; function f(t) { this.string = t, this.tail = t, this.pos = 0 } function _(t, e) { this.view = t, this.cache = { ".": this.view }, this.parent = e } function g() { this.cache = {} } f.prototype.eos = function () { return "" === this.tail }, f.prototype.scan = function (t) { var e = this.tail.match(t); if (!e || 0 !== e.index) return ""; var i = e[0]; return this.tail = this.tail.substring(i.length), this.pos += i.length, i }, f.prototype.scanUntil = function (t) { var e, i = this.tail.search(t); switch (i) { case -1: e = this.tail, this.tail = ""; break; case 0: e = ""; break; default: e = this.tail.substring(0, i), this.tail = this.tail.substring(i) }return this.pos += e.length, e }, _.prototype.push = function (t) { return new _(t, this) }, _.prototype.lookup = function (t) { var e, i = this.cache; if (i.hasOwnProperty(t)) e = i[t]; else { for (var o, a, r = this, l = !1; r;) { if (t.indexOf(".") > 0) for (e = r.view, o = t.split("."), a = 0; null != e && a < o.length;)a === o.length - 1 && (l = s(e, o[a])), e = e[o[a++]]; else e = r.view[t], l = s(r.view, t); if (l) break; r = r.parent } i[t] = e } return n(e) && (e = e.call(this.view)), e }, g.prototype.clearCache = function () { this.cache = {} }, g.prototype.parse = function (e, n) { var s = this.cache, a = s[e]; return null == a && (a = s[e] = function (e, n) { if (!e) return []; var s, a, r, h = [], _ = [], g = [], v = !1, y = !1; function L() { if (v && !y) for (; g.length;)delete _[g.pop()]; else g = []; v = !1, y = !1 } function b(t) { if ("string" == typeof t && (t = t.split(c, 2)), !i(t) || 2 !== t.length) throw new Error("Invalid tags: " + t); s = new RegExp(o(t[0]) + "\\s*"), a = new RegExp("\\s*" + o(t[1])), r = new RegExp("\\s*" + o("}" + t[1])) } b(n || t.tags); for (var T, P, x, E, w, C, M = new f(e); !M.eos();) { if (T = M.pos, x = M.scanUntil(s)) for (var D = 0, S = x.length; D < S; ++D)l(E = x.charAt(D)) ? g.push(_.length) : y = !0, _.push(["text", E, T, T + 1]), T += 1, "\n" === E && L(); if (!M.scan(s)) break; if (v = !0, P = M.scan(m) || "name", M.scan(u), "=" === P ? (x = M.scanUntil(p), M.scan(p), M.scanUntil(a)) : "{" === P ? (x = M.scanUntil(r), M.scan(d), M.scanUntil(a), P = "&") : x = M.scanUntil(a), !M.scan(a)) throw new Error("Unclosed tag at " + M.pos); if (w = [P, x, T, M.pos], _.push(w), "#" === P || "^" === P) h.push(w); else if ("/" === P) { if (!(C = h.pop())) throw new Error('Unopened section "' + x + '" at ' + T); if (C[1] !== x) throw new Error('Unclosed section "' + C[1] + '" at ' + T) } else "name" === P || "{" === P || "&" === P ? y = !0 : "=" === P && b(x) } if (C = h.pop()) throw new Error('Unclosed section "' + C[1] + '" at ' + M.pos); return function (t) { for (var e, i = [], n = i, o = [], s = 0, a = t.length; s < a; ++s)switch ((e = t[s])[0]) { case "#": case "^": n.push(e), o.push(e), n = e[4] = []; break; case "/": o.pop()[5] = e[2], n = o.length > 0 ? o[o.length - 1][4] : i; break; default: n.push(e) }return i }(function (t) { for (var e, i, n = [], o = 0, s = t.length; o < s; ++o)(e = t[o]) && ("text" === e[0] && i && "text" === i[0] ? (i[1] += e[1], i[3] = e[3]) : (n.push(e), i = e)); return n }(_)) }(e, n)), a }, g.prototype.render = function (t, e, i) { var n = this.parse(t), o = e instanceof _ ? e : new _(e); return this.renderTokens(n, o, i, t) }, g.prototype.renderTokens = function (t, e, i, n) { for (var o, s, a, r = "", l = 0, h = t.length; l < h; ++l)a = void 0, "#" === (s = (o = t[l])[0]) ? a = this.renderSection(o, e, i, n) : "^" === s ? a = this.renderInverted(o, e, i, n) : ">" === s ? a = this.renderPartial(o, e, i, n) : "&" === s ? a = this.unescapedValue(o, e) : "name" === s ? a = this.escapedValue(o, e) : "text" === s && (a = this.rawValue(o)), void 0 !== a && (r += a); return r }, g.prototype.renderSection = function (t, e, o, s) { var a = this, r = "", l = e.lookup(t[1]); if (l) { if (i(l)) for (var h = 0, u = l.length; h < u; ++h)r += this.renderTokens(t[4], e.push(l[h]), o, s); else if ("object" == typeof l || "string" == typeof l || "number" == typeof l) r += this.renderTokens(t[4], e.push(l), o, s); else if (n(l)) { if ("string" != typeof s) throw new Error("Cannot use higher-order sections without the original template"); null != (l = l.call(e.view, s.slice(t[3], t[5]), function (t) { return a.render(t, e, o) })) && (r += l) } else r += this.renderTokens(t[4], e, o, s); return r } }, g.prototype.renderInverted = function (t, e, n, o) { var s = e.lookup(t[1]); if (!s || i(s) && 0 === s.length) return this.renderTokens(t[4], e, n, o) }, g.prototype.renderPartial = function (t, e, i) { if (i) { var o = n(i) ? i(t[1]) : i[t[1]]; return null != o ? this.renderTokens(this.parse(o), e, i, o) : void 0 } }, g.prototype.unescapedValue = function (t, e) { var i = e.lookup(t[1]); if (null != i) return i }, g.prototype.escapedValue = function (e, i) { var n = i.lookup(e[1]); if (null != n) return t.escape(n) }, g.prototype.rawValue = function (t) { return t[1] }, t.name = "mustache.js", t.version = "2.2.1", t.tags = ["{{", "}}"]; var v = new g; t.clearCache = function () { return v.clearCache() }, t.parse = function (t, e) { return v.parse(t, e) }, t.render = function (t, e, n) { if ("string" != typeof t) throw new TypeError('Invalid template! Template should be a "string" but "' + (i(o = t) ? "array" : typeof o) + '" was given as the first argument for mustache#render(template, view, partials)'); var o; return v.render(t, e, n) }, t.to_html = function (e, i, o, s) { var a = t.render(e, i, o); if (!n(s)) return a; s(a) }, t.escape = function (t) { return String(t).replace(/[&<>"'`=\/]/g, function (t) { return h[t] }) }, t.Scanner = f, t.Context = _, t.Writer = g }, "object" == typeof e && e && "string" != typeof e.nodeName ? n(e) : "function" == typeof define && define.amd ? define(["exports"], n) : (i.Mustache = {}, n(i.Mustache))
    }, "964G": function (t, e, i) { "use strict"; t.exports = function (t) { return function (e, i) { if (t) { var n, o = ((n = t.grid[i].charCodeAt(e)) >= 93 && n--, n >= 35 && n--, n - 32), s = t.keys[o]; return t.data[s] } } } }, CQym: function (t, e, i) { "use strict"; var n = i("PNqo"), o = i("hcuP"), s = i("cwpW"), a = L.TileLayer.extend({ options: { sanitizer: i("1FN7") }, initialize: function (t, e) { L.TileLayer.prototype.initialize.call(this, void 0, e), this.options.tiles = this._formatTileURL(t), this.options.tileSize = 512, this.options.zoomOffset = -1, this.options.tms = !1, this._getAttribution(t) }, _getAttribution: function (t) { var e = o.style(t, this.options && this.options.accessToken); s(e, L.bind(function (i, a) { i && (n.log("could not load Mapbox style at " + e), this.fire("error", { error: i })); var r = []; for (var l in a.sources) { var h = a.sources[l].url.split("mapbox://")[1]; r.push(h) } s(o.tileJSON(r.join(), this.options.accessToken), L.bind(function (e, i) { e ? (n.log("could not load TileJSON at " + t), this.fire("error", { error: e })) : i && (n.strict(i, "object"), this.options.attribution = this.options.sanitizer(i.attribution), this._tilejson = i, this.fire("ready")) }, this)) }, this)) }, setUrl: null, _formatTileURL: function (t) { var e = L.Browser.retina ? "@2x" : ""; if ("string" == typeof t) { -1 === t.indexOf("mapbox://styles/") && (n.log("Incorrectly formatted Mapbox style at " + t), this.fire("error")); var i = t.split("mapbox://styles/")[1]; return o("/styles/v1/" + i + "/tiles/{z}/{x}/{y}" + e, this.options.accessToken) } if ("object" == typeof t) return o("/styles/v1/" + t.owner + "/" + t.id + "/tiles/{z}/{x}/{y}" + e, this.options.accessToken) }, getTileUrl: function (t) { return L.Util.template(this.options.tiles, t) } }); t.exports.StyleLayer = a, t.exports.styleLayer = function (t, e) { return new a(t, e) } }, EaSt: function (t, e, i) { "use strict"; var n = i("+1e3").tileLayer, o = i("IOTA").featureLayer, s = i("P/xu").gridLayer, a = i("mnpd").gridControl, r = i("YEC+").infoControl, l = i("o260").shareControl, h = i("qHKS").legendControl, u = i("LT0z").mapboxLogoControl, c = i("gzzj"); function p(t, e) { return !e || t.accessToken ? t : L.extend({ accessToken: e }, t) } var d = L.Map.extend({ includes: [i("aqup")], options: { tileLayer: {}, featureLayer: {}, gridLayer: {}, legendControl: {}, gridControl: {}, infoControl: !1, shareControl: !1, sanitizer: i("1FN7") }, _tilejson: {}, initialize: function (t, e, i) { if (L.Map.prototype.initialize.call(this, t, L.extend({}, L.Map.prototype.options, i)), this.attributionControl) { this.attributionControl.setPrefix(""); var d = this.options.attributionControl.compact; (d || !1 !== d && this._container.offsetWidth <= 640) && L.DomUtil.addClass(this.attributionControl._container, "leaflet-compact-attribution"), void 0 === d && this.on("resize", function () { this._container.offsetWidth > 640 ? L.DomUtil.removeClass(this.attributionControl._container, "leaflet-compact-attribution") : L.DomUtil.addClass(this.attributionControl._container, "leaflet-compact-attribution") }) } this.options.tileLayer && (this.tileLayer = n(void 0, p(this.options.tileLayer, this.options.accessToken)), this.addLayer(this.tileLayer)), this.options.featureLayer && (this.featureLayer = o(void 0, p(this.options.featureLayer, this.options.accessToken)), this.addLayer(this.featureLayer)), this.options.gridLayer && (this.gridLayer = s(void 0, p(this.options.gridLayer, this.options.accessToken)), this.addLayer(this.gridLayer)), this.options.gridLayer && this.options.gridControl && (this.gridControl = a(this.gridLayer, this.options.gridControl), this.addControl(this.gridControl)), this.options.infoControl && (this.infoControl = r(this.options.infoControl), this.addControl(this.infoControl)), this.options.legendControl && (this.legendControl = h(this.options.legendControl), this.addControl(this.legendControl)), this.options.shareControl && (this.shareControl = l(void 0, p(this.options.shareControl, this.options.accessToken)), this.addControl(this.shareControl)), this._mapboxLogoControl = u(this.options.mapboxLogoControl), this.addControl(this._mapboxLogoControl), this._loadTileJSON(e), this.on("layeradd", this._onLayerAdd, this).on("layerremove", this._onLayerRemove, this).on("moveend", this._updateMapFeedbackLink, this), this.whenReady(function () { c.on("change", this._updateMapFeedbackLink, this) }), this.on("unload", function () { c.off("change", this._updateMapFeedbackLink, this) }) }, _setTileJSON: function (t) { return this._tilejson = t, this._initialize(t), this }, getTileJSON: function () { return this._tilejson }, _initialize: function (t) { if (this.tileLayer && (this.tileLayer._setTileJSON(t), this._updateLayer(this.tileLayer)), this.featureLayer && !this.featureLayer.getGeoJSON() && t.data && t.data[0] && this.featureLayer.loadURL(t.data[0]), this.gridLayer && (this.gridLayer._setTileJSON(t), this._updateLayer(this.gridLayer)), this.infoControl && t.attribution && (this.infoControl.addInfo(this.options.sanitizer(t.attribution)), this._updateMapFeedbackLink()), this.legendControl && t.legend && this.legendControl.addLegend(t.legend), this.shareControl && this.shareControl._setTileJSON(t), this._mapboxLogoControl._setTileJSON(t), !this._loaded && t.center) { var e = void 0 !== this.getZoom() ? this.getZoom() : t.center[2], i = L.latLng(t.center[1], t.center[0]); this.setView(i, e) } }, _updateMapFeedbackLink: function () { if (this._controlContainer.getElementsByClassName) { var t = this._controlContainer.getElementsByClassName("mapbox-improve-map"); if (t.length && this._loaded) { var e = this.getCenter().wrap(), i = "#" + ((this._tilejson || {}).id || "") + "/" + e.lng.toFixed(3) + "/" + e.lat.toFixed(3) + "/" + this.getZoom(); for (var n in c.data) i += "/" + n + "=" + c.data[n]; for (var o = 0; o < t.length; o++)t[o].hash = i } } }, _onLayerAdd: function (t) { "on" in t.layer && t.layer.on("ready", this._onLayerReady, this), window.setTimeout(L.bind(this._updateMapFeedbackLink, this), 0) }, _onLayerRemove: function (t) { "on" in t.layer && t.layer.off("ready", this._onLayerReady, this), window.setTimeout(L.bind(this._updateMapFeedbackLink, this), 0) }, _onLayerReady: function (t) { this._updateLayer(t.target) }, _updateLayer: function (t) { t.options && (this.infoControl && this._loaded && this.infoControl.addInfo(t.options.infoControl), this.attributionControl && this._loaded && t.getAttribution && this.attributionControl.addAttribution(t.getAttribution()), L.stamp(t) in this._zoomBoundLayers || !t.options.maxZoom && !t.options.minZoom || (this._zoomBoundLayers[L.stamp(t)] = t), this._updateMapFeedbackLink(), this._updateZoomLevels()) } }); t.exports.Map = d, t.exports.map = function (t, e, i) { return new d(t, e, i) } }, IOTA: function (t, e, i) { "use strict"; var n = i("PNqo"), o = i("hcuP"), s = i("cwpW"), a = i("jO/I"), r = i("KSbk"), l = L.FeatureGroup.extend({ options: { filter: function () { return !0 }, sanitizer: i("1FN7"), style: r.style, popupOptions: { closeButton: !1 } }, initialize: function (t, e) { L.setOptions(this, e), this._layers = {}, "string" == typeof t ? n.idUrl(t, this) : t && "object" == typeof t && this.setGeoJSON(t) }, setGeoJSON: function (t) { return this._geojson = t, this.clearLayers(), this._initialize(t), this }, getGeoJSON: function () { return this._geojson }, loadURL: function (t) { return this._request && "abort" in this._request && this._request.abort(), this._request = s(t, L.bind(function (e, i) { this._request = null, e && "abort" !== e.type ? (n.log("could not load features at " + t), this.fire("error", { error: e })) : i && (this.setGeoJSON(i), this.fire("ready")) }, this)), this }, loadID: function (t) { return this.loadURL(o("/v4/" + t + "/features.json", this.options.accessToken)) }, setFilter: function (t) { return this.options.filter = t, this._geojson && (this.clearLayers(), this._initialize(this._geojson)), this }, getFilter: function () { return this.options.filter }, _initialize: function (t) { var e, i, n = L.Util.isArray(t) ? t : t.features; if (n) for (e = 0, i = n.length; e < i; e++)(n[e].geometries || n[e].geometry || n[e].features) && this._initialize(n[e]); else if (this.options.filter(t)) { var o = { accessToken: this.options.accessToken }, s = this.options.pointToLayer || function (t, e) { return a.style(t, e, o) }, l = L.GeoJSON.geometryToLayer(t, s), h = a.createPopup(t, this.options.sanitizer), u = this.options.style, c = u === r.style; !(u && "setStyle" in l) || c && (l instanceof L.Circle || l instanceof L.CircleMarker) || ("function" == typeof u && (u = u(t)), l.setStyle(u)), l.feature = t, h && l.bindPopup(h, this.options.popupOptions), this.addLayer(l) } } }); t.exports.FeatureLayer = l, t.exports.featureLayer = function (t, e) { return new l(t, e) } }, KSbk: function (t, e, i) { "use strict"; var n = { stroke: "#555555", "stroke-width": 2, "stroke-opacity": 1, fill: "#555555", "fill-opacity": .5 }, o = [["stroke", "color"], ["stroke-width", "weight"], ["stroke-opacity", "opacity"], ["fill", "fillColor"], ["fill-opacity", "fillOpacity"]]; t.exports = { style: function (t) { return function (t) { for (var e = {}, i = 0; i < o.length; i++)e[o[i][1]] = t[o[i][0]]; return e }(function (t, e) { var i = {}; for (var n in e) void 0 === t[n] ? i[n] = e[n] : i[n] = t[n]; return i }(t.properties || {}, n)) }, defaults: n } }, LT0z: function (t, e, i) { "use strict"; var n = L.Control.extend({ options: { position: "bottomleft" }, initialize: function (t) { L.setOptions(this, t) }, onAdd: function () { return this._container = L.DomUtil.create("div", "mapbox-logo"), this._container }, _setTileJSON: function (t) { t.mapbox_logo && L.DomUtil.addClass(this._container, "mapbox-logo-true") } }); t.exports.MapboxLogoControl = n, t.exports.mapboxLogoControl = function (t) { return new n(t) } }, Mh0C: function (t, e, i) { "use strict"; var n = i("waUh"), o = i("PNqo"), s = L.Control.extend({ includes: L.Mixin.Events, options: { proximity: !0, position: "topleft", pointZoom: 16, keepOpen: !1, autocomplete: !1, queryOptions: {} }, initialize: function (t, e) { L.Util.setOptions(this, e), this.setURL(t), this._updateSubmit = L.bind(this._updateSubmit, this), this._updateAutocomplete = L.bind(this._updateAutocomplete, this), this._chooseResult = L.bind(this._chooseResult, this) }, setURL: function (t) { return this.geocoder = n(t, { accessToken: this.options.accessToken }), this }, getURL: function () { return this.geocoder.getURL() }, setID: function (t) { return this.setURL(t) }, setTileJSON: function (t) { return this.setURL(t.geocoder) }, _toggle: function (t) { t && L.DomEvent.stop(t), L.DomUtil.hasClass(this._container, "active") ? (L.DomUtil.removeClass(this._container, "active"), this._results.innerHTML = "", this._input.blur()) : (L.DomUtil.addClass(this._container, "active"), this._input.focus(), this._input.select()) }, _closeIfOpen: function () { L.DomUtil.hasClass(this._container, "active") && !this.options.keepOpen && (L.DomUtil.removeClass(this._container, "active"), this._results.innerHTML = "", this._input.blur()) }, onAdd: function (t) { var e = L.DomUtil.create("div", "leaflet-control-mapbox-geocoder leaflet-bar leaflet-control"), i = L.DomUtil.create("a", "leaflet-control-mapbox-geocoder-toggle mapbox-icon mapbox-icon-geocoder", e), n = L.DomUtil.create("div", "leaflet-control-mapbox-geocoder-results", e), o = L.DomUtil.create("div", "leaflet-control-mapbox-geocoder-wrap", e), s = L.DomUtil.create("form", "leaflet-control-mapbox-geocoder-form", o), a = L.DomUtil.create("input", "", s); return i.href = "#", i.innerHTML = "&nbsp;", a.type = "text", a.setAttribute("placeholder", "Search"), L.DomEvent.addListener(s, "submit", this._geocode, this), L.DomEvent.addListener(a, "keyup", this._autocomplete, this), L.DomEvent.disableClickPropagation(e), this._map = t, this._results = n, this._input = a, this._form = s, this.options.keepOpen ? L.DomUtil.addClass(e, "active") : (this._map.on("click", this._closeIfOpen, this), L.DomEvent.addListener(i, "click", this._toggle, this)), e }, _updateSubmit: function (t, e) { if (L.DomUtil.removeClass(this._container, "searching"), this._results.innerHTML = "", t || !e) this.fire("error", { error: t }); else { var i = []; e.results && e.results.features && (i = e.results.features), 1 === i.length ? (this.fire("autoselect", { feature: i[0] }), this.fire("found", { results: e.results }), this._chooseResult(i[0]), this._closeIfOpen()) : i.length > 1 ? (this.fire("found", { results: e.results }), this._displayResults(i)) : (this.fire("notfound"), this._displayResults(i)) } }, _updateAutocomplete: function (t, e) { if (this._results.innerHTML = "", t || !e) this.fire("error", { error: t }); else { var i = []; e.results && e.results.features && (i = e.results.features), i.length ? this.fire("found", { results: e.results }) : this.fire("notfound"), this._displayResults(i) } }, _displayResults: function (t) { for (var e = 0, i = Math.min(t.length, 5); e < i; e++) { var n = t[e], o = n.place_name; if (o.length) { var s = L.DomUtil.create("a", "", this._results); s["innerText" in s ? "innerText" : "textContent"] = o, s.setAttribute("title", o), s.href = "#", L.bind(function (t) { L.DomEvent.addListener(s, "click", function (e) { this._chooseResult(t), L.DomEvent.stop(e), this.fire("select", { feature: t }) }, this) }, this)(n) } } t.length > 5 && (L.DomUtil.create("span", "", this._results).innerHTML = "Top 5 of " + t.length + "  results") }, _chooseResult: function (t) { t.bbox ? this._map.fitBounds(o.lbounds(t.bbox)) : t.center && this._map.setView([t.center[1], t.center[0]], void 0 === this._map.getZoom() ? this.options.pointZoom : Math.max(this._map.getZoom(), this.options.pointZoom)) }, _geocode: function (t) { if (L.DomEvent.preventDefault(t), "" === this._input.value) return this._updateSubmit(); L.DomUtil.addClass(this._container, "searching"), this.geocoder.query(L.Util.extend({ query: this._input.value, proximity: !!this.options.proximity && this._map.getCenter() }, this.options.queryOptions), this._updateSubmit) }, _autocomplete: function () { if (this.options.autocomplete) return "" === this._input.value ? this._updateAutocomplete() : void this.geocoder.query(L.Util.extend({ query: this._input.value, proximity: !!this.options.proximity && this._map.getCenter() }, this.options.queryOptions), this._updateAutocomplete) } }); t.exports.GeocoderControl = s, t.exports.geocoderControl = function (t, e) { return new s(t, e) } }, "P/xu": function (t, e, i) { "use strict"; var n = i("PNqo"), o = i("cwpW"), s = i("964G"), a = L.Class.extend({ includes: [L.Mixin.Events, i("aqup")], options: { template: function () { return "" } }, _mouseOn: null, _tilejson: {}, _cache: {}, initialize: function (t, e) { L.Util.setOptions(this, e), this._loadTileJSON(t) }, _setTileJSON: function (t) { return n.strict(t, "object"), L.extend(this.options, { grids: t.grids, minZoom: t.minzoom, maxZoom: t.maxzoom, bounds: t.bounds && n.lbounds(t.bounds) }), this._tilejson = t, this._cache = {}, this._update(), this }, getTileJSON: function () { return this._tilejson }, active: function () { return !!(this._map && this.options.grids && this.options.grids.length) }, addTo: function (t) { return t.addLayer(this), this }, onAdd: function (t) { this._map = t, this._update(), this._map.on("click", this._click, this).on("mousemove", this._move, this).on("moveend", this._update, this) }, onRemove: function () { this._map.off("click", this._click, this).off("mousemove", this._move, this).off("moveend", this._update, this) }, getData: function (t, e) { if (this.active()) { var i = this._map, n = i.project(t.wrap()), o = Math.floor(n.x / 256), s = Math.floor(n.y / 256), a = i.options.crs.scale(i.getZoom()) / 256; return o = (o + a) % a, s = (s + a) % a, this._getTile(i.getZoom(), o, s, function (t) { var i = Math.floor((n.x - 256 * o) / 4), a = Math.floor((n.y - 256 * s) / 4); e(t(i, a)) }), this } }, _click: function (t) { this.getData(t.latlng, L.bind(function (e) { this.fire("click", { latLng: t.latlng, data: e }) }, this)) }, _move: function (t) { this.getData(t.latlng, L.bind(function (e) { e !== this._mouseOn ? (this._mouseOn && this.fire("mouseout", { latLng: t.latlng, data: this._mouseOn }), this.fire("mouseover", { latLng: t.latlng, data: e }), this._mouseOn = e) : this.fire("mousemove", { latLng: t.latlng, data: e }) }, this)) }, _getTileURL: function (t) { var e = this.options.grids, i = e[(t.x + t.y) % e.length]; return L.Util.template(i, t) }, _update: function () { if (this.active()) { var t = this._map.getPixelBounds(), e = this._map.getZoom(); if (!(e > this.options.maxZoom || e < this.options.minZoom)) for (var i = L.bounds(t.min.divideBy(256)._floor(), t.max.divideBy(256)._floor()), n = this._map.options.crs.scale(e) / 256, o = i.min.x; o <= i.max.x; o++)for (var s = i.min.y; s <= i.max.y; s++)this._getTile(e, (o % n + n) % n, (s % n + n) % n) } }, _getTile: function (t, e, i, n) { var a = t + "_" + e + "_" + i, r = L.point(e, i); if (r.z = t, this._tileShouldBeLoaded(r)) if (a in this._cache) { if (!n) return; "function" == typeof this._cache[a] ? n(this._cache[a]) : this._cache[a].push(n) } else this._cache[a] = [], n && this._cache[a].push(n), o(this._getTileURL(r), L.bind(function (t, e) { var i = this._cache[a]; this._cache[a] = s(e); for (var n = 0; n < i.length; ++n)i[n](this._cache[a]) }, this)) }, _tileShouldBeLoaded: function (t) { if (t.z > this.options.maxZoom || t.z < this.options.minZoom) return !1; if (this.options.bounds) { var e = t.multiplyBy(256), i = e.add(new L.Point(256, 256)), n = this._map.unproject(e), o = this._map.unproject(i), s = new L.LatLngBounds([n, o]); if (!this.options.bounds.intersects(s)) return !1 } return !0 } }); t.exports.GridLayer = a, t.exports.gridLayer = function (t, e) { return new a(t, e) } }, PNqo: function (t, e, i) { "use strict"; t.exports = { idUrl: function (t, e) { -1 === t.indexOf("/") ? e.loadID(t) : e.loadURL(t) }, log: function (t) { "object" == typeof console && "function" == typeof console.error && console.error(t) }, strict: function (t, e) { if (typeof t !== e) throw new Error("Invalid argument: " + e + " expected") }, strict_instance: function (t, e, i) { if (!(t instanceof e)) throw new Error("Invalid argument: " + i + " expected") }, strict_oneof: function (t, e) { if (!function (t, e) { if (!e || !e.length) return !1; for (var i = 0; i < e.length; i++)if (e[i] === t) return !0; return !1 }(t, e)) throw new Error("Invalid argument: " + t + " given, valid values are " + e.join(", ")) }, strip_tags: function (t) { return t.replace(/<[^<]+>/g, "") }, lbounds: function (t) { return new L.LatLngBounds([[t[1], t[0]], [t[3], t[2]]]) } } }, RL9G: function (t, e) { !function (e, i, n) { var o, s, a = e.L, r = {}; r.version = "0.7.7", "object" == typeof t && "object" == typeof t.exports ? t.exports = r : "function" == typeof define && define.amd && define(r), r.noConflict = function () { return e.L = a, this }, e.L = r, r.Util = { extend: function (t) { var e, i, n, o, s = Array.prototype.slice.call(arguments, 1); for (i = 0, n = s.length; i < n; i++)for (e in o = s[i] || {}) o.hasOwnProperty(e) && (t[e] = o[e]); return t }, bind: function (t, e) { var i = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : null; return function () { return t.apply(e, i || arguments) } }, stamp: (o = 0, s = "_leaflet_id", function (t) { return t[s] = t[s] || ++o, t[s] }), invokeEach: function (t, e, i) { var n, o; if ("object" == typeof t) { for (n in o = Array.prototype.slice.call(arguments, 3), t) e.apply(i, [n, t[n]].concat(o)); return !0 } return !1 }, limitExecByInterval: function (t, e, i) { var n, o; return function s() { var a = arguments; n ? o = !0 : (n = !0, setTimeout(function () { n = !1, o && (s.apply(i, a), o = !1) }, e), t.apply(i, a)) } }, falseFn: function () { return !1 }, formatNum: function (t, e) { var i = Math.pow(10, e || 5); return Math.round(t * i) / i }, trim: function (t) { return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "") }, splitWords: function (t) { return r.Util.trim(t).split(/\s+/) }, setOptions: function (t, e) { return t.options = r.extend({}, t.options, e), t.options }, getParamString: function (t, e, i) { var n = []; for (var o in t) n.push(encodeURIComponent(i ? o.toUpperCase() : o) + "=" + encodeURIComponent(t[o])); return (e && -1 !== e.indexOf("?") ? "&" : "?") + n.join("&") }, template: function (t, e) { return t.replace(/\{ *([\w_]+) *\}/g, function (t, i) { var n = e[i]; if (void 0 === n) throw new Error("No value provided for variable " + t); return "function" == typeof n && (n = n(e)), n }) }, isArray: Array.isArray || function (t) { return "[object Array]" === Object.prototype.toString.call(t) }, emptyImageUrl: "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" }, function () { function t(t) { var i, n, o = ["webkit", "moz", "o", "ms"]; for (i = 0; i < o.length && !n; i++)n = e[o[i] + t]; return n } var i = 0; function n(t) { var n = +new Date, o = Math.max(0, 16 - (n - i)); return i = n + o, e.setTimeout(t, o) } var o = e.requestAnimationFrame || t("RequestAnimationFrame") || n, s = e.cancelAnimationFrame || t("CancelAnimationFrame") || t("CancelRequestAnimationFrame") || function (t) { e.clearTimeout(t) }; r.Util.requestAnimFrame = function (t, i, s, a) { if (t = r.bind(t, i), !s || o !== n) return o.call(e, t, a); t() }, r.Util.cancelAnimFrame = function (t) { t && s.call(e, t) } }(), r.extend = r.Util.extend, r.bind = r.Util.bind, r.stamp = r.Util.stamp, r.setOptions = r.Util.setOptions, r.Class = function () { }, r.Class.extend = function (t) { var e = function () { this.initialize && this.initialize.apply(this, arguments), this._initHooks && this.callInitHooks() }, i = function () { }; i.prototype = this.prototype; var n = new i; for (var o in n.constructor = e, e.prototype = n, this) this.hasOwnProperty(o) && "prototype" !== o && (e[o] = this[o]); t.statics && (r.extend(e, t.statics), delete t.statics), t.includes && (r.Util.extend.apply(null, [n].concat(t.includes)), delete t.includes), t.options && n.options && (t.options = r.extend({}, n.options, t.options)), r.extend(n, t), n._initHooks = []; var s = this; return e.__super__ = s.prototype, n.callInitHooks = function () { if (!this._initHooksCalled) { s.prototype.callInitHooks && s.prototype.callInitHooks.call(this), this._initHooksCalled = !0; for (var t = 0, e = n._initHooks.length; t < e; t++)n._initHooks[t].call(this) } }, e }, r.Class.include = function (t) { r.extend(this.prototype, t) }, r.Class.mergeOptions = function (t) { r.extend(this.prototype.options, t) }, r.Class.addInitHook = function (t) { var e = Array.prototype.slice.call(arguments, 1), i = "function" == typeof t ? t : function () { this[t].apply(this, e) }; this.prototype._initHooks = this.prototype._initHooks || [], this.prototype._initHooks.push(i) }; var l, h, u, c, p, d, m, f, _, g, v, y, L, b, T, P, x, E, w, C, M, D, S, k = "_leaflet_events"; r.Mixin = {}, r.Mixin.Events = { addEventListener: function (t, e, i) { if (r.Util.invokeEach(t, this.addEventListener, this, e, i)) return this; var n, o, s, a, l, h, u, c = this[k] = this[k] || {}, p = i && i !== this && r.stamp(i); for (n = 0, o = (t = r.Util.splitWords(t)).length; n < o; n++)s = { action: e, context: i || this }, a = t[n], p ? (h = (l = a + "_idx") + "_len", (u = c[l] = c[l] || {})[p] || (u[p] = [], c[h] = (c[h] || 0) + 1), u[p].push(s)) : (c[a] = c[a] || [], c[a].push(s)); return this }, hasEventListeners: function (t) { var e = this[k]; return !!e && (t in e && e[t].length > 0 || t + "_idx" in e && e[t + "_idx_len"] > 0) }, removeEventListener: function (t, e, i) { if (!this[k]) return this; if (!t) return this.clearAllEventListeners(); if (r.Util.invokeEach(t, this.removeEventListener, this, e, i)) return this; var n, o, s, a, l, h, u, c, p = this[k], d = i && i !== this && r.stamp(i); for (n = 0, o = (t = r.Util.splitWords(t)).length; n < o; n++)if (u = (h = (s = t[n]) + "_idx") + "_len", c = p[h], e) { if (a = d && c ? c[d] : p[s]) { for (l = a.length - 1; l >= 0; l--)a[l].action !== e || i && a[l].context !== i || (a.splice(l, 1)[0].action = r.Util.falseFn); i && c && 0 === a.length && (delete c[d], p[u]--) } } else delete p[s], delete p[h], delete p[u]; return this }, clearAllEventListeners: function () { return delete this[k], this }, fireEvent: function (t, e) { if (!this.hasEventListeners(t)) return this; var i, n, o, s, a, l = r.Util.extend({}, e, { type: t, target: this }), h = this[k]; if (h[t]) for (n = 0, o = (i = h[t].slice()).length; n < o; n++)i[n].action.call(i[n].context, l); for (a in s = h[t + "_idx"]) if (i = s[a].slice()) for (n = 0, o = i.length; n < o; n++)i[n].action.call(i[n].context, l); return this }, addOneTimeEventListener: function (t, e, i) { if (r.Util.invokeEach(t, this.addOneTimeEventListener, this, e, i)) return this; var n = r.bind(function () { this.removeEventListener(t, e, i).removeEventListener(t, n, i) }, this); return this.addEventListener(t, e, i).addEventListener(t, n, i) } }, r.Mixin.Events.on = r.Mixin.Events.addEventListener, r.Mixin.Events.off = r.Mixin.Events.removeEventListener, r.Mixin.Events.once = r.Mixin.Events.addOneTimeEventListener, r.Mixin.Events.fire = r.Mixin.Events.fireEvent, h = (l = "ActiveXObject" in e) && !i.addEventListener, u = navigator.userAgent.toLowerCase(), c = -1 !== u.indexOf("webkit"), p = -1 !== u.indexOf("chrome"), d = -1 !== u.indexOf("phantom"), m = -1 !== u.indexOf("android"), f = -1 !== u.search("android [23]"), _ = -1 !== u.indexOf("gecko"), g = typeof orientation != void 0 + "", v = !e.PointerEvent && e.MSPointerEvent, y = e.PointerEvent && e.navigator.pointerEnabled || v, L = "devicePixelRatio" in e && e.devicePixelRatio > 1 || "matchMedia" in e && e.matchMedia("(min-resolution:144dpi)") && e.matchMedia("(min-resolution:144dpi)").matches, b = i.documentElement, T = l && "transition" in b.style, P = "WebKitCSSMatrix" in e && "m11" in new e.WebKitCSSMatrix && !f, x = "MozPerspective" in b.style, E = "OTransition" in b.style, w = !e.L_DISABLE_3D && (T || P || x || E) && !d, C = !e.L_NO_TOUCH && !d && (y || "ontouchstart" in e || e.DocumentTouch && i instanceof e.DocumentTouch), r.Browser = { ie: l, ielt9: h, webkit: c, gecko: _ && !c && !e.opera && !l, android: m, android23: f, chrome: p, ie3d: T, webkit3d: P, gecko3d: x, opera3d: E, any3d: w, mobile: g, mobileWebkit: g && c, mobileWebkit3d: g && P, mobileOpera: g && e.opera, touch: C, msPointer: v, pointer: y, retina: L }, r.Point = function (t, e, i) { this.x = i ? Math.round(t) : t, this.y = i ? Math.round(e) : e }, r.Point.prototype = { clone: function () { return new r.Point(this.x, this.y) }, add: function (t) { return this.clone()._add(r.point(t)) }, _add: function (t) { return this.x += t.x, this.y += t.y, this }, subtract: function (t) { return this.clone()._subtract(r.point(t)) }, _subtract: function (t) { return this.x -= t.x, this.y -= t.y, this }, divideBy: function (t) { return this.clone()._divideBy(t) }, _divideBy: function (t) { return this.x /= t, this.y /= t, this }, multiplyBy: function (t) { return this.clone()._multiplyBy(t) }, _multiplyBy: function (t) { return this.x *= t, this.y *= t, this }, round: function () { return this.clone()._round() }, _round: function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this }, floor: function () { return this.clone()._floor() }, _floor: function () { return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this }, distanceTo: function (t) { var e = (t = r.point(t)).x - this.x, i = t.y - this.y; return Math.sqrt(e * e + i * i) }, equals: function (t) { return (t = r.point(t)).x === this.x && t.y === this.y }, contains: function (t) { return t = r.point(t), Math.abs(t.x) <= Math.abs(this.x) && Math.abs(t.y) <= Math.abs(this.y) }, toString: function () { return "Point(" + r.Util.formatNum(this.x) + ", " + r.Util.formatNum(this.y) + ")" } }, r.point = function (t, e, i) { return t instanceof r.Point ? t : r.Util.isArray(t) ? new r.Point(t[0], t[1]) : null == t ? t : new r.Point(t, e, i) }, r.Bounds = function (t, e) { if (t) for (var i = e ? [t, e] : t, n = 0, o = i.length; n < o; n++)this.extend(i[n]) }, r.Bounds.prototype = { extend: function (t) { return t = r.point(t), this.min || this.max ? (this.min.x = Math.min(t.x, this.min.x), this.max.x = Math.max(t.x, this.max.x), this.min.y = Math.min(t.y, this.min.y), this.max.y = Math.max(t.y, this.max.y)) : (this.min = t.clone(), this.max = t.clone()), this }, getCenter: function (t) { return new r.Point((this.min.x + this.max.x) / 2, (this.min.y + this.max.y) / 2, t) }, getBottomLeft: function () { return new r.Point(this.min.x, this.max.y) }, getTopRight: function () { return new r.Point(this.max.x, this.min.y) }, getSize: function () { return this.max.subtract(this.min) }, contains: function (t) { var e, i; return (t = "number" == typeof t[0] || t instanceof r.Point ? r.point(t) : r.bounds(t)) instanceof r.Bounds ? (e = t.min, i = t.max) : e = i = t, e.x >= this.min.x && i.x <= this.max.x && e.y >= this.min.y && i.y <= this.max.y }, intersects: function (t) { t = r.bounds(t); var e = this.min, i = this.max, n = t.min, o = t.max, s = o.x >= e.x && n.x <= i.x, a = o.y >= e.y && n.y <= i.y; return s && a }, isValid: function () { return !(!this.min || !this.max) } }, r.bounds = function (t, e) { return !t || t instanceof r.Bounds ? t : new r.Bounds(t, e) }, r.Transformation = function (t, e, i, n) { this._a = t, this._b = e, this._c = i, this._d = n }, r.Transformation.prototype = { transform: function (t, e) { return this._transform(t.clone(), e) }, _transform: function (t, e) { return e = e || 1, t.x = e * (this._a * t.x + this._b), t.y = e * (this._c * t.y + this._d), t }, untransform: function (t, e) { return e = e || 1, new r.Point((t.x / e - this._b) / this._a, (t.y / e - this._d) / this._c) } }, r.DomUtil = { get: function (t) { return "string" == typeof t ? i.getElementById(t) : t }, getStyle: function (t, e) { var n = t.style[e]; if (!n && t.currentStyle && (n = t.currentStyle[e]), (!n || "auto" === n) && i.defaultView) { var o = i.defaultView.getComputedStyle(t, null); n = o ? o[e] : null } return "auto" === n ? null : n }, getViewportOffset: function (t) { var e, n = 0, o = 0, s = t, a = i.body, l = i.documentElement; do { if (n += s.offsetTop || 0, o += s.offsetLeft || 0, n += parseInt(r.DomUtil.getStyle(s, "borderTopWidth"), 10) || 0, o += parseInt(r.DomUtil.getStyle(s, "borderLeftWidth"), 10) || 0, e = r.DomUtil.getStyle(s, "position"), s.offsetParent === a && "absolute" === e) break; if ("fixed" === e) { n += a.scrollTop || l.scrollTop || 0, o += a.scrollLeft || l.scrollLeft || 0; break } if ("relative" === e && !s.offsetLeft) { var h = r.DomUtil.getStyle(s, "width"), u = r.DomUtil.getStyle(s, "max-width"), c = s.getBoundingClientRect(); "none" === h && "none" === u || (o += c.left + s.clientLeft), n += c.top + (a.scrollTop || l.scrollTop || 0); break } s = s.offsetParent } while (s); s = t; do { if (s === a) break; n -= s.scrollTop || 0, o -= s.scrollLeft || 0, s = s.parentNode } while (s); return new r.Point(o, n) }, documentIsLtr: function () { return r.DomUtil._docIsLtrCached || (r.DomUtil._docIsLtrCached = !0, r.DomUtil._docIsLtr = "ltr" === r.DomUtil.getStyle(i.body, "direction")), r.DomUtil._docIsLtr }, create: function (t, e, n) { var o = i.createElement(t); return o.className = e, n && n.appendChild(o), o }, hasClass: function (t, e) { if (void 0 !== t.classList) return t.classList.contains(e); var i = r.DomUtil._getClass(t); return i.length > 0 && new RegExp("(^|\\s)" + e + "(\\s|$)").test(i) }, addClass: function (t, e) { if (void 0 !== t.classList) for (var i = r.Util.splitWords(e), n = 0, o = i.length; n < o; n++)t.classList.add(i[n]); else if (!r.DomUtil.hasClass(t, e)) { var s = r.DomUtil._getClass(t); r.DomUtil._setClass(t, (s ? s + " " : "") + e) } }, removeClass: function (t, e) { void 0 !== t.classList ? t.classList.remove(e) : r.DomUtil._setClass(t, r.Util.trim((" " + r.DomUtil._getClass(t) + " ").replace(" " + e + " ", " "))) }, _setClass: function (t, e) { void 0 === t.className.baseVal ? t.className = e : t.className.baseVal = e }, _getClass: function (t) { return void 0 === t.className.baseVal ? t.className : t.className.baseVal }, setOpacity: function (t, e) { if ("opacity" in t.style) t.style.opacity = e; else if ("filter" in t.style) { var i = !1, n = "DXImageTransform.Microsoft.Alpha"; try { i = t.filters.item(n) } catch (t) { if (1 === e) return } e = Math.round(100 * e), i ? (i.Enabled = 100 !== e, i.Opacity = e) : t.style.filter += " progid:" + n + "(opacity=" + e + ")" } }, testProp: function (t) { for (var e = i.documentElement.style, n = 0; n < t.length; n++)if (t[n] in e) return t[n]; return !1 }, getTranslateString: function (t) { var e = r.Browser.webkit3d, i = (e ? ",0" : "") + ")"; return "translate" + (e ? "3d" : "") + "(" + t.x + "px," + t.y + "px" + i }, getScaleString: function (t, e) { return r.DomUtil.getTranslateString(e.add(e.multiplyBy(-1 * t))) + (" scale(" + t + ") ") }, setPosition: function (t, e, i) { t._leaflet_pos = e, !i && r.Browser.any3d ? t.style[r.DomUtil.TRANSFORM] = r.DomUtil.getTranslateString(e) : (t.style.left = e.x + "px", t.style.top = e.y + "px") }, getPosition: function (t) { return t._leaflet_pos } }, r.DomUtil.TRANSFORM = r.DomUtil.testProp(["transform", "WebkitTransform", "OTransform", "MozTransform", "msTransform"]), r.DomUtil.TRANSITION = r.DomUtil.testProp(["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"]), r.DomUtil.TRANSITION_END = "webkitTransition" === r.DomUtil.TRANSITION || "OTransition" === r.DomUtil.TRANSITION ? r.DomUtil.TRANSITION + "End" : "transitionend", function () { if ("onselectstart" in i) r.extend(r.DomUtil, { disableTextSelection: function () { r.DomEvent.on(e, "selectstart", r.DomEvent.preventDefault) }, enableTextSelection: function () { r.DomEvent.off(e, "selectstart", r.DomEvent.preventDefault) } }); else { var t = r.DomUtil.testProp(["userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect"]); r.extend(r.DomUtil, { disableTextSelection: function () { if (t) { var e = i.documentElement.style; this._userSelect = e[t], e[t] = "none" } }, enableTextSelection: function () { t && (i.documentElement.style[t] = this._userSelect, delete this._userSelect) } }) } r.extend(r.DomUtil, { disableImageDrag: function () { r.DomEvent.on(e, "dragstart", r.DomEvent.preventDefault) }, enableImageDrag: function () { r.DomEvent.off(e, "dragstart", r.DomEvent.preventDefault) } }) }(), r.LatLng = function (t, e, i) { if (t = parseFloat(t), e = parseFloat(e), isNaN(t) || isNaN(e)) throw new Error("Invalid LatLng object: (" + t + ", " + e + ")"); this.lat = t, this.lng = e, void 0 !== i && (this.alt = parseFloat(i)) }, r.extend(r.LatLng, { DEG_TO_RAD: Math.PI / 180, RAD_TO_DEG: 180 / Math.PI, MAX_MARGIN: 1e-9 }), r.LatLng.prototype = { equals: function (t) { return !!t && (t = r.latLng(t), Math.max(Math.abs(this.lat - t.lat), Math.abs(this.lng - t.lng)) <= r.LatLng.MAX_MARGIN) }, toString: function (t) { return "LatLng(" + r.Util.formatNum(this.lat, t) + ", " + r.Util.formatNum(this.lng, t) + ")" }, distanceTo: function (t) { t = r.latLng(t); var e = r.LatLng.DEG_TO_RAD, i = (t.lat - this.lat) * e, n = (t.lng - this.lng) * e, o = this.lat * e, s = t.lat * e, a = Math.sin(i / 2), l = Math.sin(n / 2), h = a * a + l * l * Math.cos(o) * Math.cos(s); return 12756274 * Math.atan2(Math.sqrt(h), Math.sqrt(1 - h)) }, wrap: function (t, e) { var i = this.lng; return i = (i + (e = e || 180)) % (e - (t = t || -180)) + (i < t || i === e ? e : t), new r.LatLng(this.lat, i) } }, r.latLng = function (t, e) { return t instanceof r.LatLng ? t : r.Util.isArray(t) ? "number" == typeof t[0] || "string" == typeof t[0] ? new r.LatLng(t[0], t[1], t[2]) : null : null == t ? t : "object" == typeof t && "lat" in t ? new r.LatLng(t.lat, "lng" in t ? t.lng : t.lon) : void 0 === e ? null : new r.LatLng(t, e) }, r.LatLngBounds = function (t, e) { if (t) for (var i = e ? [t, e] : t, n = 0, o = i.length; n < o; n++)this.extend(i[n]) }, r.LatLngBounds.prototype = { extend: function (t) { if (!t) return this; var e = r.latLng(t); return (t = null !== e ? e : r.latLngBounds(t)) instanceof r.LatLng ? this._southWest || this._northEast ? (this._southWest.lat = Math.min(t.lat, this._southWest.lat), this._southWest.lng = Math.min(t.lng, this._southWest.lng), this._northEast.lat = Math.max(t.lat, this._northEast.lat), this._northEast.lng = Math.max(t.lng, this._northEast.lng)) : (this._southWest = new r.LatLng(t.lat, t.lng), this._northEast = new r.LatLng(t.lat, t.lng)) : t instanceof r.LatLngBounds && (this.extend(t._southWest), this.extend(t._northEast)), this }, pad: function (t) { var e = this._southWest, i = this._northEast, n = Math.abs(e.lat - i.lat) * t, o = Math.abs(e.lng - i.lng) * t; return new r.LatLngBounds(new r.LatLng(e.lat - n, e.lng - o), new r.LatLng(i.lat + n, i.lng + o)) }, getCenter: function () { return new r.LatLng((this._southWest.lat + this._northEast.lat) / 2, (this._southWest.lng + this._northEast.lng) / 2) }, getSouthWest: function () { return this._southWest }, getNorthEast: function () { return this._northEast }, getNorthWest: function () { return new r.LatLng(this.getNorth(), this.getWest()) }, getSouthEast: function () { return new r.LatLng(this.getSouth(), this.getEast()) }, getWest: function () { return this._southWest.lng }, getSouth: function () { return this._southWest.lat }, getEast: function () { return this._northEast.lng }, getNorth: function () { return this._northEast.lat }, contains: function (t) { t = "number" == typeof t[0] || t instanceof r.LatLng ? r.latLng(t) : r.latLngBounds(t); var e, i, n = this._southWest, o = this._northEast; return t instanceof r.LatLngBounds ? (e = t.getSouthWest(), i = t.getNorthEast()) : e = i = t, e.lat >= n.lat && i.lat <= o.lat && e.lng >= n.lng && i.lng <= o.lng }, intersects: function (t) { t = r.latLngBounds(t); var e = this._southWest, i = this._northEast, n = t.getSouthWest(), o = t.getNorthEast(), s = o.lat >= e.lat && n.lat <= i.lat, a = o.lng >= e.lng && n.lng <= i.lng; return s && a }, toBBoxString: function () { return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(",") }, equals: function (t) { return !!t && (t = r.latLngBounds(t), this._southWest.equals(t.getSouthWest()) && this._northEast.equals(t.getNorthEast())) }, isValid: function () { return !(!this._southWest || !this._northEast) } }, r.latLngBounds = function (t, e) { return !t || t instanceof r.LatLngBounds ? t : new r.LatLngBounds(t, e) }, r.Projection = {}, r.Projection.SphericalMercator = { MAX_LATITUDE: 85.0511287798, project: function (t) { var e = r.LatLng.DEG_TO_RAD, i = this.MAX_LATITUDE, n = Math.max(Math.min(i, t.lat), -i), o = t.lng * e, s = n * e; return s = Math.log(Math.tan(Math.PI / 4 + s / 2)), new r.Point(o, s) }, unproject: function (t) { var e = r.LatLng.RAD_TO_DEG, i = t.x * e, n = (2 * Math.atan(Math.exp(t.y)) - Math.PI / 2) * e; return new r.LatLng(n, i) } }, r.Projection.LonLat = { project: function (t) { return new r.Point(t.lng, t.lat) }, unproject: function (t) { return new r.LatLng(t.y, t.x) } }, r.CRS = { latLngToPoint: function (t, e) { var i = this.projection.project(t), n = this.scale(e); return this.transformation._transform(i, n) }, pointToLatLng: function (t, e) { var i = this.scale(e), n = this.transformation.untransform(t, i); return this.projection.unproject(n) }, project: function (t) { return this.projection.project(t) }, scale: function (t) { return 256 * Math.pow(2, t) }, getSize: function (t) { var e = this.scale(t); return r.point(e, e) } }, r.CRS.Simple = r.extend({}, r.CRS, { projection: r.Projection.LonLat, transformation: new r.Transformation(1, 0, -1, 0), scale: function (t) { return Math.pow(2, t) } }), r.CRS.EPSG3857 = r.extend({}, r.CRS, { code: "EPSG:3857", projection: r.Projection.SphericalMercator, transformation: new r.Transformation(.5 / Math.PI, .5, -.5 / Math.PI, .5), project: function (t) { return this.projection.project(t).multiplyBy(6378137) } }), r.CRS.EPSG900913 = r.extend({}, r.CRS.EPSG3857, { code: "EPSG:900913" }), r.CRS.EPSG4326 = r.extend({}, r.CRS, { code: "EPSG:4326", projection: r.Projection.LonLat, transformation: new r.Transformation(1 / 360, .5, -1 / 360, .5) }), r.Map = r.Class.extend({ includes: r.Mixin.Events, options: { crs: r.CRS.EPSG3857, fadeAnimation: r.DomUtil.TRANSITION && !r.Browser.android23, trackResize: !0, markerZoomAnimation: r.DomUtil.TRANSITION && r.Browser.any3d }, initialize: function (t, e) { e = r.setOptions(this, e), this._initContainer(t), this._initLayout(), this._onResize = r.bind(this._onResize, this), this._initEvents(), e.maxBounds && this.setMaxBounds(e.maxBounds), e.center && void 0 !== e.zoom && this.setView(r.latLng(e.center), e.zoom, { reset: !0 }), this._handlers = [], this._layers = {}, this._zoomBoundLayers = {}, this._tileLayersNum = 0, this.callInitHooks(), this._addLayers(e.layers) }, setView: function (t, e) { return e = void 0 === e ? this.getZoom() : e, this._resetView(r.latLng(t), this._limitZoom(e)), this }, setZoom: function (t, e) { return this._loaded ? this.setView(this.getCenter(), t, { zoom: e }) : (this._zoom = this._limitZoom(t), this) }, zoomIn: function (t, e) { return this.setZoom(this._zoom + (t || 1), e) }, zoomOut: function (t, e) { return this.setZoom(this._zoom - (t || 1), e) }, setZoomAround: function (t, e, i) { var n = this.getZoomScale(e), o = this.getSize().divideBy(2), s = (t instanceof r.Point ? t : this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1 - 1 / n), a = this.containerPointToLatLng(o.add(s)); return this.setView(a, e, { zoom: i }) }, fitBounds: function (t, e) { e = e || {}, t = t.getBounds ? t.getBounds() : r.latLngBounds(t); var i = r.point(e.paddingTopLeft || e.padding || [0, 0]), n = r.point(e.paddingBottomRight || e.padding || [0, 0]), o = this.getBoundsZoom(t, !1, i.add(n)); o = e.maxZoom ? Math.min(e.maxZoom, o) : o; var s = n.subtract(i).divideBy(2), a = this.project(t.getSouthWest(), o), l = this.project(t.getNorthEast(), o), h = this.unproject(a.add(l).divideBy(2).add(s), o); return this.setView(h, o, e) }, fitWorld: function (t) { return this.fitBounds([[-90, -180], [90, 180]], t) }, panTo: function (t, e) { return this.setView(t, this._zoom, { pan: e }) }, panBy: function (t) { return this.fire("movestart"), this._rawPanBy(r.point(t)), this.fire("move"), this.fire("moveend") }, setMaxBounds: function (t) { return t = r.latLngBounds(t), this.options.maxBounds = t, t ? (this._loaded && this._panInsideMaxBounds(), this.on("moveend", this._panInsideMaxBounds, this)) : this.off("moveend", this._panInsideMaxBounds, this) }, panInsideBounds: function (t, e) { var i = this.getCenter(), n = this._limitCenter(i, this._zoom, t); return i.equals(n) ? this : this.panTo(n, e) }, addLayer: function (t) { var e = r.stamp(t); return this._layers[e] ? this : (this._layers[e] = t, !t.options || isNaN(t.options.maxZoom) && isNaN(t.options.minZoom) || (this._zoomBoundLayers[e] = t, this._updateZoomLevels()), this.options.zoomAnimation && r.TileLayer && t instanceof r.TileLayer && (this._tileLayersNum++, this._tileLayersToLoad++, t.on("load", this._onTileLayerLoad, this)), this._loaded && this._layerAdd(t), this) }, removeLayer: function (t) { var e = r.stamp(t); return this._layers[e] ? (this._loaded && t.onRemove(this), delete this._layers[e], this._loaded && this.fire("layerremove", { layer: t }), this._zoomBoundLayers[e] && (delete this._zoomBoundLayers[e], this._updateZoomLevels()), this.options.zoomAnimation && r.TileLayer && t instanceof r.TileLayer && (this._tileLayersNum--, this._tileLayersToLoad--, t.off("load", this._onTileLayerLoad, this)), this) : this }, hasLayer: function (t) { return !!t && r.stamp(t) in this._layers }, eachLayer: function (t, e) { for (var i in this._layers) t.call(e, this._layers[i]); return this }, invalidateSize: function (t) { if (!this._loaded) return this; t = r.extend({ animate: !1, pan: !0 }, !0 === t ? { animate: !0 } : t); var e = this.getSize(); this._sizeChanged = !0, this._initialCenter = null; var i = this.getSize(), n = e.divideBy(2).round(), o = i.divideBy(2).round(), s = n.subtract(o); return s.x || s.y ? (t.animate && t.pan ? this.panBy(s) : (t.pan && this._rawPanBy(s), this.fire("move"), t.debounceMoveend ? (clearTimeout(this._sizeTimer), this._sizeTimer = setTimeout(r.bind(this.fire, this, "moveend"), 200)) : this.fire("moveend")), this.fire("resize", { oldSize: e, newSize: i })) : this }, addHandler: function (t, e) { if (!e) return this; var i = this[t] = new e(this); return this._handlers.push(i), this.options[t] && i.enable(), this }, remove: function () { this._loaded && this.fire("unload"), this._initEvents("off"); try { delete this._container._leaflet } catch (t) { this._container._leaflet = void 0 } return this._clearPanes(), this._clearControlPos && this._clearControlPos(), this._clearHandlers(), this }, getCenter: function () { return this._checkIfLoaded(), this._initialCenter && !this._moved() ? this._initialCenter : this.layerPointToLatLng(this._getCenterLayerPoint()) }, getZoom: function () { return this._zoom }, getBounds: function () { var t = this.getPixelBounds(), e = this.unproject(t.getBottomLeft()), i = this.unproject(t.getTopRight()); return new r.LatLngBounds(e, i) }, getMinZoom: function () { return void 0 === this.options.minZoom ? void 0 === this._layersMinZoom ? 0 : this._layersMinZoom : this.options.minZoom }, getMaxZoom: function () { return void 0 === this.options.maxZoom ? void 0 === this._layersMaxZoom ? 1 / 0 : this._layersMaxZoom : this.options.maxZoom }, getBoundsZoom: function (t, e, i) { t = r.latLngBounds(t); var n, o = this.getMinZoom() - (e ? 1 : 0), s = this.getMaxZoom(), a = this.getSize(), l = t.getNorthWest(), h = t.getSouthEast(), u = !0; i = r.point(i || [0, 0]); do { o++, n = this.project(h, o).subtract(this.project(l, o)).add(i), u = e ? n.x < a.x || n.y < a.y : a.contains(n) } while (u && o <= s); return u && e ? null : e ? o : o - 1 }, getSize: function () { return this._size && !this._sizeChanged || (this._size = new r.Point(this._container.clientWidth, this._container.clientHeight), this._sizeChanged = !1), this._size.clone() }, getPixelBounds: function () { var t = this._getTopLeftPoint(); return new r.Bounds(t, t.add(this.getSize())) }, getPixelOrigin: function () { return this._checkIfLoaded(), this._initialTopLeftPoint }, getPanes: function () { return this._panes }, getContainer: function () { return this._container }, getZoomScale: function (t) { var e = this.options.crs; return e.scale(t) / e.scale(this._zoom) }, getScaleZoom: function (t) { return this._zoom + Math.log(t) / Math.LN2 }, project: function (t, e) { return e = void 0 === e ? this._zoom : e, this.options.crs.latLngToPoint(r.latLng(t), e) }, unproject: function (t, e) { return e = void 0 === e ? this._zoom : e, this.options.crs.pointToLatLng(r.point(t), e) }, layerPointToLatLng: function (t) { var e = r.point(t).add(this.getPixelOrigin()); return this.unproject(e) }, latLngToLayerPoint: function (t) { return this.project(r.latLng(t))._round()._subtract(this.getPixelOrigin()) }, containerPointToLayerPoint: function (t) { return r.point(t).subtract(this._getMapPanePos()) }, layerPointToContainerPoint: function (t) { return r.point(t).add(this._getMapPanePos()) }, containerPointToLatLng: function (t) { var e = this.containerPointToLayerPoint(r.point(t)); return this.layerPointToLatLng(e) }, latLngToContainerPoint: function (t) { return this.layerPointToContainerPoint(this.latLngToLayerPoint(r.latLng(t))) }, mouseEventToContainerPoint: function (t) { return r.DomEvent.getMousePosition(t, this._container) }, mouseEventToLayerPoint: function (t) { return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t)) }, mouseEventToLatLng: function (t) { return this.layerPointToLatLng(this.mouseEventToLayerPoint(t)) }, _initContainer: function (t) { var e = this._container = r.DomUtil.get(t); if (!e) throw new Error("Map container not found."); if (e._leaflet) throw new Error("Map container is already initialized."); e._leaflet = !0 }, _initLayout: function () { var t = this._container; r.DomUtil.addClass(t, "leaflet-container" + (r.Browser.touch ? " leaflet-touch" : "") + (r.Browser.retina ? " leaflet-retina" : "") + (r.Browser.ielt9 ? " leaflet-oldie" : "") + (this.options.fadeAnimation ? " leaflet-fade-anim" : "")); var e = r.DomUtil.getStyle(t, "position"); "absolute" !== e && "relative" !== e && "fixed" !== e && (t.style.position = "relative"), this._initPanes(), this._initControlPos && this._initControlPos() }, _initPanes: function () { var t = this._panes = {}; this._mapPane = t.mapPane = this._createPane("leaflet-map-pane", this._container), this._tilePane = t.tilePane = this._createPane("leaflet-tile-pane", this._mapPane), t.objectsPane = this._createPane("leaflet-objects-pane", this._mapPane), t.shadowPane = this._createPane("leaflet-shadow-pane"), t.overlayPane = this._createPane("leaflet-overlay-pane"), t.markerPane = this._createPane("leaflet-marker-pane"), t.popupPane = this._createPane("leaflet-popup-pane"); var e = " leaflet-zoom-hide"; this.options.markerZoomAnimation || (r.DomUtil.addClass(t.markerPane, e), r.DomUtil.addClass(t.shadowPane, e), r.DomUtil.addClass(t.popupPane, e)) }, _createPane: function (t, e) { return r.DomUtil.create("div", t, e || this._panes.objectsPane) }, _clearPanes: function () { this._container.removeChild(this._mapPane) }, _addLayers: function (t) { for (var e = 0, i = (t = t ? r.Util.isArray(t) ? t : [t] : []).length; e < i; e++)this.addLayer(t[e]) }, _resetView: function (t, e, i, n) { var o = this._zoom !== e; n || (this.fire("movestart"), o && this.fire("zoomstart")), this._zoom = e, this._initialCenter = t, this._initialTopLeftPoint = this._getNewTopLeftPoint(t), i ? this._initialTopLeftPoint._add(this._getMapPanePos()) : r.DomUtil.setPosition(this._mapPane, new r.Point(0, 0)), this._tileLayersToLoad = this._tileLayersNum; var s = !this._loaded; this._loaded = !0, this.fire("viewreset", { hard: !i }), s && (this.fire("load"), this.eachLayer(this._layerAdd, this)), this.fire("move"), (o || n) && this.fire("zoomend"), this.fire("moveend", { hard: !i }) }, _rawPanBy: function (t) { r.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(t)) }, _getZoomSpan: function () { return this.getMaxZoom() - this.getMinZoom() }, _updateZoomLevels: function () { var t, e = 1 / 0, i = -1 / 0, n = this._getZoomSpan(); for (t in this._zoomBoundLayers) { var o = this._zoomBoundLayers[t]; isNaN(o.options.minZoom) || (e = Math.min(e, o.options.minZoom)), isNaN(o.options.maxZoom) || (i = Math.max(i, o.options.maxZoom)) } void 0 === t ? this._layersMaxZoom = this._layersMinZoom = void 0 : (this._layersMaxZoom = i, this._layersMinZoom = e), n !== this._getZoomSpan() && this.fire("zoomlevelschange") }, _panInsideMaxBounds: function () { this.panInsideBounds(this.options.maxBounds) }, _checkIfLoaded: function () { if (!this._loaded) throw new Error("Set map center and zoom first.") }, _initEvents: function (t) { if (r.DomEvent) { t = t || "on", r.DomEvent[t](this._container, "click", this._onMouseClick, this); var i, n, o = ["dblclick", "mousedown", "mouseup", "mouseenter", "mouseleave", "mousemove", "contextmenu"]; for (i = 0, n = o.length; i < n; i++)r.DomEvent[t](this._container, o[i], this._fireMouseEvent, this); this.options.trackResize && r.DomEvent[t](e, "resize", this._onResize, this) } }, _onResize: function () { r.Util.cancelAnimFrame(this._resizeRequest), this._resizeRequest = r.Util.requestAnimFrame(function () { this.invalidateSize({ debounceMoveend: !0 }) }, this, !1, this._container) }, _onMouseClick: function (t) { !this._loaded || !t._simulated && (this.dragging && this.dragging.moved() || this.boxZoom && this.boxZoom.moved()) || r.DomEvent._skipped(t) || (this.fire("preclick"), this._fireMouseEvent(t)) }, _fireMouseEvent: function (t) { if (this._loaded && !r.DomEvent._skipped(t)) { var e = t.type; if (e = "mouseenter" === e ? "mouseover" : "mouseleave" === e ? "mouseout" : e, this.hasEventListeners(e)) { "contextmenu" === e && r.DomEvent.preventDefault(t); var i = this.mouseEventToContainerPoint(t), n = this.containerPointToLayerPoint(i), o = this.layerPointToLatLng(n); this.fire(e, { latlng: o, layerPoint: n, containerPoint: i, originalEvent: t }) } } }, _onTileLayerLoad: function () { this._tileLayersToLoad--, this._tileLayersNum && !this._tileLayersToLoad && this.fire("tilelayersload") }, _clearHandlers: function () { for (var t = 0, e = this._handlers.length; t < e; t++)this._handlers[t].disable() }, whenReady: function (t, e) { return this._loaded ? t.call(e || this, this) : this.on("load", t, e), this }, _layerAdd: function (t) { t.onAdd(this), this.fire("layeradd", { layer: t }) }, _getMapPanePos: function () { return r.DomUtil.getPosition(this._mapPane) }, _moved: function () { var t = this._getMapPanePos(); return t && !t.equals([0, 0]) }, _getTopLeftPoint: function () { return this.getPixelOrigin().subtract(this._getMapPanePos()) }, _getNewTopLeftPoint: function (t, e) { var i = this.getSize()._divideBy(2); return this.project(t, e)._subtract(i)._round() }, _latLngToNewLayerPoint: function (t, e, i) { var n = this._getNewTopLeftPoint(i, e).add(this._getMapPanePos()); return this.project(t, e)._subtract(n) }, _getCenterLayerPoint: function () { return this.containerPointToLayerPoint(this.getSize()._divideBy(2)) }, _getCenterOffset: function (t) { return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint()) }, _limitCenter: function (t, e, i) { if (!i) return t; var n = this.project(t, e), o = this.getSize().divideBy(2), s = new r.Bounds(n.subtract(o), n.add(o)), a = this._getBoundsOffset(s, i, e); return this.unproject(n.add(a), e) }, _limitOffset: function (t, e) { if (!e) return t; var i = this.getPixelBounds(), n = new r.Bounds(i.min.add(t), i.max.add(t)); return t.add(this._getBoundsOffset(n, e)) }, _getBoundsOffset: function (t, e, i) { var n = this.project(e.getNorthWest(), i).subtract(t.min), o = this.project(e.getSouthEast(), i).subtract(t.max), s = this._rebound(n.x, -o.x), a = this._rebound(n.y, -o.y); return new r.Point(s, a) }, _rebound: function (t, e) { return t + e > 0 ? Math.round(t - e) / 2 : Math.max(0, Math.ceil(t)) - Math.max(0, Math.floor(e)) }, _limitZoom: function (t) { var e = this.getMinZoom(), i = this.getMaxZoom(); return Math.max(e, Math.min(i, t)) } }), r.map = function (t, e) { return new r.Map(t, e) }, r.Projection.Mercator = { MAX_LATITUDE: 85.0840591556, R_MINOR: 6356752.314245179, R_MAJOR: 6378137, project: function (t) { var e = r.LatLng.DEG_TO_RAD, i = this.MAX_LATITUDE, n = Math.max(Math.min(i, t.lat), -i), o = this.R_MAJOR, s = this.R_MINOR, a = t.lng * e * o, l = n * e, h = s / o, u = Math.sqrt(1 - h * h), c = u * Math.sin(l); c = Math.pow((1 - c) / (1 + c), .5 * u); var p = Math.tan(.5 * (.5 * Math.PI - l)) / c; return l = -o * Math.log(p), new r.Point(a, l) }, unproject: function (t) { for (var e, i = r.LatLng.RAD_TO_DEG, n = this.R_MAJOR, o = this.R_MINOR, s = t.x * i / n, a = o / n, l = Math.sqrt(1 - a * a), h = Math.exp(-t.y / n), u = Math.PI / 2 - 2 * Math.atan(h), c = 15, p = .1; Math.abs(p) > 1e-7 && --c > 0;)e = l * Math.sin(u), u += p = Math.PI / 2 - 2 * Math.atan(h * Math.pow((1 - e) / (1 + e), .5 * l)) - u; return new r.LatLng(u * i, s) } }, r.CRS.EPSG3395 = r.extend({}, r.CRS, { code: "EPSG:3395", projection: r.Projection.Mercator, transformation: (M = r.Projection.Mercator.R_MAJOR, D = .5 / (Math.PI * M), new r.Transformation(D, .5, -D, .5)) }), r.TileLayer = r.Class.extend({ includes: r.Mixin.Events, options: { minZoom: 0, maxZoom: 18, tileSize: 256, subdomains: "abc", errorTileUrl: "", attribution: "", zoomOffset: 0, opacity: 1, unloadInvisibleTiles: r.Browser.mobile, updateWhenIdle: r.Browser.mobile }, initialize: function (t, e) { (e = r.setOptions(this, e)).detectRetina && r.Browser.retina && e.maxZoom > 0 && (e.tileSize = Math.floor(e.tileSize / 2), e.zoomOffset++, e.minZoom > 0 && e.minZoom--, this.options.maxZoom--), e.bounds && (e.bounds = r.latLngBounds(e.bounds)), this._url = t; var i = this.options.subdomains; "string" == typeof i && (this.options.subdomains = i.split("")) }, onAdd: function (t) { this._map = t, this._animated = t._zoomAnimated, this._initContainer(), t.on({ viewreset: this._reset, moveend: this._update }, this), this._animated && t.on({ zoomanim: this._animateZoom, zoomend: this._endZoomAnim }, this), this.options.updateWhenIdle || (this._limitedUpdate = r.Util.limitExecByInterval(this._update, 150, this), t.on("move", this._limitedUpdate, this)), this._reset(), this._update() }, addTo: function (t) { return t.addLayer(this), this }, onRemove: function (t) { this._container.parentNode.removeChild(this._container), t.off({ viewreset: this._reset, moveend: this._update }, this), this._animated && t.off({ zoomanim: this._animateZoom, zoomend: this._endZoomAnim }, this), this.options.updateWhenIdle || t.off("move", this._limitedUpdate, this), this._container = null, this._map = null }, bringToFront: function () { var t = this._map._panes.tilePane; return this._container && (t.appendChild(this._container), this._setAutoZIndex(t, Math.max)), this }, bringToBack: function () { var t = this._map._panes.tilePane; return this._container && (t.insertBefore(this._container, t.firstChild), this._setAutoZIndex(t, Math.min)), this }, getAttribution: function () { return this.options.attribution }, getContainer: function () { return this._container }, setOpacity: function (t) { return this.options.opacity = t, this._map && this._updateOpacity(), this }, setZIndex: function (t) { return this.options.zIndex = t, this._updateZIndex(), this }, setUrl: function (t, e) { return this._url = t, e || this.redraw(), this }, redraw: function () { return this._map && (this._reset({ hard: !0 }), this._update()), this }, _updateZIndex: function () { this._container && void 0 !== this.options.zIndex && (this._container.style.zIndex = this.options.zIndex) }, _setAutoZIndex: function (t, e) { var i, n, o, s = t.children, a = -e(1 / 0, -1 / 0); for (n = 0, o = s.length; n < o; n++)s[n] !== this._container && (i = parseInt(s[n].style.zIndex, 10), isNaN(i) || (a = e(a, i))); this.options.zIndex = this._container.style.zIndex = (isFinite(a) ? a : 0) + e(1, -1) }, _updateOpacity: function () { var t, e = this._tiles; if (r.Browser.ielt9) for (t in e) r.DomUtil.setOpacity(e[t], this.options.opacity); else r.DomUtil.setOpacity(this._container, this.options.opacity) }, _initContainer: function () { var t = this._map._panes.tilePane; if (!this._container) { if (this._container = r.DomUtil.create("div", "leaflet-layer"), this._updateZIndex(), this._animated) { this._bgBuffer = r.DomUtil.create("div", "leaflet-tile-container", this._container), this._tileContainer = r.DomUtil.create("div", "leaflet-tile-container", this._container) } else this._tileContainer = this._container; t.appendChild(this._container), this.options.opacity < 1 && this._updateOpacity() } }, _reset: function (t) { for (var e in this._tiles) this.fire("tileunload", { tile: this._tiles[e] }); this._tiles = {}, this._tilesToLoad = 0, this.options.reuseTiles && (this._unusedTiles = []), this._tileContainer.innerHTML = "", this._animated && t && t.hard && this._clearBgBuffer(), this._initContainer() }, _getTileSize: function () { var t = this._map, e = t.getZoom() + this.options.zoomOffset, i = this.options.maxNativeZoom, n = this.options.tileSize; return i && e > i && (n = Math.round(t.getZoomScale(e) / t.getZoomScale(i) * n)), n }, _update: function () { if (this._map) { var t = this._map, e = t.getPixelBounds(), i = t.getZoom(), n = this._getTileSize(); if (!(i > this.options.maxZoom || i < this.options.minZoom)) { var o = r.bounds(e.min.divideBy(n)._floor(), e.max.divideBy(n)._floor()); this._addTilesFromCenterOut(o), (this.options.unloadInvisibleTiles || this.options.reuseTiles) && this._removeOtherTiles(o) } } }, _addTilesFromCenterOut: function (t) { var e, n, o, s = [], a = t.getCenter(); for (e = t.min.y; e <= t.max.y; e++)for (n = t.min.x; n <= t.max.x; n++)o = new r.Point(n, e), this._tileShouldBeLoaded(o) && s.push(o); var l = s.length; if (0 !== l) { s.sort(function (t, e) { return t.distanceTo(a) - e.distanceTo(a) }); var h = i.createDocumentFragment(); for (this._tilesToLoad || this.fire("loading"), this._tilesToLoad += l, n = 0; n < l; n++)this._addTile(s[n], h); this._tileContainer.appendChild(h) } }, _tileShouldBeLoaded: function (t) { if (t.x + ":" + t.y in this._tiles) return !1; var e = this.options; if (!e.continuousWorld) { var i = this._getWrapTileNum(); if (e.noWrap && (t.x < 0 || t.x >= i.x) || t.y < 0 || t.y >= i.y) return !1 } if (e.bounds) { var n = this._getTileSize(), o = t.multiplyBy(n), s = o.add([n, n]), a = this._map.unproject(o), r = this._map.unproject(s); if (e.continuousWorld || e.noWrap || (a = a.wrap(), r = r.wrap()), !e.bounds.intersects([a, r])) return !1 } return !0 }, _removeOtherTiles: function (t) { var e, i, n, o; for (o in this._tiles) e = o.split(":"), i = parseInt(e[0], 10), n = parseInt(e[1], 10), (i < t.min.x || i > t.max.x || n < t.min.y || n > t.max.y) && this._removeTile(o) }, _removeTile: function (t) { var e = this._tiles[t]; this.fire("tileunload", { tile: e, url: e.src }), this.options.reuseTiles ? (r.DomUtil.removeClass(e, "leaflet-tile-loaded"), this._unusedTiles.push(e)) : e.parentNode === this._tileContainer && this._tileContainer.removeChild(e), r.Browser.android || (e.onload = null, e.src = r.Util.emptyImageUrl), delete this._tiles[t] }, _addTile: function (t, e) { var i = this._getTilePos(t), n = this._getTile(); r.DomUtil.setPosition(n, i, r.Browser.chrome), this._tiles[t.x + ":" + t.y] = n, this._loadTile(n, t), n.parentNode !== this._tileContainer && e.appendChild(n) }, _getZoomForUrl: function () { var t = this.options, e = this._map.getZoom(); return t.zoomReverse && (e = t.maxZoom - e), e += t.zoomOffset, t.maxNativeZoom ? Math.min(e, t.maxNativeZoom) : e }, _getTilePos: function (t) { var e = this._map.getPixelOrigin(), i = this._getTileSize(); return t.multiplyBy(i).subtract(e) }, getTileUrl: function (t) { return r.Util.template(this._url, r.extend({ s: this._getSubdomain(t), z: t.z, x: t.x, y: t.y }, this.options)) }, _getWrapTileNum: function () { return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor() }, _adjustTilePoint: function (t) { var e = this._getWrapTileNum(); this.options.continuousWorld || this.options.noWrap || (t.x = (t.x % e.x + e.x) % e.x), this.options.tms && (t.y = e.y - t.y - 1), t.z = this._getZoomForUrl() }, _getSubdomain: function (t) { var e = Math.abs(t.x + t.y) % this.options.subdomains.length; return this.options.subdomains[e] }, _getTile: function () { if (this.options.reuseTiles && this._unusedTiles.length > 0) { var t = this._unusedTiles.pop(); return this._resetTile(t), t } return this._createTile() }, _resetTile: function () { }, _createTile: function () { var t = r.DomUtil.create("img", "leaflet-tile"); return t.style.width = t.style.height = this._getTileSize() + "px", t.galleryimg = "no", t.onselectstart = t.onmousemove = r.Util.falseFn, r.Browser.ielt9 && void 0 !== this.options.opacity && r.DomUtil.setOpacity(t, this.options.opacity), r.Browser.mobileWebkit3d && (t.style.WebkitBackfaceVisibility = "hidden"), t }, _loadTile: function (t, e) { t._layer = this, t.onload = this._tileOnLoad, t.onerror = this._tileOnError, this._adjustTilePoint(e), t.src = this.getTileUrl(e), this.fire("tileloadstart", { tile: t, url: t.src }) }, _tileLoaded: function () { this._tilesToLoad--, this._animated && r.DomUtil.addClass(this._tileContainer, "leaflet-zoom-animated"), this._tilesToLoad || (this.fire("load"), this._animated && (clearTimeout(this._clearBgBufferTimer), this._clearBgBufferTimer = setTimeout(r.bind(this._clearBgBuffer, this), 500))) }, _tileOnLoad: function () { var t = this._layer; this.src !== r.Util.emptyImageUrl && (r.DomUtil.addClass(this, "leaflet-tile-loaded"), t.fire("tileload", { tile: this, url: this.src })), t._tileLoaded() }, _tileOnError: function () { var t = this._layer; t.fire("tileerror", { tile: this, url: this.src }); var e = t.options.errorTileUrl; e && (this.src = e), t._tileLoaded() } }), r.tileLayer = function (t, e) { return new r.TileLayer(t, e) }, r.TileLayer.WMS = r.TileLayer.extend({ defaultWmsParams: { service: "WMS", request: "GetMap", version: "1.1.1", layers: "", styles: "", format: "image/jpeg", transparent: !1 }, initialize: function (t, e) { this._url = t; var i = r.extend({}, this.defaultWmsParams), n = e.tileSize || this.options.tileSize; for (var o in e.detectRetina && r.Browser.retina ? i.width = i.height = 2 * n : i.width = i.height = n, e) this.options.hasOwnProperty(o) || "crs" === o || (i[o] = e[o]); this.wmsParams = i, r.setOptions(this, e) }, onAdd: function (t) { this._crs = this.options.crs || t.options.crs, this._wmsVersion = parseFloat(this.wmsParams.version); var e = this._wmsVersion >= 1.3 ? "crs" : "srs"; this.wmsParams[e] = this._crs.code, r.TileLayer.prototype.onAdd.call(this, t) }, getTileUrl: function (t) { var e = this._map, i = this.options.tileSize, n = t.multiplyBy(i), o = n.add([i, i]), s = this._crs.project(e.unproject(n, t.z)), a = this._crs.project(e.unproject(o, t.z)), l = this._wmsVersion >= 1.3 && this._crs === r.CRS.EPSG4326 ? [a.y, s.x, s.y, a.x].join(",") : [s.x, a.y, a.x, s.y].join(","), h = r.Util.template(this._url, { s: this._getSubdomain(t) }); return h + r.Util.getParamString(this.wmsParams, h, !0) + "&BBOX=" + l }, setParams: function (t, e) { return r.extend(this.wmsParams, t), e || this.redraw(), this } }), r.tileLayer.wms = function (t, e) { return new r.TileLayer.WMS(t, e) }, r.TileLayer.Canvas = r.TileLayer.extend({ options: { async: !1 }, initialize: function (t) { r.setOptions(this, t) }, redraw: function () { for (var t in this._map && (this._reset({ hard: !0 }), this._update()), this._tiles) this._redrawTile(this._tiles[t]); return this }, _redrawTile: function (t) { this.drawTile(t, t._tilePoint, this._map._zoom) }, _createTile: function () { var t = r.DomUtil.create("canvas", "leaflet-tile"); return t.width = t.height = this.options.tileSize, t.onselectstart = t.onmousemove = r.Util.falseFn, t }, _loadTile: function (t, e) { t._layer = this, t._tilePoint = e, this._redrawTile(t), this.options.async || this.tileDrawn(t) }, drawTile: function () { }, tileDrawn: function (t) { this._tileOnLoad.call(t) } }), r.tileLayer.canvas = function (t) { return new r.TileLayer.Canvas(t) }, r.ImageOverlay = r.Class.extend({ includes: r.Mixin.Events, options: { opacity: 1 }, initialize: function (t, e, i) { this._url = t, this._bounds = r.latLngBounds(e), r.setOptions(this, i) }, onAdd: function (t) { this._map = t, this._image || this._initImage(), t._panes.overlayPane.appendChild(this._image), t.on("viewreset", this._reset, this), t.options.zoomAnimation && r.Browser.any3d && t.on("zoomanim", this._animateZoom, this), this._reset() }, onRemove: function (t) { t.getPanes().overlayPane.removeChild(this._image), t.off("viewreset", this._reset, this), t.options.zoomAnimation && t.off("zoomanim", this._animateZoom, this) }, addTo: function (t) { return t.addLayer(this), this }, setOpacity: function (t) { return this.options.opacity = t, this._updateOpacity(), this }, bringToFront: function () { return this._image && this._map._panes.overlayPane.appendChild(this._image), this }, bringToBack: function () { var t = this._map._panes.overlayPane; return this._image && t.insertBefore(this._image, t.firstChild), this }, setUrl: function (t) { this._url = t, this._image.src = this._url }, getAttribution: function () { return this.options.attribution }, _initImage: function () { this._image = r.DomUtil.create("img", "leaflet-image-layer"), this._map.options.zoomAnimation && r.Browser.any3d ? r.DomUtil.addClass(this._image, "leaflet-zoom-animated") : r.DomUtil.addClass(this._image, "leaflet-zoom-hide"), this._updateOpacity(), r.extend(this._image, { galleryimg: "no", onselectstart: r.Util.falseFn, onmousemove: r.Util.falseFn, onload: r.bind(this._onImageLoad, this), src: this._url }) }, _animateZoom: function (t) { var e = this._map, i = this._image, n = e.getZoomScale(t.zoom), o = this._bounds.getNorthWest(), s = this._bounds.getSouthEast(), a = e._latLngToNewLayerPoint(o, t.zoom, t.center), l = e._latLngToNewLayerPoint(s, t.zoom, t.center)._subtract(a), h = a._add(l._multiplyBy(.5 * (1 - 1 / n))); i.style[r.DomUtil.TRANSFORM] = r.DomUtil.getTranslateString(h) + " scale(" + n + ") " }, _reset: function () { var t = this._image, e = this._map.latLngToLayerPoint(this._bounds.getNorthWest()), i = this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e); r.DomUtil.setPosition(t, e), t.style.width = i.x + "px", t.style.height = i.y + "px" }, _onImageLoad: function () { this.fire("load") }, _updateOpacity: function () { r.DomUtil.setOpacity(this._image, this.options.opacity) } }), r.imageOverlay = function (t, e, i) { return new r.ImageOverlay(t, e, i) }, r.Icon = r.Class.extend({ options: { className: "" }, initialize: function (t) { r.setOptions(this, t) }, createIcon: function (t) { return this._createIcon("icon", t) }, createShadow: function (t) { return this._createIcon("shadow", t) }, _createIcon: function (t, e) { var i, n = this._getIconUrl(t); if (!n) { if ("icon" === t) throw new Error("iconUrl not set in Icon options (see the docs)."); return null } return i = e && "IMG" === e.tagName ? this._createImg(n, e) : this._createImg(n), this._setIconStyles(i, t), i }, _setIconStyles: function (t, e) { var i, n = this.options, o = r.point(n[e + "Size"]); !(i = "shadow" === e ? r.point(n.shadowAnchor || n.iconAnchor) : r.point(n.iconAnchor)) && o && (i = o.divideBy(2, !0)), t.className = "leaflet-marker-" + e + " " + n.className, i && (t.style.marginLeft = -i.x + "px", t.style.marginTop = -i.y + "px"), o && (t.style.width = o.x + "px", t.style.height = o.y + "px") }, _createImg: function (t, e) { return (e = e || i.createElement("img")).src = t, e }, _getIconUrl: function (t) { return r.Browser.retina && this.options[t + "RetinaUrl"] ? this.options[t + "RetinaUrl"] : this.options[t + "Url"] } }), r.icon = function (t) { return new r.Icon(t) }, r.Icon.Default = r.Icon.extend({ options: { iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41] }, _getIconUrl: function (t) { var e = t + "Url"; if (this.options[e]) return this.options[e]; r.Browser.retina && "icon" === t && (t += "-2x"); var i = r.Icon.Default.imagePath; if (!i) throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually."); return i + "/marker-" + t + ".png" } }), r.Icon.Default.imagePath = function () { var t, e, n, o, s = i.getElementsByTagName("script"), a = /[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/; for (t = 0, e = s.length; t < e; t++)if ((n = s[t].src).match(a)) return ((o = n.split(a)[0]) ? o + "/" : "") + "images" }(), r.Marker = r.Class.extend({ includes: r.Mixin.Events, options: { icon: new r.Icon.Default, title: "", alt: "", clickable: !0, draggable: !1, keyboard: !0, zIndexOffset: 0, opacity: 1, riseOnHover: !1, riseOffset: 250 }, initialize: function (t, e) { r.setOptions(this, e), this._latlng = r.latLng(t) }, onAdd: function (t) { this._map = t, t.on("viewreset", this.update, this), this._initIcon(), this.update(), this.fire("add"), t.options.zoomAnimation && t.options.markerZoomAnimation && t.on("zoomanim", this._animateZoom, this) }, addTo: function (t) { return t.addLayer(this), this }, onRemove: function (t) { this.dragging && this.dragging.disable(), this._removeIcon(), this._removeShadow(), this.fire("remove"), t.off({ viewreset: this.update, zoomanim: this._animateZoom }, this), this._map = null }, getLatLng: function () { return this._latlng }, setLatLng: function (t) { return this._latlng = r.latLng(t), this.update(), this.fire("move", { latlng: this._latlng }) }, setZIndexOffset: function (t) { return this.options.zIndexOffset = t, this.update(), this }, setIcon: function (t) { return this.options.icon = t, this._map && (this._initIcon(), this.update()), this._popup && this.bindPopup(this._popup), this }, update: function () { return this._icon && this._setPos(this._map.latLngToLayerPoint(this._latlng).round()), this }, _initIcon: function () { var t = this.options, e = this._map, i = e.options.zoomAnimation && e.options.markerZoomAnimation ? "leaflet-zoom-animated" : "leaflet-zoom-hide", n = t.icon.createIcon(this._icon), o = !1; n !== this._icon && (this._icon && this._removeIcon(), o = !0, t.title && (n.title = t.title), t.alt && (n.alt = t.alt)), r.DomUtil.addClass(n, i), t.keyboard && (n.tabIndex = "0"), this._icon = n, this._initInteraction(), t.riseOnHover && r.DomEvent.on(n, "mouseover", this._bringToFront, this).on(n, "mouseout", this._resetZIndex, this); var s = t.icon.createShadow(this._shadow), a = !1; s !== this._shadow && (this._removeShadow(), a = !0), s && r.DomUtil.addClass(s, i), this._shadow = s, t.opacity < 1 && this._updateOpacity(); var l = this._map._panes; o && l.markerPane.appendChild(this._icon), s && a && l.shadowPane.appendChild(this._shadow) }, _removeIcon: function () { this.options.riseOnHover && r.DomEvent.off(this._icon, "mouseover", this._bringToFront).off(this._icon, "mouseout", this._resetZIndex), this._map._panes.markerPane.removeChild(this._icon), this._icon = null }, _removeShadow: function () { this._shadow && this._map._panes.shadowPane.removeChild(this._shadow), this._shadow = null }, _setPos: function (t) { r.DomUtil.setPosition(this._icon, t), this._shadow && r.DomUtil.setPosition(this._shadow, t), this._zIndex = t.y + this.options.zIndexOffset, this._resetZIndex() }, _updateZIndex: function (t) { this._icon.style.zIndex = this._zIndex + t }, _animateZoom: function (t) { var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center).round(); this._setPos(e) }, _initInteraction: function () { if (this.options.clickable) { var t = this._icon, e = ["dblclick", "mousedown", "mouseover", "mouseout", "contextmenu"]; r.DomUtil.addClass(t, "leaflet-clickable"), r.DomEvent.on(t, "click", this._onMouseClick, this), r.DomEvent.on(t, "keypress", this._onKeyPress, this); for (var i = 0; i < e.length; i++)r.DomEvent.on(t, e[i], this._fireMouseEvent, this); r.Handler.MarkerDrag && (this.dragging = new r.Handler.MarkerDrag(this), this.options.draggable && this.dragging.enable()) } }, _onMouseClick: function (t) { var e = this.dragging && this.dragging.moved(); (this.hasEventListeners(t.type) || e) && r.DomEvent.stopPropagation(t), e || (this.dragging && this.dragging._enabled || !this._map.dragging || !this._map.dragging.moved()) && this.fire(t.type, { originalEvent: t, latlng: this._latlng }) }, _onKeyPress: function (t) { 13 === t.keyCode && this.fire("click", { originalEvent: t, latlng: this._latlng }) }, _fireMouseEvent: function (t) { this.fire(t.type, { originalEvent: t, latlng: this._latlng }), "contextmenu" === t.type && this.hasEventListeners(t.type) && r.DomEvent.preventDefault(t), "mousedown" !== t.type ? r.DomEvent.stopPropagation(t) : r.DomEvent.preventDefault(t) }, setOpacity: function (t) { return this.options.opacity = t, this._map && this._updateOpacity(), this }, _updateOpacity: function () { r.DomUtil.setOpacity(this._icon, this.options.opacity), this._shadow && r.DomUtil.setOpacity(this._shadow, this.options.opacity) }, _bringToFront: function () { this._updateZIndex(this.options.riseOffset) }, _resetZIndex: function () { this._updateZIndex(0) } }), r.marker = function (t, e) { return new r.Marker(t, e) }, r.DivIcon = r.Icon.extend({ options: { iconSize: [12, 12], className: "leaflet-div-icon", html: !1 }, createIcon: function (t) { var e = t && "DIV" === t.tagName ? t : i.createElement("div"), n = this.options; return !1 !== n.html ? e.innerHTML = n.html : e.innerHTML = "", n.bgPos && (e.style.backgroundPosition = -n.bgPos.x + "px " + -n.bgPos.y + "px"), this._setIconStyles(e, "icon"), e }, createShadow: function () { return null } }), r.divIcon = function (t) { return new r.DivIcon(t) }, r.Map.mergeOptions({ closePopupOnClick: !0 }), r.Popup = r.Class.extend({ includes: r.Mixin.Events, options: { minWidth: 50, maxWidth: 300, autoPan: !0, closeButton: !0, offset: [0, 7], autoPanPadding: [5, 5], keepInView: !1, className: "", zoomAnimation: !0 }, initialize: function (t, e) { r.setOptions(this, t), this._source = e, this._animated = r.Browser.any3d && this.options.zoomAnimation, this._isOpen = !1 }, onAdd: function (t) { this._map = t, this._container || this._initLayout(); var e = t.options.fadeAnimation; e && r.DomUtil.setOpacity(this._container, 0), t._panes.popupPane.appendChild(this._container), t.on(this._getEvents(), this), this.update(), e && r.DomUtil.setOpacity(this._container, 1), this.fire("open"), t.fire("popupopen", { popup: this }), this._source && this._source.fire("popupopen", { popup: this }) }, addTo: function (t) { return t.addLayer(this), this }, openOn: function (t) { return t.openPopup(this), this }, onRemove: function (t) { t._panes.popupPane.removeChild(this._container), r.Util.falseFn(this._container.offsetWidth), t.off(this._getEvents(), this), t.options.fadeAnimation && r.DomUtil.setOpacity(this._container, 0), this._map = null, this.fire("close"), t.fire("popupclose", { popup: this }), this._source && this._source.fire("popupclose", { popup: this }) }, getLatLng: function () { return this._latlng }, setLatLng: function (t) { return this._latlng = r.latLng(t), this._map && (this._updatePosition(), this._adjustPan()), this }, getContent: function () { return this._content }, setContent: function (t) { return this._content = t, this.update(), this }, update: function () { this._map && (this._container.style.visibility = "hidden", this._updateContent(), this._updateLayout(), this._updatePosition(), this._container.style.visibility = "", this._adjustPan()) }, _getEvents: function () { var t = { viewreset: this._updatePosition }; return this._animated && (t.zoomanim = this._zoomAnimation), ("closeOnClick" in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) && (t.preclick = this._close), this.options.keepInView && (t.moveend = this._adjustPan), t }, _close: function () { this._map && this._map.closePopup(this) }, _initLayout: function () { var t, e = "leaflet-popup", i = e + " " + this.options.className + " leaflet-zoom-" + (this._animated ? "animated" : "hide"), n = this._container = r.DomUtil.create("div", i); this.options.closeButton && ((t = this._closeButton = r.DomUtil.create("a", e + "-close-button", n)).href = "#close", t.innerHTML = "&#215;", r.DomEvent.disableClickPropagation(t), r.DomEvent.on(t, "click", this._onCloseButtonClick, this)); var o = this._wrapper = r.DomUtil.create("div", e + "-content-wrapper", n); r.DomEvent.disableClickPropagation(o), this._contentNode = r.DomUtil.create("div", e + "-content", o), r.DomEvent.disableScrollPropagation(this._contentNode), r.DomEvent.on(o, "contextmenu", r.DomEvent.stopPropagation), this._tipContainer = r.DomUtil.create("div", e + "-tip-container", n), this._tip = r.DomUtil.create("div", e + "-tip", this._tipContainer) }, _updateContent: function () { if (this._content) { if ("string" == typeof this._content) this._contentNode.innerHTML = this._content; else { for (; this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild); this._contentNode.appendChild(this._content) } this.fire("contentupdate") } }, _updateLayout: function () { var t = this._contentNode, e = t.style; e.width = "", e.whiteSpace = "nowrap"; var i = t.offsetWidth; i = Math.min(i, this.options.maxWidth), i = Math.max(i, this.options.minWidth), e.width = i + 1 + "px", e.whiteSpace = "", e.height = ""; var n = t.offsetHeight, o = this.options.maxHeight; o && n > o ? (e.height = o + "px", r.DomUtil.addClass(t, "leaflet-popup-scrolled")) : r.DomUtil.removeClass(t, "leaflet-popup-scrolled"), this._containerWidth = this._container.offsetWidth }, _updatePosition: function () { if (this._map) { var t = this._map.latLngToLayerPoint(this._latlng), e = this._animated, i = r.point(this.options.offset); e && r.DomUtil.setPosition(this._container, t), this._containerBottom = -i.y - (e ? 0 : t.y), this._containerLeft = -Math.round(this._containerWidth / 2) + i.x + (e ? 0 : t.x), this._container.style.bottom = this._containerBottom + "px", this._container.style.left = this._containerLeft + "px" } }, _zoomAnimation: function (t) { var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center); r.DomUtil.setPosition(this._container, e) }, _adjustPan: function () { if (this.options.autoPan) { var t = this._map, e = this._container.offsetHeight, i = this._containerWidth, n = new r.Point(this._containerLeft, -e - this._containerBottom); this._animated && n._add(r.DomUtil.getPosition(this._container)); var o = t.layerPointToContainerPoint(n), s = r.point(this.options.autoPanPadding), a = r.point(this.options.autoPanPaddingTopLeft || s), l = r.point(this.options.autoPanPaddingBottomRight || s), h = t.getSize(), u = 0, c = 0; o.x + i + l.x > h.x && (u = o.x + i - h.x + l.x), o.x - u - a.x < 0 && (u = o.x - a.x), o.y + e + l.y > h.y && (c = o.y + e - h.y + l.y), o.y - c - a.y < 0 && (c = o.y - a.y), (u || c) && t.fire("autopanstart").panBy([u, c]) } }, _onCloseButtonClick: function (t) { this._close(), r.DomEvent.stop(t) } }), r.popup = function (t, e) { return new r.Popup(t, e) }, r.Map.include({ openPopup: function (t, e, i) { if (this.closePopup(), !(t instanceof r.Popup)) { var n = t; t = new r.Popup(i).setLatLng(e).setContent(n) } return t._isOpen = !0, this._popup = t, this.addLayer(t) }, closePopup: function (t) { return t && t !== this._popup || (t = this._popup, this._popup = null), t && (this.removeLayer(t), t._isOpen = !1), this } }), r.Marker.include({ openPopup: function () { return this._popup && this._map && !this._map.hasLayer(this._popup) && (this._popup.setLatLng(this._latlng), this._map.openPopup(this._popup)), this }, closePopup: function () { return this._popup && this._popup._close(), this }, togglePopup: function () { return this._popup && (this._popup._isOpen ? this.closePopup() : this.openPopup()), this }, bindPopup: function (t, e) { var i = r.point(this.options.icon.options.popupAnchor || [0, 0]); return i = i.add(r.Popup.prototype.options.offset), e && e.offset && (i = i.add(e.offset)), e = r.extend({ offset: i }, e), this._popupHandlersAdded || (this.on("click", this.togglePopup, this).on("remove", this.closePopup, this).on("move", this._movePopup, this), this._popupHandlersAdded = !0), t instanceof r.Popup ? (r.setOptions(t, e), this._popup = t, t._source = this) : this._popup = new r.Popup(e, this).setContent(t), this }, setPopupContent: function (t) { return this._popup && this._popup.setContent(t), this }, unbindPopup: function () { return this._popup && (this._popup = null, this.off("click", this.togglePopup, this).off("remove", this.closePopup, this).off("move", this._movePopup, this), this._popupHandlersAdded = !1), this }, getPopup: function () { return this._popup }, _movePopup: function (t) { this._popup.setLatLng(t.latlng) } }), r.LayerGroup = r.Class.extend({ initialize: function (t) { var e, i; if (this._layers = {}, t) for (e = 0, i = t.length; e < i; e++)this.addLayer(t[e]) }, addLayer: function (t) { var e = this.getLayerId(t); return this._layers[e] = t, this._map && this._map.addLayer(t), this }, removeLayer: function (t) { var e = t in this._layers ? t : this.getLayerId(t); return this._map && this._layers[e] && this._map.removeLayer(this._layers[e]), delete this._layers[e], this }, hasLayer: function (t) { return !!t && (t in this._layers || this.getLayerId(t) in this._layers) }, clearLayers: function () { return this.eachLayer(this.removeLayer, this), this }, invoke: function (t) { var e, i, n = Array.prototype.slice.call(arguments, 1); for (e in this._layers) (i = this._layers[e])[t] && i[t].apply(i, n); return this }, onAdd: function (t) { this._map = t, this.eachLayer(t.addLayer, t) }, onRemove: function (t) { this.eachLayer(t.removeLayer, t), this._map = null }, addTo: function (t) { return t.addLayer(this), this }, eachLayer: function (t, e) { for (var i in this._layers) t.call(e, this._layers[i]); return this }, getLayer: function (t) { return this._layers[t] }, getLayers: function () { var t = []; for (var e in this._layers) t.push(this._layers[e]); return t }, setZIndex: function (t) { return this.invoke("setZIndex", t) }, getLayerId: function (t) { return r.stamp(t) } }), r.layerGroup = function (t) { return new r.LayerGroup(t) }, r.FeatureGroup = r.LayerGroup.extend({ includes: r.Mixin.Events, statics: { EVENTS: "click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose" }, addLayer: function (t) { return this.hasLayer(t) ? this : ("on" in t && t.on(r.FeatureGroup.EVENTS, this._propagateEvent, this), r.LayerGroup.prototype.addLayer.call(this, t), this._popupContent && t.bindPopup && t.bindPopup(this._popupContent, this._popupOptions), this.fire("layeradd", { layer: t })) }, removeLayer: function (t) { return this.hasLayer(t) ? (t in this._layers && (t = this._layers[t]), "off" in t && t.off(r.FeatureGroup.EVENTS, this._propagateEvent, this), r.LayerGroup.prototype.removeLayer.call(this, t), this._popupContent && this.invoke("unbindPopup"), this.fire("layerremove", { layer: t })) : this }, bindPopup: function (t, e) { return this._popupContent = t, this._popupOptions = e, this.invoke("bindPopup", t, e) }, openPopup: function (t) { for (var e in this._layers) { this._layers[e].openPopup(t); break } return this }, setStyle: function (t) { return this.invoke("setStyle", t) }, bringToFront: function () { return this.invoke("bringToFront") }, bringToBack: function () { return this.invoke("bringToBack") }, getBounds: function () { var t = new r.LatLngBounds; return this.eachLayer(function (e) { t.extend(e instanceof r.Marker ? e.getLatLng() : e.getBounds()) }), t }, _propagateEvent: function (t) { t = r.extend({ layer: t.target, target: this }, t), this.fire(t.type, t) } }), r.featureGroup = function (t) { return new r.FeatureGroup(t) }, r.Path = r.Class.extend({ includes: [r.Mixin.Events], statics: { CLIP_PADDING: (S = ((r.Browser.mobile ? 1280 : 2e3) / Math.max(e.outerWidth, e.outerHeight) - 1) / 2, Math.max(0, Math.min(.5, S))) }, options: { stroke: !0, color: "#0033ff", dashArray: null, lineCap: null, lineJoin: null, weight: 5, opacity: .5, fill: !1, fillColor: null, fillOpacity: .2, clickable: !0 }, initialize: function (t) { r.setOptions(this, t) }, onAdd: function (t) { this._map = t, this._container || (this._initElements(), this._initEvents()), this.projectLatlngs(), this._updatePath(), this._container && this._map._pathRoot.appendChild(this._container), this.fire("add"), t.on({ viewreset: this.projectLatlngs, moveend: this._updatePath }, this) }, addTo: function (t) { return t.addLayer(this), this }, onRemove: function (t) { t._pathRoot.removeChild(this._container), this.fire("remove"), this._map = null, r.Browser.vml && (this._container = null, this._stroke = null, this._fill = null), t.off({ viewreset: this.projectLatlngs, moveend: this._updatePath }, this) }, projectLatlngs: function () { }, setStyle: function (t) { return r.setOptions(this, t), this._container && this._updateStyle(), this }, redraw: function () { return this._map && (this.projectLatlngs(), this._updatePath()), this } }), r.Map.include({ _updatePathViewport: function () { var t = r.Path.CLIP_PADDING, e = this.getSize(), i = r.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(e.multiplyBy(t)._round()), n = i.add(e.multiplyBy(1 + 2 * t)._round()); this._pathViewport = new r.Bounds(i, n) } }), r.Path.SVG_NS = "http://www.w3.org/2000/svg", r.Browser.svg = !(!i.createElementNS || !i.createElementNS(r.Path.SVG_NS, "svg").createSVGRect), r.Path = r.Path.extend({ statics: { SVG: r.Browser.svg }, bringToFront: function () { var t = this._map._pathRoot, e = this._container; return e && t.lastChild !== e && t.appendChild(e), this }, bringToBack: function () { var t = this._map._pathRoot, e = this._container, i = t.firstChild; return e && i !== e && t.insertBefore(e, i), this }, getPathString: function () { }, _createElement: function (t) { return i.createElementNS(r.Path.SVG_NS, t) }, _initElements: function () { this._map._initPathRoot(), this._initPath(), this._initStyle() }, _initPath: function () { this._container = this._createElement("g"), this._path = this._createElement("path"), this.options.className && r.DomUtil.addClass(this._path, this.options.className), this._container.appendChild(this._path) }, _initStyle: function () { this.options.stroke && (this._path.setAttribute("stroke-linejoin", "round"), this._path.setAttribute("stroke-linecap", "round")), this.options.fill && this._path.setAttribute("fill-rule", "evenodd"), this.options.pointerEvents && this._path.setAttribute("pointer-events", this.options.pointerEvents), this.options.clickable || this.options.pointerEvents || this._path.setAttribute("pointer-events", "none"), this._updateStyle() }, _updateStyle: function () { this.options.stroke ? (this._path.setAttribute("stroke", this.options.color), this._path.setAttribute("stroke-opacity", this.options.opacity), this._path.setAttribute("stroke-width", this.options.weight), this.options.dashArray ? this._path.setAttribute("stroke-dasharray", this.options.dashArray) : this._path.removeAttribute("stroke-dasharray"), this.options.lineCap && this._path.setAttribute("stroke-linecap", this.options.lineCap), this.options.lineJoin && this._path.setAttribute("stroke-linejoin", this.options.lineJoin)) : this._path.setAttribute("stroke", "none"), this.options.fill ? (this._path.setAttribute("fill", this.options.fillColor || this.options.color), this._path.setAttribute("fill-opacity", this.options.fillOpacity)) : this._path.setAttribute("fill", "none") }, _updatePath: function () { var t = this.getPathString(); t || (t = "M0 0"), this._path.setAttribute("d", t) }, _initEvents: function () { if (this.options.clickable) { !r.Browser.svg && r.Browser.vml || r.DomUtil.addClass(this._path, "leaflet-clickable"), r.DomEvent.on(this._container, "click", this._onMouseClick, this); for (var t = ["dblclick", "mousedown", "mouseover", "mouseout", "mousemove", "contextmenu"], e = 0; e < t.length; e++)r.DomEvent.on(this._container, t[e], this._fireMouseEvent, this) } }, _onMouseClick: function (t) { this._map.dragging && this._map.dragging.moved() || this._fireMouseEvent(t) }, _fireMouseEvent: function (t) { if (this._map && this.hasEventListeners(t.type)) { var e = this._map, i = e.mouseEventToContainerPoint(t), n = e.containerPointToLayerPoint(i), o = e.layerPointToLatLng(n); this.fire(t.type, { latlng: o, layerPoint: n, containerPoint: i, originalEvent: t }), "contextmenu" === t.type && r.DomEvent.preventDefault(t), "mousemove" !== t.type && r.DomEvent.stopPropagation(t) } } }), r.Map.include({ _initPathRoot: function () { this._pathRoot || (this._pathRoot = r.Path.prototype._createElement("svg"), this._panes.overlayPane.appendChild(this._pathRoot), this.options.zoomAnimation && r.Browser.any3d ? (r.DomUtil.addClass(this._pathRoot, "leaflet-zoom-animated"), this.on({ zoomanim: this._animatePathZoom, zoomend: this._endPathZoom })) : r.DomUtil.addClass(this._pathRoot, "leaflet-zoom-hide"), this.on("moveend", this._updateSvgViewport), this._updateSvgViewport()) }, _animatePathZoom: function (t) { var e = this.getZoomScale(t.zoom), i = this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min); this._pathRoot.style[r.DomUtil.TRANSFORM] = r.DomUtil.getTranslateString(i) + " scale(" + e + ") ", this._pathZooming = !0 }, _endPathZoom: function () { this._pathZooming = !1 }, _updateSvgViewport: function () { if (!this._pathZooming) { this._updatePathViewport(); var t = this._pathViewport, e = t.min, i = t.max, n = i.x - e.x, o = i.y - e.y, s = this._pathRoot, a = this._panes.overlayPane; r.Browser.mobileWebkit && a.removeChild(s), r.DomUtil.setPosition(s, e), s.setAttribute("width", n), s.setAttribute("height", o), s.setAttribute("viewBox", [e.x, e.y, n, o].join(" ")), r.Browser.mobileWebkit && a.appendChild(s) } } }), r.Path.include({ bindPopup: function (t, e) { return t instanceof r.Popup ? this._popup = t : (this._popup && !e || (this._popup = new r.Popup(e, this)), this._popup.setContent(t)), this._popupHandlersAdded || (this.on("click", this._openPopup, this).on("remove", this.closePopup, this), this._popupHandlersAdded = !0), this }, unbindPopup: function () { return this._popup && (this._popup = null, this.off("click", this._openPopup).off("remove", this.closePopup), this._popupHandlersAdded = !1), this }, openPopup: function (t) { return this._popup && (t = t || this._latlng || this._latlngs[Math.floor(this._latlngs.length / 2)], this._openPopup({ latlng: t })), this }, closePopup: function () { return this._popup && this._popup._close(), this }, _openPopup: function (t) { this._popup.setLatLng(t.latlng), this._map.openPopup(this._popup) } }), r.Browser.vml = !r.Browser.svg && function () { try { var t = i.createElement("div"); t.innerHTML = '<v:shape adj="1"/>'; var e = t.firstChild; return e.style.behavior = "url(#default#VML)", e && "object" == typeof e.adj } catch (t) { return !1 } }(), r.Path = r.Browser.svg || !r.Browser.vml ? r.Path : r.Path.extend({ statics: { VML: !0, CLIP_PADDING: .02 }, _createElement: function () { try { return i.namespaces.add("lvml", "urn:schemas-microsoft-com:vml"), function (t) { return i.createElement("<lvml:" + t + ' class="lvml">') } } catch (t) { return function (t) { return i.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">') } } }(), _initPath: function () { var t = this._container = this._createElement("shape"); r.DomUtil.addClass(t, "leaflet-vml-shape" + (this.options.className ? " " + this.options.className : "")), this.options.clickable && r.DomUtil.addClass(t, "leaflet-clickable"), t.coordsize = "1 1", this._path = this._createElement("path"), t.appendChild(this._path), this._map._pathRoot.appendChild(t) }, _initStyle: function () { this._updateStyle() }, _updateStyle: function () { var t = this._stroke, e = this._fill, i = this.options, n = this._container; n.stroked = i.stroke, n.filled = i.fill, i.stroke ? (t || ((t = this._stroke = this._createElement("stroke")).endcap = "round", n.appendChild(t)), t.weight = i.weight + "px", t.color = i.color, t.opacity = i.opacity, i.dashArray ? t.dashStyle = r.Util.isArray(i.dashArray) ? i.dashArray.join(" ") : i.dashArray.replace(/( *, *)/g, " ") : t.dashStyle = "", i.lineCap && (t.endcap = i.lineCap.replace("butt", "flat")), i.lineJoin && (t.joinstyle = i.lineJoin)) : t && (n.removeChild(t), this._stroke = null), i.fill ? (e || (e = this._fill = this._createElement("fill"), n.appendChild(e)), e.color = i.fillColor || i.color, e.opacity = i.fillOpacity) : e && (n.removeChild(e), this._fill = null) }, _updatePath: function () { var t = this._container.style; t.display = "none", this._path.v = this.getPathString() + " ", t.display = "" } }), r.Map.include(r.Browser.svg || !r.Browser.vml ? {} : { _initPathRoot: function () { if (!this._pathRoot) { var t = this._pathRoot = i.createElement("div"); t.className = "leaflet-vml-container", this._panes.overlayPane.appendChild(t), this.on("moveend", this._updatePathViewport), this._updatePathViewport() } } }), r.Browser.canvas = !!i.createElement("canvas").getContext, r.Path = r.Path.SVG && !e.L_PREFER_CANVAS || !r.Browser.canvas ? r.Path : r.Path.extend({ statics: { CANVAS: !0, SVG: !1 }, redraw: function () { return this._map && (this.projectLatlngs(), this._requestUpdate()), this }, setStyle: function (t) { return r.setOptions(this, t), this._map && (this._updateStyle(), this._requestUpdate()), this }, onRemove: function (t) { t.off("viewreset", this.projectLatlngs, this).off("moveend", this._updatePath, this), this.options.clickable && (this._map.off("click", this._onClick, this), this._map.off("mousemove", this._onMouseMove, this)), this._requestUpdate(), this.fire("remove"), this._map = null }, _requestUpdate: function () { this._map && !r.Path._updateRequest && (r.Path._updateRequest = r.Util.requestAnimFrame(this._fireMapMoveEnd, this._map)) }, _fireMapMoveEnd: function () { r.Path._updateRequest = null, this.fire("moveend") }, _initElements: function () { this._map._initPathRoot(), this._ctx = this._map._canvasCtx }, _updateStyle: function () { var t = this.options; t.stroke && (this._ctx.lineWidth = t.weight, this._ctx.strokeStyle = t.color), t.fill && (this._ctx.fillStyle = t.fillColor || t.color), t.lineCap && (this._ctx.lineCap = t.lineCap), t.lineJoin && (this._ctx.lineJoin = t.lineJoin) }, _drawPath: function () { var t, e, i, n, o, s; for (this._ctx.beginPath(), t = 0, i = this._parts.length; t < i; t++) { for (e = 0, n = this._parts[t].length; e < n; e++)o = this._parts[t][e], s = (0 === e ? "move" : "line") + "To", this._ctx[s](o.x, o.y); this instanceof r.Polygon && this._ctx.closePath() } }, _checkIfEmpty: function () { return !this._parts.length }, _updatePath: function () { if (!this._checkIfEmpty()) { var t = this._ctx, e = this.options; this._drawPath(), t.save(), this._updateStyle(), e.fill && (t.globalAlpha = e.fillOpacity, t.fill(e.fillRule || "evenodd")), e.stroke && (t.globalAlpha = e.opacity, t.stroke()), t.restore() } }, _initEvents: function () { this.options.clickable && (this._map.on("mousemove", this._onMouseMove, this), this._map.on("click dblclick contextmenu", this._fireMouseEvent, this)) }, _fireMouseEvent: function (t) { this._containsPoint(t.layerPoint) && this.fire(t.type, t) }, _onMouseMove: function (t) { this._map && !this._map._animatingZoom && (this._containsPoint(t.layerPoint) ? (this._ctx.canvas.style.cursor = "pointer", this._mouseInside = !0, this.fire("mouseover", t)) : this._mouseInside && (this._ctx.canvas.style.cursor = "", this._mouseInside = !1, this.fire("mouseout", t))) } }), r.Map.include(r.Path.SVG && !e.L_PREFER_CANVAS || !r.Browser.canvas ? {} : { _initPathRoot: function () { var t, e = this._pathRoot; e || ((e = this._pathRoot = i.createElement("canvas")).style.position = "absolute", (t = this._canvasCtx = e.getContext("2d")).lineCap = "round", t.lineJoin = "round", this._panes.overlayPane.appendChild(e), this.options.zoomAnimation && (this._pathRoot.className = "leaflet-zoom-animated", this.on("zoomanim", this._animatePathZoom), this.on("zoomend", this._endPathZoom)), this.on("moveend", this._updateCanvasViewport), this._updateCanvasViewport()) }, _updateCanvasViewport: function () { if (!this._pathZooming) { this._updatePathViewport(); var t = this._pathViewport, e = t.min, i = t.max.subtract(e), n = this._pathRoot; r.DomUtil.setPosition(n, e), n.width = i.x, n.height = i.y, n.getContext("2d").translate(-e.x, -e.y) } } }), r.LineUtil = { simplify: function (t, e) { if (!e || !t.length) return t.slice(); var i = e * e; return t = this._reducePoints(t, i), t = this._simplifyDP(t, i) }, pointToSegmentDistance: function (t, e, i) { return Math.sqrt(this._sqClosestPointOnSegment(t, e, i, !0)) }, closestPointOnSegment: function (t, e, i) { return this._sqClosestPointOnSegment(t, e, i) }, _simplifyDP: function (t, e) { var i = t.length, n = new (typeof Uint8Array != void 0 + "" ? Uint8Array : Array)(i); n[0] = n[i - 1] = 1, this._simplifyDPStep(t, n, e, 0, i - 1); var o, s = []; for (o = 0; o < i; o++)n[o] && s.push(t[o]); return s }, _simplifyDPStep: function (t, e, i, n, o) { var s, a, r, l = 0; for (a = n + 1; a <= o - 1; a++)(r = this._sqClosestPointOnSegment(t[a], t[n], t[o], !0)) > l && (s = a, l = r); l > i && (e[s] = 1, this._simplifyDPStep(t, e, i, n, s), this._simplifyDPStep(t, e, i, s, o)) }, _reducePoints: function (t, e) { for (var i = [t[0]], n = 1, o = 0, s = t.length; n < s; n++)this._sqDist(t[n], t[o]) > e && (i.push(t[n]), o = n); return o < s - 1 && i.push(t[s - 1]), i }, clipSegment: function (t, e, i, n) { var o, s, a, r = n ? this._lastCode : this._getBitCode(t, i), l = this._getBitCode(e, i); for (this._lastCode = l; ;) { if (!(r | l)) return [t, e]; if (r & l) return !1; o = r || l, s = this._getEdgeIntersection(t, e, o, i), a = this._getBitCode(s, i), o === r ? (t = s, r = a) : (e = s, l = a) } }, _getEdgeIntersection: function (t, e, i, n) { var o = e.x - t.x, s = e.y - t.y, a = n.min, l = n.max; return 8 & i ? new r.Point(t.x + o * (l.y - t.y) / s, l.y) : 4 & i ? new r.Point(t.x + o * (a.y - t.y) / s, a.y) : 2 & i ? new r.Point(l.x, t.y + s * (l.x - t.x) / o) : 1 & i ? new r.Point(a.x, t.y + s * (a.x - t.x) / o) : void 0 }, _getBitCode: function (t, e) { var i = 0; return t.x < e.min.x ? i |= 1 : t.x > e.max.x && (i |= 2), t.y < e.min.y ? i |= 4 : t.y > e.max.y && (i |= 8), i }, _sqDist: function (t, e) { var i = e.x - t.x, n = e.y - t.y; return i * i + n * n }, _sqClosestPointOnSegment: function (t, e, i, n) { var o, s = e.x, a = e.y, l = i.x - s, h = i.y - a, u = l * l + h * h; return u > 0 && ((o = ((t.x - s) * l + (t.y - a) * h) / u) > 1 ? (s = i.x, a = i.y) : o > 0 && (s += l * o, a += h * o)), l = t.x - s, h = t.y - a, n ? l * l + h * h : new r.Point(s, a) } }, r.Polyline = r.Path.extend({ initialize: function (t, e) { r.Path.prototype.initialize.call(this, e), this._latlngs = this._convertLatLngs(t) }, options: { smoothFactor: 1, noClip: !1 }, projectLatlngs: function () { this._originalPoints = []; for (var t = 0, e = this._latlngs.length; t < e; t++)this._originalPoints[t] = this._map.latLngToLayerPoint(this._latlngs[t]) }, getPathString: function () { for (var t = 0, e = this._parts.length, i = ""; t < e; t++)i += this._getPathPartStr(this._parts[t]); return i }, getLatLngs: function () { return this._latlngs }, setLatLngs: function (t) { return this._latlngs = this._convertLatLngs(t), this.redraw() }, addLatLng: function (t) { return this._latlngs.push(r.latLng(t)), this.redraw() }, spliceLatLngs: function () { var t = [].splice.apply(this._latlngs, arguments); return this._convertLatLngs(this._latlngs, !0), this.redraw(), t }, closestLayerPoint: function (t) { for (var e, i, n = 1 / 0, o = this._parts, s = null, a = 0, l = o.length; a < l; a++)for (var h = o[a], u = 1, c = h.length; u < c; u++) { e = h[u - 1], i = h[u]; var p = r.LineUtil._sqClosestPointOnSegment(t, e, i, !0); p < n && (n = p, s = r.LineUtil._sqClosestPointOnSegment(t, e, i)) } return s && (s.distance = Math.sqrt(n)), s }, getBounds: function () { return new r.LatLngBounds(this.getLatLngs()) }, _convertLatLngs: function (t, e) { var i, n, o = e ? t : []; for (i = 0, n = t.length; i < n; i++) { if (r.Util.isArray(t[i]) && "number" != typeof t[i][0]) return; o[i] = r.latLng(t[i]) } return o }, _initEvents: function () { r.Path.prototype._initEvents.call(this) }, _getPathPartStr: function (t) { for (var e, i = r.Path.VML, n = 0, o = t.length, s = ""; n < o; n++)e = t[n], i && e._round(), s += (n ? "L" : "M") + e.x + " " + e.y; return s }, _clipPoints: function () { var t, e, i, n = this._originalPoints, o = n.length; if (this.options.noClip) this._parts = [n]; else { this._parts = []; var s = this._parts, a = this._map._pathViewport, l = r.LineUtil; for (t = 0, e = 0; t < o - 1; t++)(i = l.clipSegment(n[t], n[t + 1], a, t)) && (s[e] = s[e] || [], s[e].push(i[0]), i[1] === n[t + 1] && t !== o - 2 || (s[e].push(i[1]), e++)) } }, _simplifyPoints: function () { for (var t = this._parts, e = r.LineUtil, i = 0, n = t.length; i < n; i++)t[i] = e.simplify(t[i], this.options.smoothFactor) }, _updatePath: function () { this._map && (this._clipPoints(), this._simplifyPoints(), r.Path.prototype._updatePath.call(this)) } }), r.polyline = function (t, e) { return new r.Polyline(t, e) }, r.PolyUtil = {}, r.PolyUtil.clipPolygon = function (t, e) { var i, n, o, s, a, l, h, u, c, p = [1, 4, 2, 8], d = r.LineUtil; for (n = 0, h = t.length; n < h; n++)t[n]._code = d._getBitCode(t[n], e); for (s = 0; s < 4; s++) { for (u = p[s], i = [], n = 0, o = (h = t.length) - 1; n < h; o = n++)a = t[n], l = t[o], a._code & u ? l._code & u || ((c = d._getEdgeIntersection(l, a, u, e))._code = d._getBitCode(c, e), i.push(c)) : (l._code & u && ((c = d._getEdgeIntersection(l, a, u, e))._code = d._getBitCode(c, e), i.push(c)), i.push(a)); t = i } return t }, r.Polygon = r.Polyline.extend({ options: { fill: !0 }, initialize: function (t, e) { r.Polyline.prototype.initialize.call(this, t, e), this._initWithHoles(t) }, _initWithHoles: function (t) { var e, i, n; if (t && r.Util.isArray(t[0]) && "number" != typeof t[0][0]) for (this._latlngs = this._convertLatLngs(t[0]), this._holes = t.slice(1), e = 0, i = this._holes.length; e < i; e++)(n = this._holes[e] = this._convertLatLngs(this._holes[e]))[0].equals(n[n.length - 1]) && n.pop(); (t = this._latlngs).length >= 2 && t[0].equals(t[t.length - 1]) && t.pop() }, projectLatlngs: function () { var t, e, i, n; if (r.Polyline.prototype.projectLatlngs.call(this), this._holePoints = [], this._holes) for (t = 0, i = this._holes.length; t < i; t++)for (this._holePoints[t] = [], e = 0, n = this._holes[t].length; e < n; e++)this._holePoints[t][e] = this._map.latLngToLayerPoint(this._holes[t][e]) }, setLatLngs: function (t) { return t && r.Util.isArray(t[0]) && "number" != typeof t[0][0] ? (this._initWithHoles(t), this.redraw()) : r.Polyline.prototype.setLatLngs.call(this, t) }, _clipPoints: function () { var t = this._originalPoints, e = []; if (this._parts = [t].concat(this._holePoints), !this.options.noClip) { for (var i = 0, n = this._parts.length; i < n; i++) { var o = r.PolyUtil.clipPolygon(this._parts[i], this._map._pathViewport); o.length && e.push(o) } this._parts = e } }, _getPathPartStr: function (t) { return r.Polyline.prototype._getPathPartStr.call(this, t) + (r.Browser.svg ? "z" : "x") } }), r.polygon = function (t, e) { return new r.Polygon(t, e) }, function () { function t(t) { return r.FeatureGroup.extend({ initialize: function (t, e) { this._layers = {}, this._options = e, this.setLatLngs(t) }, setLatLngs: function (e) { var i = 0, n = e.length; for (this.eachLayer(function (t) { i < n ? t.setLatLngs(e[i++]) : this.removeLayer(t) }, this); i < n;)this.addLayer(new t(e[i++], this._options)); return this }, getLatLngs: function () { var t = []; return this.eachLayer(function (e) { t.push(e.getLatLngs()) }), t } }) } r.MultiPolyline = t(r.Polyline), r.MultiPolygon = t(r.Polygon), r.multiPolyline = function (t, e) { return new r.MultiPolyline(t, e) }, r.multiPolygon = function (t, e) { return new r.MultiPolygon(t, e) } }(), r.Rectangle = r.Polygon.extend({ initialize: function (t, e) { r.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(t), e) }, setBounds: function (t) { this.setLatLngs(this._boundsToLatLngs(t)) }, _boundsToLatLngs: function (t) { return [(t = r.latLngBounds(t)).getSouthWest(), t.getNorthWest(), t.getNorthEast(), t.getSouthEast()] } }), r.rectangle = function (t, e) { return new r.Rectangle(t, e) }, r.Circle = r.Path.extend({ initialize: function (t, e, i) { r.Path.prototype.initialize.call(this, i), this._latlng = r.latLng(t), this._mRadius = e }, options: { fill: !0 }, setLatLng: function (t) { return this._latlng = r.latLng(t), this.redraw() }, setRadius: function (t) { return this._mRadius = t, this.redraw() }, projectLatlngs: function () { var t = this._getLngRadius(), e = this._latlng, i = this._map.latLngToLayerPoint([e.lat, e.lng - t]); this._point = this._map.latLngToLayerPoint(e), this._radius = Math.max(this._point.x - i.x, 1) }, getBounds: function () { var t = this._getLngRadius(), e = this._mRadius / 40075017 * 360, i = this._latlng; return new r.LatLngBounds([i.lat - e, i.lng - t], [i.lat + e, i.lng + t]) }, getLatLng: function () { return this._latlng }, getPathString: function () { var t = this._point, e = this._radius; return this._checkIfEmpty() ? "" : r.Browser.svg ? "M" + t.x + "," + (t.y - e) + "A" + e + "," + e + ",0,1,1," + (t.x - .1) + "," + (t.y - e) + " z" : (t._round(), e = Math.round(e), "AL " + t.x + "," + t.y + " " + e + "," + e + " 0,23592600") }, getRadius: function () { return this._mRadius }, _getLatRadius: function () { return this._mRadius / 40075017 * 360 }, _getLngRadius: function () { return this._getLatRadius() / Math.cos(r.LatLng.DEG_TO_RAD * this._latlng.lat) }, _checkIfEmpty: function () { if (!this._map) return !1; var t = this._map._pathViewport, e = this._radius, i = this._point; return i.x - e > t.max.x || i.y - e > t.max.y || i.x + e < t.min.x || i.y + e < t.min.y } }), r.circle = function (t, e, i) { return new r.Circle(t, e, i) }, r.CircleMarker = r.Circle.extend({ options: { radius: 10, weight: 2 }, initialize: function (t, e) { r.Circle.prototype.initialize.call(this, t, null, e), this._radius = this.options.radius }, projectLatlngs: function () { this._point = this._map.latLngToLayerPoint(this._latlng) }, _updateStyle: function () { r.Circle.prototype._updateStyle.call(this), this.setRadius(this.options.radius) }, setLatLng: function (t) { return r.Circle.prototype.setLatLng.call(this, t), this._popup && this._popup._isOpen && this._popup.setLatLng(t), this }, setRadius: function (t) { return this.options.radius = this._radius = t, this.redraw() }, getRadius: function () { return this._radius } }), r.circleMarker = function (t, e) { return new r.CircleMarker(t, e) }, r.Polyline.include(r.Path.CANVAS ? { _containsPoint: function (t, e) { var i, n, o, s, a, l, h = this.options.weight / 2; for (r.Browser.touch && (h += 10), i = 0, s = this._parts.length; i < s; i++)for (n = 0, o = (a = (l = this._parts[i]).length) - 1; n < a; o = n++)if ((e || 0 !== n) && r.LineUtil.pointToSegmentDistance(t, l[o], l[n]) <= h) return !0; return !1 } } : {}), r.Polygon.include(r.Path.CANVAS ? { _containsPoint: function (t) { var e, i, n, o, s, a, l, h, u = !1; if (r.Polyline.prototype._containsPoint.call(this, t, !0)) return !0; for (o = 0, l = this._parts.length; o < l; o++)for (s = 0, a = (h = (e = this._parts[o]).length) - 1; s < h; a = s++)i = e[s], n = e[a], i.y > t.y != n.y > t.y && t.x < (n.x - i.x) * (t.y - i.y) / (n.y - i.y) + i.x && (u = !u); return u } } : {}), r.Circle.include(r.Path.CANVAS ? { _drawPath: function () { var t = this._point; this._ctx.beginPath(), this._ctx.arc(t.x, t.y, this._radius, 0, 2 * Math.PI, !1) }, _containsPoint: function (t) { var e = this._point, i = this.options.stroke ? this.options.weight / 2 : 0; return t.distanceTo(e) <= this._radius + i } } : {}), r.CircleMarker.include(r.Path.CANVAS ? { _updateStyle: function () { r.Path.prototype._updateStyle.call(this) } } : {}), r.GeoJSON = r.FeatureGroup.extend({ initialize: function (t, e) { r.setOptions(this, e), this._layers = {}, t && this.addData(t) }, addData: function (t) { var e, i, n, o = r.Util.isArray(t) ? t : t.features; if (o) { for (e = 0, i = o.length; e < i; e++)((n = o[e]).geometries || n.geometry || n.features || n.coordinates) && this.addData(o[e]); return this } var s = this.options; if (!s.filter || s.filter(t)) { var a = r.GeoJSON.geometryToLayer(t, s.pointToLayer, s.coordsToLatLng, s); return a.feature = r.GeoJSON.asFeature(t), a.defaultOptions = a.options, this.resetStyle(a), s.onEachFeature && s.onEachFeature(t, a), this.addLayer(a) } }, resetStyle: function (t) { var e = this.options.style; e && (r.Util.extend(t.options, t.defaultOptions), this._setLayerStyle(t, e)) }, setStyle: function (t) { this.eachLayer(function (e) { this._setLayerStyle(e, t) }, this) }, _setLayerStyle: function (t, e) { "function" == typeof e && (e = e(t.feature)), t.setStyle && t.setStyle(e) } }), r.extend(r.GeoJSON, { geometryToLayer: function (t, e, i, n) { var o, s, a, l, h = "Feature" === t.type ? t.geometry : t, u = h.coordinates, c = []; switch (i = i || this.coordsToLatLng, h.type) { case "Point": return o = i(u), e ? e(t, o) : new r.Marker(o); case "MultiPoint": for (a = 0, l = u.length; a < l; a++)o = i(u[a]), c.push(e ? e(t, o) : new r.Marker(o)); return new r.FeatureGroup(c); case "LineString": return s = this.coordsToLatLngs(u, 0, i), new r.Polyline(s, n); case "Polygon": if (2 === u.length && !u[1].length) throw new Error("Invalid GeoJSON object."); return s = this.coordsToLatLngs(u, 1, i), new r.Polygon(s, n); case "MultiLineString": return s = this.coordsToLatLngs(u, 1, i), new r.MultiPolyline(s, n); case "MultiPolygon": return s = this.coordsToLatLngs(u, 2, i), new r.MultiPolygon(s, n); case "GeometryCollection": for (a = 0, l = h.geometries.length; a < l; a++)c.push(this.geometryToLayer({ geometry: h.geometries[a], type: "Feature", properties: t.properties }, e, i, n)); return new r.FeatureGroup(c); default: throw new Error("Invalid GeoJSON object.") } }, coordsToLatLng: function (t) { return new r.LatLng(t[1], t[0], t[2]) }, coordsToLatLngs: function (t, e, i) { var n, o, s, a = []; for (o = 0, s = t.length; o < s; o++)n = e ? this.coordsToLatLngs(t[o], e - 1, i) : (i || this.coordsToLatLng)(t[o]), a.push(n); return a }, latLngToCoords: function (t) { var e = [t.lng, t.lat]; return void 0 !== t.alt && e.push(t.alt), e }, latLngsToCoords: function (t) { for (var e = [], i = 0, n = t.length; i < n; i++)e.push(r.GeoJSON.latLngToCoords(t[i])); return e }, getFeature: function (t, e) { return t.feature ? r.extend({}, t.feature, { geometry: e }) : r.GeoJSON.asFeature(e) }, asFeature: function (t) { return "Feature" === t.type ? t : { type: "Feature", properties: {}, geometry: t } } }); var A = { toGeoJSON: function () { return r.GeoJSON.getFeature(this, { type: "Point", coordinates: r.GeoJSON.latLngToCoords(this.getLatLng()) }) } }; r.Marker.include(A), r.Circle.include(A), r.CircleMarker.include(A), r.Polyline.include({ toGeoJSON: function () { return r.GeoJSON.getFeature(this, { type: "LineString", coordinates: r.GeoJSON.latLngsToCoords(this.getLatLngs()) }) } }), r.Polygon.include({ toGeoJSON: function () { var t, e, i, n = [r.GeoJSON.latLngsToCoords(this.getLatLngs())]; if (n[0].push(n[0][0]), this._holes) for (t = 0, e = this._holes.length; t < e; t++)(i = r.GeoJSON.latLngsToCoords(this._holes[t])).push(i[0]), n.push(i); return r.GeoJSON.getFeature(this, { type: "Polygon", coordinates: n }) } }), function () { function t(t) { return function () { var e = []; return this.eachLayer(function (t) { e.push(t.toGeoJSON().geometry.coordinates) }), r.GeoJSON.getFeature(this, { type: t, coordinates: e }) } } r.MultiPolyline.include({ toGeoJSON: t("MultiLineString") }), r.MultiPolygon.include({ toGeoJSON: t("MultiPolygon") }), r.LayerGroup.include({ toGeoJSON: function () { var e, i = this.feature && this.feature.geometry, n = []; if (i && "MultiPoint" === i.type) return t("MultiPoint").call(this); var o = i && "GeometryCollection" === i.type; return this.eachLayer(function (t) { t.toGeoJSON && (e = t.toGeoJSON(), n.push(o ? e.geometry : r.GeoJSON.asFeature(e))) }), o ? r.GeoJSON.getFeature(this, { geometries: n, type: "GeometryCollection" }) : { type: "FeatureCollection", features: n } } }) }(), r.geoJson = function (t, e) { return new r.GeoJSON(t, e) }, r.DomEvent = { addListener: function (t, e, i, n) { var o, s, a, l = r.stamp(i), h = "_leaflet_" + e + l; return t[h] ? this : (o = function (e) { return i.call(n || t, e || r.DomEvent._getEvent()) }, r.Browser.pointer && 0 === e.indexOf("touch") ? this.addPointerListener(t, e, o, l) : (r.Browser.touch && "dblclick" === e && this.addDoubleTapListener && this.addDoubleTapListener(t, o, l), "addEventListener" in t ? "mousewheel" === e ? (t.addEventListener("DOMMouseScroll", o, !1), t.addEventListener(e, o, !1)) : "mouseenter" === e || "mouseleave" === e ? (s = o, a = "mouseenter" === e ? "mouseover" : "mouseout", o = function (e) { if (r.DomEvent._checkMouse(t, e)) return s(e) }, t.addEventListener(a, o, !1)) : "click" === e && r.Browser.android ? (s = o, o = function (t) { return r.DomEvent._filterClick(t, s) }, t.addEventListener(e, o, !1)) : t.addEventListener(e, o, !1) : "attachEvent" in t && t.attachEvent("on" + e, o), t[h] = o, this)) }, removeListener: function (t, e, i) { var n = r.stamp(i), o = "_leaflet_" + e + n, s = t[o]; return s ? (r.Browser.pointer && 0 === e.indexOf("touch") ? this.removePointerListener(t, e, n) : r.Browser.touch && "dblclick" === e && this.removeDoubleTapListener ? this.removeDoubleTapListener(t, n) : "removeEventListener" in t ? "mousewheel" === e ? (t.removeEventListener("DOMMouseScroll", s, !1), t.removeEventListener(e, s, !1)) : "mouseenter" === e || "mouseleave" === e ? t.removeEventListener("mouseenter" === e ? "mouseover" : "mouseout", s, !1) : t.removeEventListener(e, s, !1) : "detachEvent" in t && t.detachEvent("on" + e, s), t[o] = null, this) : this }, stopPropagation: function (t) { return t.stopPropagation ? t.stopPropagation() : t.cancelBubble = !0, r.DomEvent._skipped(t), this }, disableScrollPropagation: function (t) { var e = r.DomEvent.stopPropagation; return r.DomEvent.on(t, "mousewheel", e).on(t, "MozMousePixelScroll", e) }, disableClickPropagation: function (t) { for (var e = r.DomEvent.stopPropagation, i = r.Draggable.START.length - 1; i >= 0; i--)r.DomEvent.on(t, r.Draggable.START[i], e); return r.DomEvent.on(t, "click", r.DomEvent._fakeStop).on(t, "dblclick", e) }, preventDefault: function (t) { return t.preventDefault ? t.preventDefault() : t.returnValue = !1, this }, stop: function (t) { return r.DomEvent.preventDefault(t).stopPropagation(t) }, getMousePosition: function (t, e) { if (!e) return new r.Point(t.clientX, t.clientY); var i = e.getBoundingClientRect(); return new r.Point(t.clientX - i.left - e.clientLeft, t.clientY - i.top - e.clientTop) }, getWheelDelta: function (t) { var e = 0; return t.wheelDelta && (e = t.wheelDelta / 120), t.detail && (e = -t.detail / 3), e }, _skipEvents: {}, _fakeStop: function (t) { r.DomEvent._skipEvents[t.type] = !0 }, _skipped: function (t) { var e = this._skipEvents[t.type]; return this._skipEvents[t.type] = !1, e }, _checkMouse: function (t, e) { var i = e.relatedTarget; if (!i) return !0; try { for (; i && i !== t;)i = i.parentNode } catch (t) { return !1 } return i !== t }, _getEvent: function () { var t = e.event; if (!t) for (var i = arguments.callee.caller; i && (!(t = i.arguments[0]) || e.Event !== t.constructor);)i = i.caller; return t }, _filterClick: function (t, e) { var i = t.timeStamp || t.originalEvent.timeStamp, n = r.DomEvent._lastClick && i - r.DomEvent._lastClick; if (!(n && n > 100 && n < 500 || t.target._simulatedClick && !t._simulated)) return r.DomEvent._lastClick = i, e(t); r.DomEvent.stop(t) } }, r.DomEvent.on = r.DomEvent.addListener, r.DomEvent.off = r.DomEvent.removeListener, r.Draggable = r.Class.extend({ includes: r.Mixin.Events, statics: { START: r.Browser.touch ? ["touchstart", "mousedown"] : ["mousedown"], END: { mousedown: "mouseup", touchstart: "touchend", pointerdown: "touchend", MSPointerDown: "touchend" }, MOVE: { mousedown: "mousemove", touchstart: "touchmove", pointerdown: "touchmove", MSPointerDown: "touchmove" } }, initialize: function (t, e) { this._element = t, this._dragStartTarget = e || t }, enable: function () { if (!this._enabled) { for (var t = r.Draggable.START.length - 1; t >= 0; t--)r.DomEvent.on(this._dragStartTarget, r.Draggable.START[t], this._onDown, this); this._enabled = !0 } }, disable: function () { if (this._enabled) { for (var t = r.Draggable.START.length - 1; t >= 0; t--)r.DomEvent.off(this._dragStartTarget, r.Draggable.START[t], this._onDown, this); this._enabled = !1, this._moved = !1 } }, _onDown: function (t) { if (this._moved = !1, !t.shiftKey && (1 === t.which || 1 === t.button || t.touches) && (r.DomEvent.stopPropagation(t), !r.Draggable._disabled && (r.DomUtil.disableImageDrag(), r.DomUtil.disableTextSelection(), !this._moving))) { var e = t.touches ? t.touches[0] : t; this._startPoint = new r.Point(e.clientX, e.clientY), this._startPos = this._newPos = r.DomUtil.getPosition(this._element), r.DomEvent.on(i, r.Draggable.MOVE[t.type], this._onMove, this).on(i, r.Draggable.END[t.type], this._onUp, this) } }, _onMove: function (t) { if (t.touches && t.touches.length > 1) this._moved = !0; else { var e = t.touches && 1 === t.touches.length ? t.touches[0] : t, n = new r.Point(e.clientX, e.clientY).subtract(this._startPoint); (n.x || n.y) && (r.Browser.touch && Math.abs(n.x) + Math.abs(n.y) < 3 || (r.DomEvent.preventDefault(t), this._moved || (this.fire("dragstart"), this._moved = !0, this._startPos = r.DomUtil.getPosition(this._element).subtract(n), r.DomUtil.addClass(i.body, "leaflet-dragging"), this._lastTarget = t.target || t.srcElement, r.DomUtil.addClass(this._lastTarget, "leaflet-drag-target")), this._newPos = this._startPos.add(n), this._moving = !0, r.Util.cancelAnimFrame(this._animRequest), this._animRequest = r.Util.requestAnimFrame(this._updatePosition, this, !0, this._dragStartTarget))) } }, _updatePosition: function () { this.fire("predrag"), r.DomUtil.setPosition(this._element, this._newPos), this.fire("drag") }, _onUp: function () { for (var t in r.DomUtil.removeClass(i.body, "leaflet-dragging"), this._lastTarget && (r.DomUtil.removeClass(this._lastTarget, "leaflet-drag-target"), this._lastTarget = null), r.Draggable.MOVE) r.DomEvent.off(i, r.Draggable.MOVE[t], this._onMove).off(i, r.Draggable.END[t], this._onUp); r.DomUtil.enableImageDrag(), r.DomUtil.enableTextSelection(), this._moved && this._moving && (r.Util.cancelAnimFrame(this._animRequest), this.fire("dragend", { distance: this._newPos.distanceTo(this._startPos) })), this._moving = !1 } }), r.Handler = r.Class.extend({ initialize: function (t) { this._map = t }, enable: function () { this._enabled || (this._enabled = !0, this.addHooks()) }, disable: function () { this._enabled && (this._enabled = !1, this.removeHooks()) }, enabled: function () { return !!this._enabled } }), r.Map.mergeOptions({ dragging: !0, inertia: !r.Browser.android23, inertiaDeceleration: 3400, inertiaMaxSpeed: 1 / 0, inertiaThreshold: r.Browser.touch ? 32 : 18, easeLinearity: .25, worldCopyJump: !1 }), r.Map.Drag = r.Handler.extend({ addHooks: function () { if (!this._draggable) { var t = this._map; this._draggable = new r.Draggable(t._mapPane, t._container), this._draggable.on({ dragstart: this._onDragStart, drag: this._onDrag, dragend: this._onDragEnd }, this), t.options.worldCopyJump && (this._draggable.on("predrag", this._onPreDrag, this), t.on("viewreset", this._onViewReset, this), t.whenReady(this._onViewReset, this)) } this._draggable.enable() }, removeHooks: function () { this._draggable.disable() }, moved: function () { return this._draggable && this._draggable._moved }, _onDragStart: function () { var t = this._map; t._panAnim && t._panAnim.stop(), t.fire("movestart").fire("dragstart"), t.options.inertia && (this._positions = [], this._times = []) }, _onDrag: function () { if (this._map.options.inertia) { var t = this._lastTime = +new Date, e = this._lastPos = this._draggable._newPos; this._positions.push(e), this._times.push(t), t - this._times[0] > 200 && (this._positions.shift(), this._times.shift()) } this._map.fire("move").fire("drag") }, _onViewReset: function () { var t = this._map.getSize()._divideBy(2), e = this._map.latLngToLayerPoint([0, 0]); this._initialWorldOffset = e.subtract(t).x, this._worldWidth = this._map.project([0, 180]).x }, _onPreDrag: function () { var t = this._worldWidth, e = Math.round(t / 2), i = this._initialWorldOffset, n = this._draggable._newPos.x, o = (n - e + i) % t + e - i, s = (n + e + i) % t - e - i, a = Math.abs(o + i) < Math.abs(s + i) ? o : s; this._draggable._newPos.x = a }, _onDragEnd: function (t) { var e = this._map, i = e.options, n = +new Date - this._lastTime, o = !i.inertia || n > i.inertiaThreshold || !this._positions[0]; if (e.fire("dragend", t), o) e.fire("moveend"); else { var s = this._lastPos.subtract(this._positions[0]), a = (this._lastTime + n - this._times[0]) / 1e3, l = i.easeLinearity, h = s.multiplyBy(l / a), u = h.distanceTo([0, 0]), c = Math.min(i.inertiaMaxSpeed, u), p = h.multiplyBy(c / u), d = c / (i.inertiaDeceleration * l), m = p.multiplyBy(-d / 2).round(); m.x && m.y ? (m = e._limitOffset(m, e.options.maxBounds), r.Util.requestAnimFrame(function () { e.panBy(m, { duration: d, easeLinearity: l, noMoveStart: !0 }) })) : e.fire("moveend") } } }), r.Map.addInitHook("addHandler", "dragging", r.Map.Drag), r.Map.mergeOptions({ doubleClickZoom: !0 }), r.Map.DoubleClickZoom = r.Handler.extend({ addHooks: function () { this._map.on("dblclick", this._onDoubleClick, this) }, removeHooks: function () { this._map.off("dblclick", this._onDoubleClick, this) }, _onDoubleClick: function (t) { var e = this._map, i = e.getZoom() + (t.originalEvent.shiftKey ? -1 : 1); "center" === e.options.doubleClickZoom ? e.setZoom(i) : e.setZoomAround(t.containerPoint, i) } }), r.Map.addInitHook("addHandler", "doubleClickZoom", r.Map.DoubleClickZoom), r.Map.mergeOptions({ scrollWheelZoom: !0 }), r.Map.ScrollWheelZoom = r.Handler.extend({ addHooks: function () { r.DomEvent.on(this._map._container, "mousewheel", this._onWheelScroll, this), r.DomEvent.on(this._map._container, "MozMousePixelScroll", r.DomEvent.preventDefault), this._delta = 0 }, removeHooks: function () { r.DomEvent.off(this._map._container, "mousewheel", this._onWheelScroll), r.DomEvent.off(this._map._container, "MozMousePixelScroll", r.DomEvent.preventDefault) }, _onWheelScroll: function (t) { var e = r.DomEvent.getWheelDelta(t); this._delta += e, this._lastMousePos = this._map.mouseEventToContainerPoint(t), this._startTime || (this._startTime = +new Date); var i = Math.max(40 - (+new Date - this._startTime), 0); clearTimeout(this._timer), this._timer = setTimeout(r.bind(this._performZoom, this), i), r.DomEvent.preventDefault(t), r.DomEvent.stopPropagation(t) }, _performZoom: function () { var t = this._map, e = this._delta, i = t.getZoom(); e = e > 0 ? Math.ceil(e) : Math.floor(e), e = Math.max(Math.min(e, 4), -4), e = t._limitZoom(i + e) - i, this._delta = 0, this._startTime = null, e && ("center" === t.options.scrollWheelZoom ? t.setZoom(i + e) : t.setZoomAround(this._lastMousePos, i + e)) } }), r.Map.addInitHook("addHandler", "scrollWheelZoom", r.Map.ScrollWheelZoom), r.extend(r.DomEvent, { _touchstart: r.Browser.msPointer ? "MSPointerDown" : r.Browser.pointer ? "pointerdown" : "touchstart", _touchend: r.Browser.msPointer ? "MSPointerUp" : r.Browser.pointer ? "pointerup" : "touchend", addDoubleTapListener: function (t, e, n) { var o, s, a = !1, l = 250, h = this._touchstart, u = this._touchend, c = []; function p(t) { var e; if (r.Browser.pointer ? (c.push(t.pointerId), e = c.length) : e = t.touches.length, !(e > 1)) { var i = Date.now(), n = i - (o || i); s = t.touches ? t.touches[0] : t, a = n > 0 && n <= l, o = i } } function d(t) { if (r.Browser.pointer) { var i = c.indexOf(t.pointerId); if (-1 === i) return; c.splice(i, 1) } if (a) { if (r.Browser.pointer) { var n, l = {}; for (var h in s) n = s[h], l[h] = "function" == typeof n ? n.bind(s) : n; s = l } s.type = "dblclick", e(s), o = null } } t["_leaflet_" + h + n] = p, t["_leaflet_" + u + n] = d; var m = r.Browser.pointer ? i.documentElement : t; return t.addEventListener(h, p, !1), m.addEventListener(u, d, !1), r.Browser.pointer && m.addEventListener(r.DomEvent.POINTER_CANCEL, d, !1), this }, removeDoubleTapListener: function (t, e) { var n = "_leaflet_"; return t.removeEventListener(this._touchstart, t[n + this._touchstart + e], !1), (r.Browser.pointer ? i.documentElement : t).removeEventListener(this._touchend, t[n + this._touchend + e], !1), r.Browser.pointer && i.documentElement.removeEventListener(r.DomEvent.POINTER_CANCEL, t[n + this._touchend + e], !1), this } }), r.extend(r.DomEvent, { POINTER_DOWN: r.Browser.msPointer ? "MSPointerDown" : "pointerdown", POINTER_MOVE: r.Browser.msPointer ? "MSPointerMove" : "pointermove", POINTER_UP: r.Browser.msPointer ? "MSPointerUp" : "pointerup", POINTER_CANCEL: r.Browser.msPointer ? "MSPointerCancel" : "pointercancel", _pointers: [], _pointerDocumentListener: !1, addPointerListener: function (t, e, i, n) { switch (e) { case "touchstart": return this.addPointerListenerStart(t, e, i, n); case "touchend": return this.addPointerListenerEnd(t, e, i, n); case "touchmove": return this.addPointerListenerMove(t, e, i, n); default: throw "Unknown touch event type" } }, addPointerListenerStart: function (t, e, n, o) { var s = this._pointers, a = function (t) { "mouse" !== t.pointerType && t.pointerType !== t.MSPOINTER_TYPE_MOUSE && r.DomEvent.preventDefault(t); for (var e = !1, i = 0; i < s.length; i++)if (s[i].pointerId === t.pointerId) { e = !0; break } e || s.push(t), t.touches = s.slice(), t.changedTouches = [t], n(t) }; if (t["_leaflet_touchstart" + o] = a, t.addEventListener(this.POINTER_DOWN, a, !1), !this._pointerDocumentListener) { var l = function (t) { for (var e = 0; e < s.length; e++)if (s[e].pointerId === t.pointerId) { s.splice(e, 1); break } }; i.documentElement.addEventListener(this.POINTER_UP, l, !1), i.documentElement.addEventListener(this.POINTER_CANCEL, l, !1), this._pointerDocumentListener = !0 } return this }, addPointerListenerMove: function (t, e, i, n) { var o = this._pointers; function s(t) { if (t.pointerType !== t.MSPOINTER_TYPE_MOUSE && "mouse" !== t.pointerType || 0 !== t.buttons) { for (var e = 0; e < o.length; e++)if (o[e].pointerId === t.pointerId) { o[e] = t; break } t.touches = o.slice(), t.changedTouches = [t], i(t) } } return t["_leaflet_touchmove" + n] = s, t.addEventListener(this.POINTER_MOVE, s, !1), this }, addPointerListenerEnd: function (t, e, i, n) { var o = this._pointers, s = function (t) { for (var e = 0; e < o.length; e++)if (o[e].pointerId === t.pointerId) { o.splice(e, 1); break } t.touches = o.slice(), t.changedTouches = [t], i(t) }; return t["_leaflet_touchend" + n] = s, t.addEventListener(this.POINTER_UP, s, !1), t.addEventListener(this.POINTER_CANCEL, s, !1), this }, removePointerListener: function (t, e, i) { var n = t["_leaflet_" + e + i]; switch (e) { case "touchstart": t.removeEventListener(this.POINTER_DOWN, n, !1); break; case "touchmove": t.removeEventListener(this.POINTER_MOVE, n, !1); break; case "touchend": t.removeEventListener(this.POINTER_UP, n, !1), t.removeEventListener(this.POINTER_CANCEL, n, !1) }return this } }), r.Map.mergeOptions({ touchZoom: r.Browser.touch && !r.Browser.android23, bounceAtZoomLimits: !0 }), r.Map.TouchZoom = r.Handler.extend({ addHooks: function () { r.DomEvent.on(this._map._container, "touchstart", this._onTouchStart, this) }, removeHooks: function () { r.DomEvent.off(this._map._container, "touchstart", this._onTouchStart, this) }, _onTouchStart: function (t) { var e = this._map; if (t.touches && 2 === t.touches.length && !e._animatingZoom && !this._zooming) { var n = e.mouseEventToLayerPoint(t.touches[0]), o = e.mouseEventToLayerPoint(t.touches[1]), s = e._getCenterLayerPoint(); this._startCenter = n.add(o)._divideBy(2), this._startDist = n.distanceTo(o), this._moved = !1, this._zooming = !0, this._centerOffset = s.subtract(this._startCenter), e._panAnim && e._panAnim.stop(), r.DomEvent.on(i, "touchmove", this._onTouchMove, this).on(i, "touchend", this._onTouchEnd, this), r.DomEvent.preventDefault(t) } }, _onTouchMove: function (t) { var e = this._map; if (t.touches && 2 === t.touches.length && this._zooming) { var i = e.mouseEventToLayerPoint(t.touches[0]), n = e.mouseEventToLayerPoint(t.touches[1]); this._scale = i.distanceTo(n) / this._startDist, this._delta = i._add(n)._divideBy(2)._subtract(this._startCenter), 1 !== this._scale && (!e.options.bounceAtZoomLimits && (e.getZoom() === e.getMinZoom() && this._scale < 1 || e.getZoom() === e.getMaxZoom() && this._scale > 1) || (this._moved || (r.DomUtil.addClass(e._mapPane, "leaflet-touching"), e.fire("movestart").fire("zoomstart"), this._moved = !0), r.Util.cancelAnimFrame(this._animRequest), this._animRequest = r.Util.requestAnimFrame(this._updateOnMove, this, !0, this._map._container), r.DomEvent.preventDefault(t))) } }, _updateOnMove: function () { var t = this._map, e = this._getScaleOrigin(), i = t.layerPointToLatLng(e), n = t.getScaleZoom(this._scale); t._animateZoom(i, n, this._startCenter, this._scale, this._delta, !1, !0) }, _onTouchEnd: function () { if (this._moved && this._zooming) { var t = this._map; this._zooming = !1, r.DomUtil.removeClass(t._mapPane, "leaflet-touching"), r.Util.cancelAnimFrame(this._animRequest), r.DomEvent.off(i, "touchmove", this._onTouchMove).off(i, "touchend", this._onTouchEnd); var e = this._getScaleOrigin(), n = t.layerPointToLatLng(e), o = t.getZoom(), s = t.getScaleZoom(this._scale) - o, a = s > 0 ? Math.ceil(s) : Math.floor(s), l = t._limitZoom(o + a), h = t.getZoomScale(l) / this._scale; t._animateZoom(n, l, e, h) } else this._zooming = !1 }, _getScaleOrigin: function () { var t = this._centerOffset.subtract(this._delta).divideBy(this._scale); return this._startCenter.add(t) } }), r.Map.addInitHook("addHandler", "touchZoom", r.Map.TouchZoom), r.Map.mergeOptions({ tap: !0, tapTolerance: 15 }), r.Map.Tap = r.Handler.extend({ addHooks: function () { r.DomEvent.on(this._map._container, "touchstart", this._onDown, this) }, removeHooks: function () { r.DomEvent.off(this._map._container, "touchstart", this._onDown, this) }, _onDown: function (t) { if (t.touches) { if (r.DomEvent.preventDefault(t), this._fireClick = !0, t.touches.length > 1) return this._fireClick = !1, void clearTimeout(this._holdTimeout); var e = t.touches[0], n = e.target; this._startPos = this._newPos = new r.Point(e.clientX, e.clientY), n.tagName && "a" === n.tagName.toLowerCase() && r.DomUtil.addClass(n, "leaflet-active"), this._holdTimeout = setTimeout(r.bind(function () { this._isTapValid() && (this._fireClick = !1, this._onUp(), this._simulateEvent("contextmenu", e)) }, this), 1e3), r.DomEvent.on(i, "touchmove", this._onMove, this).on(i, "touchend", this._onUp, this) } }, _onUp: function (t) { if (clearTimeout(this._holdTimeout), r.DomEvent.off(i, "touchmove", this._onMove, this).off(i, "touchend", this._onUp, this), this._fireClick && t && t.changedTouches) { var e = t.changedTouches[0], n = e.target; n && n.tagName && "a" === n.tagName.toLowerCase() && r.DomUtil.removeClass(n, "leaflet-active"), this._isTapValid() && this._simulateEvent("click", e) } }, _isTapValid: function () { return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance }, _onMove: function (t) { var e = t.touches[0]; this._newPos = new r.Point(e.clientX, e.clientY) }, _simulateEvent: function (t, n) { var o = i.createEvent("MouseEvents"); o._simulated = !0, n.target._simulatedClick = !0, o.initMouseEvent(t, !0, !0, e, 1, n.screenX, n.screenY, n.clientX, n.clientY, !1, !1, !1, !1, 0, null), n.target.dispatchEvent(o) } }), r.Browser.touch && !r.Browser.pointer && r.Map.addInitHook("addHandler", "tap", r.Map.Tap), r.Map.mergeOptions({ boxZoom: !0 }), r.Map.BoxZoom = r.Handler.extend({ initialize: function (t) { this._map = t, this._container = t._container, this._pane = t._panes.overlayPane, this._moved = !1 }, addHooks: function () { r.DomEvent.on(this._container, "mousedown", this._onMouseDown, this) }, removeHooks: function () { r.DomEvent.off(this._container, "mousedown", this._onMouseDown), this._moved = !1 }, moved: function () { return this._moved }, _onMouseDown: function (t) { if (this._moved = !1, !t.shiftKey || 1 !== t.which && 1 !== t.button) return !1; r.DomUtil.disableTextSelection(), r.DomUtil.disableImageDrag(), this._startLayerPoint = this._map.mouseEventToLayerPoint(t), r.DomEvent.on(i, "mousemove", this._onMouseMove, this).on(i, "mouseup", this._onMouseUp, this).on(i, "keydown", this._onKeyDown, this) }, _onMouseMove: function (t) { this._moved || (this._box = r.DomUtil.create("div", "leaflet-zoom-box", this._pane), r.DomUtil.setPosition(this._box, this._startLayerPoint), this._container.style.cursor = "crosshair", this._map.fire("boxzoomstart")); var e = this._startLayerPoint, i = this._box, n = this._map.mouseEventToLayerPoint(t), o = n.subtract(e), s = new r.Point(Math.min(n.x, e.x), Math.min(n.y, e.y)); r.DomUtil.setPosition(i, s), this._moved = !0, i.style.width = Math.max(0, Math.abs(o.x) - 4) + "px", i.style.height = Math.max(0, Math.abs(o.y) - 4) + "px" }, _finish: function () { this._moved && (this._pane.removeChild(this._box), this._container.style.cursor = ""), r.DomUtil.enableTextSelection(), r.DomUtil.enableImageDrag(), r.DomEvent.off(i, "mousemove", this._onMouseMove).off(i, "mouseup", this._onMouseUp).off(i, "keydown", this._onKeyDown) }, _onMouseUp: function (t) { this._finish(); var e = this._map, i = e.mouseEventToLayerPoint(t); if (!this._startLayerPoint.equals(i)) { var n = new r.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint), e.layerPointToLatLng(i)); e.fitBounds(n), e.fire("boxzoomend", { boxZoomBounds: n }) } }, _onKeyDown: function (t) { 27 === t.keyCode && this._finish() } }), r.Map.addInitHook("addHandler", "boxZoom", r.Map.BoxZoom), r.Map.mergeOptions({ keyboard: !0, keyboardPanOffset: 80, keyboardZoomOffset: 1 }), r.Map.Keyboard = r.Handler.extend({ keyCodes: { left: [37], right: [39], down: [40], up: [38], zoomIn: [187, 107, 61, 171], zoomOut: [189, 109, 173] }, initialize: function (t) { this._map = t, this._setPanOffset(t.options.keyboardPanOffset), this._setZoomOffset(t.options.keyboardZoomOffset) }, addHooks: function () { var t = this._map._container; -1 === t.tabIndex && (t.tabIndex = "0"), r.DomEvent.on(t, "focus", this._onFocus, this).on(t, "blur", this._onBlur, this).on(t, "mousedown", this._onMouseDown, this), this._map.on("focus", this._addHooks, this).on("blur", this._removeHooks, this) }, removeHooks: function () { this._removeHooks(); var t = this._map._container; r.DomEvent.off(t, "focus", this._onFocus, this).off(t, "blur", this._onBlur, this).off(t, "mousedown", this._onMouseDown, this), this._map.off("focus", this._addHooks, this).off("blur", this._removeHooks, this) }, _onMouseDown: function () { if (!this._focused) { var t = i.body, n = i.documentElement, o = t.scrollTop || n.scrollTop, s = t.scrollLeft || n.scrollLeft; this._map._container.focus(), e.scrollTo(s, o) } }, _onFocus: function () { this._focused = !0, this._map.fire("focus") }, _onBlur: function () { this._focused = !1, this._map.fire("blur") }, _setPanOffset: function (t) { var e, i, n = this._panKeys = {}, o = this.keyCodes; for (e = 0, i = o.left.length; e < i; e++)n[o.left[e]] = [-1 * t, 0]; for (e = 0, i = o.right.length; e < i; e++)n[o.right[e]] = [t, 0]; for (e = 0, i = o.down.length; e < i; e++)n[o.down[e]] = [0, t]; for (e = 0, i = o.up.length; e < i; e++)n[o.up[e]] = [0, -1 * t] }, _setZoomOffset: function (t) { var e, i, n = this._zoomKeys = {}, o = this.keyCodes; for (e = 0, i = o.zoomIn.length; e < i; e++)n[o.zoomIn[e]] = t; for (e = 0, i = o.zoomOut.length; e < i; e++)n[o.zoomOut[e]] = -t }, _addHooks: function () { r.DomEvent.on(i, "keydown", this._onKeyDown, this) }, _removeHooks: function () { r.DomEvent.off(i, "keydown", this._onKeyDown, this) }, _onKeyDown: function (t) { var e = t.keyCode, i = this._map; if (e in this._panKeys) { if (i._panAnim && i._panAnim._inProgress) return; i.panBy(this._panKeys[e]), i.options.maxBounds && i.panInsideBounds(i.options.maxBounds) } else { if (!(e in this._zoomKeys)) return; i.setZoom(i.getZoom() + this._zoomKeys[e]) } r.DomEvent.stop(t) } }), r.Map.addInitHook("addHandler", "keyboard", r.Map.Keyboard), r.Handler.MarkerDrag = r.Handler.extend({ initialize: function (t) { this._marker = t }, addHooks: function () { var t = this._marker._icon; this._draggable || (this._draggable = new r.Draggable(t, t)), this._draggable.on("dragstart", this._onDragStart, this).on("drag", this._onDrag, this).on("dragend", this._onDragEnd, this), this._draggable.enable(), r.DomUtil.addClass(this._marker._icon, "leaflet-marker-draggable") }, removeHooks: function () { this._draggable.off("dragstart", this._onDragStart, this).off("drag", this._onDrag, this).off("dragend", this._onDragEnd, this), this._draggable.disable(), r.DomUtil.removeClass(this._marker._icon, "leaflet-marker-draggable") }, moved: function () { return this._draggable && this._draggable._moved }, _onDragStart: function () { this._marker.closePopup().fire("movestart").fire("dragstart") }, _onDrag: function () { var t = this._marker, e = t._shadow, i = r.DomUtil.getPosition(t._icon), n = t._map.layerPointToLatLng(i); e && r.DomUtil.setPosition(e, i), t._latlng = n, t.fire("move", { latlng: n }).fire("drag") }, _onDragEnd: function (t) { this._marker.fire("moveend").fire("dragend", t) } }), r.Control = r.Class.extend({ options: { position: "topright" }, initialize: function (t) { r.setOptions(this, t) }, getPosition: function () { return this.options.position }, setPosition: function (t) { var e = this._map; return e && e.removeControl(this), this.options.position = t, e && e.addControl(this), this }, getContainer: function () { return this._container }, addTo: function (t) { this._map = t; var e = this._container = this.onAdd(t), i = this.getPosition(), n = t._controlCorners[i]; return r.DomUtil.addClass(e, "leaflet-control"), -1 !== i.indexOf("bottom") ? n.insertBefore(e, n.firstChild) : n.appendChild(e), this }, removeFrom: function (t) { var e = this.getPosition(); return t._controlCorners[e].removeChild(this._container), this._map = null, this.onRemove && this.onRemove(t), this }, _refocusOnMap: function () { this._map && this._map.getContainer().focus() } }), r.control = function (t) { return new r.Control(t) }, r.Map.include({ addControl: function (t) { return t.addTo(this), this }, removeControl: function (t) { return t.removeFrom(this), this }, _initControlPos: function () { var t = this._controlCorners = {}, e = "leaflet-", i = this._controlContainer = r.DomUtil.create("div", e + "control-container", this._container); function n(n, o) { var s = e + n + " " + e + o; t[n + o] = r.DomUtil.create("div", s, i) } n("top", "left"), n("top", "right"), n("bottom", "left"), n("bottom", "right") }, _clearControlPos: function () { this._container.removeChild(this._controlContainer) } }), r.Control.Zoom = r.Control.extend({ options: { position: "topleft", zoomInText: "+", zoomInTitle: "Zoom in", zoomOutText: "-", zoomOutTitle: "Zoom out" }, onAdd: function (t) { var e = "leaflet-control-zoom", i = r.DomUtil.create("div", e + " leaflet-bar"); return this._map = t, this._zoomInButton = this._createButton(this.options.zoomInText, this.options.zoomInTitle, e + "-in", i, this._zoomIn, this), this._zoomOutButton = this._createButton(this.options.zoomOutText, this.options.zoomOutTitle, e + "-out", i, this._zoomOut, this), this._updateDisabled(), t.on("zoomend zoomlevelschange", this._updateDisabled, this), i }, onRemove: function (t) { t.off("zoomend zoomlevelschange", this._updateDisabled, this) }, _zoomIn: function (t) { this._map.zoomIn(t.shiftKey ? 3 : 1) }, _zoomOut: function (t) { this._map.zoomOut(t.shiftKey ? 3 : 1) }, _createButton: function (t, e, i, n, o, s) { var a = r.DomUtil.create("a", i, n); a.innerHTML = t, a.href = "#", a.title = e; var l = r.DomEvent.stopPropagation; return r.DomEvent.on(a, "click", l).on(a, "mousedown", l).on(a, "dblclick", l).on(a, "click", r.DomEvent.preventDefault).on(a, "click", o, s).on(a, "click", this._refocusOnMap, s), a }, _updateDisabled: function () { var t = this._map, e = "leaflet-disabled"; r.DomUtil.removeClass(this._zoomInButton, e), r.DomUtil.removeClass(this._zoomOutButton, e), t._zoom === t.getMinZoom() && r.DomUtil.addClass(this._zoomOutButton, e), t._zoom === t.getMaxZoom() && r.DomUtil.addClass(this._zoomInButton, e) } }), r.Map.mergeOptions({ zoomControl: !0 }), r.Map.addInitHook(function () { this.options.zoomControl && (this.zoomControl = new r.Control.Zoom, this.addControl(this.zoomControl)) }), r.control.zoom = function (t) { return new r.Control.Zoom(t) }, r.Control.Attribution = r.Control.extend({ options: { position: "bottomright", prefix: '<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>' }, initialize: function (t) { r.setOptions(this, t), this._attributions = {} }, onAdd: function (t) { for (var e in this._container = r.DomUtil.create("div", "leaflet-control-attribution"), r.DomEvent.disableClickPropagation(this._container), t._layers) t._layers[e].getAttribution && this.addAttribution(t._layers[e].getAttribution()); return t.on("layeradd", this._onLayerAdd, this).on("layerremove", this._onLayerRemove, this), this._update(), this._container }, onRemove: function (t) { t.off("layeradd", this._onLayerAdd).off("layerremove", this._onLayerRemove) }, setPrefix: function (t) { return this.options.prefix = t, this._update(), this }, addAttribution: function (t) { if (t) return this._attributions[t] || (this._attributions[t] = 0), this._attributions[t]++, this._update(), this }, removeAttribution: function (t) { if (t) return this._attributions[t] && (this._attributions[t]--, this._update()), this }, _update: function () { if (this._map) { var t = []; for (var e in this._attributions) this._attributions[e] && t.push(e); var i = []; this.options.prefix && i.push(this.options.prefix), t.length && i.push(t.join(", ")), this._container.innerHTML = i.join(" | ") } }, _onLayerAdd: function (t) { t.layer.getAttribution && this.addAttribution(t.layer.getAttribution()) }, _onLayerRemove: function (t) { t.layer.getAttribution && this.removeAttribution(t.layer.getAttribution()) } }), r.Map.mergeOptions({ attributionControl: !0 }), r.Map.addInitHook(function () { this.options.attributionControl && (this.attributionControl = (new r.Control.Attribution).addTo(this)) }), r.control.attribution = function (t) { return new r.Control.Attribution(t) }, r.Control.Scale = r.Control.extend({ options: { position: "bottomleft", maxWidth: 100, metric: !0, imperial: !0, updateWhenIdle: !1 }, onAdd: function (t) { this._map = t; var e = r.DomUtil.create("div", "leaflet-control-scale"), i = this.options; return this._addScales(i, "leaflet-control-scale", e), t.on(i.updateWhenIdle ? "moveend" : "move", this._update, this), t.whenReady(this._update, this), e }, onRemove: function (t) { t.off(this.options.updateWhenIdle ? "moveend" : "move", this._update, this) }, _addScales: function (t, e, i) { t.metric && (this._mScale = r.DomUtil.create("div", e + "-line", i)), t.imperial && (this._iScale = r.DomUtil.create("div", e + "-line", i)) }, _update: function () { var t = this._map.getBounds(), e = t.getCenter().lat, i = 6378137 * Math.PI * Math.cos(e * Math.PI / 180) * (t.getNorthEast().lng - t.getSouthWest().lng) / 180, n = this._map.getSize(), o = this.options, s = 0; n.x > 0 && (s = i * (o.maxWidth / n.x)), this._updateScales(o, s) }, _updateScales: function (t, e) { t.metric && e && this._updateMetric(e), t.imperial && e && this._updateImperial(e) }, _updateMetric: function (t) { var e = this._getRoundNum(t); this._mScale.style.width = this._getScaleWidth(e / t) + "px", this._mScale.innerHTML = e < 1e3 ? e + " m" : e / 1e3 + " km" }, _updateImperial: function (t) { var e, i, n, o = 3.2808399 * t, s = this._iScale; o > 5280 ? (e = o / 5280, i = this._getRoundNum(e), s.style.width = this._getScaleWidth(i / e) + "px", s.innerHTML = i + " mi") : (n = this._getRoundNum(o), s.style.width = this._getScaleWidth(n / o) + "px", s.innerHTML = n + " ft") }, _getScaleWidth: function (t) { return Math.round(this.options.maxWidth * t) - 10 }, _getRoundNum: function (t) { var e = Math.pow(10, (Math.floor(t) + "").length - 1), i = t / e; return e * (i = i >= 10 ? 10 : i >= 5 ? 5 : i >= 3 ? 3 : i >= 2 ? 2 : 1) } }), r.control.scale = function (t) { return new r.Control.Scale(t) }, r.Control.Layers = r.Control.extend({ options: { collapsed: !0, position: "topright", autoZIndex: !0 }, initialize: function (t, e, i) { for (var n in r.setOptions(this, i), this._layers = {}, this._lastZIndex = 0, this._handlingClick = !1, t) this._addLayer(t[n], n); for (n in e) this._addLayer(e[n], n, !0) }, onAdd: function (t) { return this._initLayout(), this._update(), t.on("layeradd", this._onLayerChange, this).on("layerremove", this._onLayerChange, this), this._container }, onRemove: function (t) { t.off("layeradd", this._onLayerChange, this).off("layerremove", this._onLayerChange, this) }, addBaseLayer: function (t, e) { return this._addLayer(t, e), this._update(), this }, addOverlay: function (t, e) { return this._addLayer(t, e, !0), this._update(), this }, removeLayer: function (t) { var e = r.stamp(t); return delete this._layers[e], this._update(), this }, _initLayout: function () { var t = "leaflet-control-layers", e = this._container = r.DomUtil.create("div", t); e.setAttribute("aria-haspopup", !0), r.Browser.touch ? r.DomEvent.on(e, "click", r.DomEvent.stopPropagation) : r.DomEvent.disableClickPropagation(e).disableScrollPropagation(e); var i = this._form = r.DomUtil.create("form", t + "-list"); if (this.options.collapsed) { r.Browser.android || r.DomEvent.on(e, "mouseover", this._expand, this).on(e, "mouseout", this._collapse, this); var n = this._layersLink = r.DomUtil.create("a", t + "-toggle", e); n.href = "#", n.title = "Layers", r.Browser.touch ? r.DomEvent.on(n, "click", r.DomEvent.stop).on(n, "click", this._expand, this) : r.DomEvent.on(n, "focus", this._expand, this), r.DomEvent.on(i, "click", function () { setTimeout(r.bind(this._onInputClick, this), 0) }, this), this._map.on("click", this._collapse, this) } else this._expand(); this._baseLayersList = r.DomUtil.create("div", t + "-base", i), this._separator = r.DomUtil.create("div", t + "-separator", i), this._overlaysList = r.DomUtil.create("div", t + "-overlays", i), e.appendChild(i) }, _addLayer: function (t, e, i) { var n = r.stamp(t); this._layers[n] = { layer: t, name: e, overlay: i }, this.options.autoZIndex && t.setZIndex && (this._lastZIndex++, t.setZIndex(this._lastZIndex)) }, _update: function () { if (this._container) { this._baseLayersList.innerHTML = "", this._overlaysList.innerHTML = ""; var t, e, i = !1, n = !1; for (t in this._layers) e = this._layers[t], this._addItem(e), n = n || e.overlay, i = i || !e.overlay; this._separator.style.display = n && i ? "" : "none" } }, _onLayerChange: function (t) { var e = this._layers[r.stamp(t.layer)]; if (e) { this._handlingClick || this._update(); var i = e.overlay ? "layeradd" === t.type ? "overlayadd" : "overlayremove" : "layeradd" === t.type ? "baselayerchange" : null; i && this._map.fire(i, e) } }, _createRadioElement: function (t, e) { var n = '<input type="radio" class="leaflet-control-layers-selector" name="' + t + '"'; e && (n += ' checked="checked"'), n += "/>"; var o = i.createElement("div"); return o.innerHTML = n, o.firstChild }, _addItem: function (t) { var e, n = i.createElement("label"), o = this._map.hasLayer(t.layer); t.overlay ? ((e = i.createElement("input")).type = "checkbox", e.className = "leaflet-control-layers-selector", e.defaultChecked = o) : e = this._createRadioElement("leaflet-base-layers", o), e.layerId = r.stamp(t.layer), r.DomEvent.on(e, "click", this._onInputClick, this); var s = i.createElement("span"); return s.innerHTML = " " + t.name, n.appendChild(e), n.appendChild(s), (t.overlay ? this._overlaysList : this._baseLayersList).appendChild(n), n }, _onInputClick: function () { var t, e, i, n = this._form.getElementsByTagName("input"), o = n.length; for (this._handlingClick = !0, t = 0; t < o; t++)e = n[t], i = this._layers[e.layerId], e.checked && !this._map.hasLayer(i.layer) ? this._map.addLayer(i.layer) : !e.checked && this._map.hasLayer(i.layer) && this._map.removeLayer(i.layer); this._handlingClick = !1, this._refocusOnMap() }, _expand: function () { r.DomUtil.addClass(this._container, "leaflet-control-layers-expanded") }, _collapse: function () { this._container.className = this._container.className.replace(" leaflet-control-layers-expanded", "") } }), r.control.layers = function (t, e, i) { return new r.Control.Layers(t, e, i) }, r.PosAnimation = r.Class.extend({ includes: r.Mixin.Events, run: function (t, e, i, n) { this.stop(), this._el = t, this._inProgress = !0, this._newPos = e, this.fire("start"), t.style[r.DomUtil.TRANSITION] = "all " + (i || .25) + "s cubic-bezier(0,0," + (n || .5) + ",1)", r.DomEvent.on(t, r.DomUtil.TRANSITION_END, this._onTransitionEnd, this), r.DomUtil.setPosition(t, e), r.Util.falseFn(t.offsetWidth), this._stepTimer = setInterval(r.bind(this._onStep, this), 50) }, stop: function () { this._inProgress && (r.DomUtil.setPosition(this._el, this._getPos()), this._onTransitionEnd(), r.Util.falseFn(this._el.offsetWidth)) }, _onStep: function () { var t = this._getPos(); t ? (this._el._leaflet_pos = t, this.fire("step")) : this._onTransitionEnd() }, _transformRe: /([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/, _getPos: function () { var t, i, n, o = this._el, s = e.getComputedStyle(o); if (r.Browser.any3d) { if (!(n = s[r.DomUtil.TRANSFORM].match(this._transformRe))) return; t = parseFloat(n[1]), i = parseFloat(n[2]) } else t = parseFloat(s.left), i = parseFloat(s.top); return new r.Point(t, i, !0) }, _onTransitionEnd: function () { r.DomEvent.off(this._el, r.DomUtil.TRANSITION_END, this._onTransitionEnd, this), this._inProgress && (this._inProgress = !1, this._el.style[r.DomUtil.TRANSITION] = "", this._el._leaflet_pos = this._newPos, clearInterval(this._stepTimer), this.fire("step").fire("end")) } }), r.Map.include({ setView: function (t, e, i) { if ((e = void 0 === e ? this._zoom : this._limitZoom(e), t = this._limitCenter(r.latLng(t), e, this.options.maxBounds), i = i || {}, this._panAnim && this._panAnim.stop(), this._loaded && !i.reset && !0 !== i) && (void 0 !== i.animate && (i.zoom = r.extend({ animate: i.animate }, i.zoom), i.pan = r.extend({ animate: i.animate }, i.pan)), this._zoom !== e ? this._tryAnimatedZoom && this._tryAnimatedZoom(t, e, i.zoom) : this._tryAnimatedPan(t, i.pan))) return clearTimeout(this._sizeTimer), this; return this._resetView(t, e), this }, panBy: function (t, e) { if (e = e || {}, !(t = r.point(t).round()).x && !t.y) return this; if (this._panAnim || (this._panAnim = new r.PosAnimation, this._panAnim.on({ step: this._onPanTransitionStep, end: this._onPanTransitionEnd }, this)), e.noMoveStart || this.fire("movestart"), !1 !== e.animate) { r.DomUtil.addClass(this._mapPane, "leaflet-pan-anim"); var i = this._getMapPanePos().subtract(t); this._panAnim.run(this._mapPane, i, e.duration || .25, e.easeLinearity) } else this._rawPanBy(t), this.fire("move").fire("moveend"); return this }, _onPanTransitionStep: function () { this.fire("move") }, _onPanTransitionEnd: function () { r.DomUtil.removeClass(this._mapPane, "leaflet-pan-anim"), this.fire("moveend") }, _tryAnimatedPan: function (t, e) { var i = this._getCenterOffset(t)._floor(); return !(!0 !== (e && e.animate) && !this.getSize().contains(i)) && (this.panBy(i, e), !0) } }), r.PosAnimation = r.DomUtil.TRANSITION ? r.PosAnimation : r.PosAnimation.extend({ run: function (t, e, i, n) { this.stop(), this._el = t, this._inProgress = !0, this._duration = i || .25, this._easeOutPower = 1 / Math.max(n || .5, .2), this._startPos = r.DomUtil.getPosition(t), this._offset = e.subtract(this._startPos), this._startTime = +new Date, this.fire("start"), this._animate() }, stop: function () { this._inProgress && (this._step(), this._complete()) }, _animate: function () { this._animId = r.Util.requestAnimFrame(this._animate, this), this._step() }, _step: function () { var t = +new Date - this._startTime, e = 1e3 * this._duration; t < e ? this._runFrame(this._easeOut(t / e)) : (this._runFrame(1), this._complete()) }, _runFrame: function (t) { var e = this._startPos.add(this._offset.multiplyBy(t)); r.DomUtil.setPosition(this._el, e), this.fire("step") }, _complete: function () { r.Util.cancelAnimFrame(this._animId), this._inProgress = !1, this.fire("end") }, _easeOut: function (t) { return 1 - Math.pow(1 - t, this._easeOutPower) } }), r.Map.mergeOptions({ zoomAnimation: !0, zoomAnimationThreshold: 4 }), r.DomUtil.TRANSITION && r.Map.addInitHook(function () { this._zoomAnimated = this.options.zoomAnimation && r.DomUtil.TRANSITION && r.Browser.any3d && !r.Browser.android23 && !r.Browser.mobileOpera, this._zoomAnimated && r.DomEvent.on(this._mapPane, r.DomUtil.TRANSITION_END, this._catchTransitionEnd, this) }), r.Map.include(r.DomUtil.TRANSITION ? { _catchTransitionEnd: function (t) { this._animatingZoom && t.propertyName.indexOf("transform") >= 0 && this._onZoomTransitionEnd() }, _nothingToAnimate: function () { return !this._container.getElementsByClassName("leaflet-zoom-animated").length }, _tryAnimatedZoom: function (t, e, i) { if (this._animatingZoom) return !0; if (i = i || {}, !this._zoomAnimated || !1 === i.animate || this._nothingToAnimate() || Math.abs(e - this._zoom) > this.options.zoomAnimationThreshold) return !1; var n = this.getZoomScale(e), o = this._getCenterOffset(t)._divideBy(1 - 1 / n), s = this._getCenterLayerPoint()._add(o); return !(!0 !== i.animate && !this.getSize().contains(o)) && (this.fire("movestart").fire("zoomstart"), this._animateZoom(t, e, s, n, null, !0), !0) }, _animateZoom: function (t, e, i, n, o, s, a) { a || (this._animatingZoom = !0), r.DomUtil.addClass(this._mapPane, "leaflet-zoom-anim"), this._animateToCenter = t, this._animateToZoom = e, r.Draggable && (r.Draggable._disabled = !0), r.Util.requestAnimFrame(function () { this.fire("zoomanim", { center: t, zoom: e, origin: i, scale: n, delta: o, backwards: s }), setTimeout(r.bind(this._onZoomTransitionEnd, this), 250) }, this) }, _onZoomTransitionEnd: function () { this._animatingZoom && (this._animatingZoom = !1, r.DomUtil.removeClass(this._mapPane, "leaflet-zoom-anim"), r.Util.requestAnimFrame(function () { this._resetView(this._animateToCenter, this._animateToZoom, !0, !0), r.Draggable && (r.Draggable._disabled = !1) }, this)) } } : {}), r.TileLayer.include({ _animateZoom: function (t) { this._animating || (this._animating = !0, this._prepareBgBuffer()); var e = this._bgBuffer, i = r.DomUtil.TRANSFORM, n = t.delta ? r.DomUtil.getTranslateString(t.delta) : e.style[i], o = r.DomUtil.getScaleString(t.scale, t.origin); e.style[i] = t.backwards ? o + " " + n : n + " " + o }, _endZoomAnim: function () { var t = this._tileContainer, e = this._bgBuffer; t.style.visibility = "", t.parentNode.appendChild(t), r.Util.falseFn(e.offsetWidth); var i = this._map.getZoom(); (i > this.options.maxZoom || i < this.options.minZoom) && this._clearBgBuffer(), this._animating = !1 }, _clearBgBuffer: function () { var t = this._map; !t || t._animatingZoom || t.touchZoom._zooming || (this._bgBuffer.innerHTML = "", this._bgBuffer.style[r.DomUtil.TRANSFORM] = "") }, _prepareBgBuffer: function () { var t = this._tileContainer, e = this._bgBuffer, i = this._getLoadedTilesPercentage(e), n = this._getLoadedTilesPercentage(t); if (e && i > .5 && n < .5) return t.style.visibility = "hidden", void this._stopLoadingImages(t); e.style.visibility = "hidden", e.style[r.DomUtil.TRANSFORM] = "", this._tileContainer = e, e = this._bgBuffer = t, this._stopLoadingImages(e), clearTimeout(this._clearBgBufferTimer) }, _getLoadedTilesPercentage: function (t) { var e, i, n = t.getElementsByTagName("img"), o = 0; for (e = 0, i = n.length; e < i; e++)n[e].complete && o++; return o / i }, _stopLoadingImages: function (t) { var e, i, n, o = Array.prototype.slice.call(t.getElementsByTagName("img")); for (e = 0, i = o.length; e < i; e++)(n = o[e]).complete || (n.onload = r.Util.falseFn, n.onerror = r.Util.falseFn, n.src = r.Util.emptyImageUrl, n.parentNode.removeChild(n)) } }), r.Map.include({ _defaultLocateOptions: { watch: !1, setView: !1, maxZoom: 1 / 0, timeout: 1e4, maximumAge: 0, enableHighAccuracy: !1 }, locate: function (t) { if (t = this._locateOptions = r.extend(this._defaultLocateOptions, t), !navigator.geolocation) return this._handleGeolocationError({ code: 0, message: "Geolocation not supported." }), this; var e = r.bind(this._handleGeolocationResponse, this), i = r.bind(this._handleGeolocationError, this); return t.watch ? this._locationWatchId = navigator.geolocation.watchPosition(e, i, t) : navigator.geolocation.getCurrentPosition(e, i, t), this }, stopLocate: function () { return navigator.geolocation && navigator.geolocation.clearWatch(this._locationWatchId), this._locateOptions && (this._locateOptions.setView = !1), this }, _handleGeolocationError: function (t) { var e = t.code, i = t.message || (1 === e ? "permission denied" : 2 === e ? "position unavailable" : "timeout"); this._locateOptions.setView && !this._loaded && this.fitWorld(), this.fire("locationerror", { code: e, message: "Geolocation error: " + i + "." }) }, _handleGeolocationResponse: function (t) { var e = t.coords.latitude, i = t.coords.longitude, n = new r.LatLng(e, i), o = 180 * t.coords.accuracy / 40075017, s = o / Math.cos(r.LatLng.DEG_TO_RAD * e), a = r.latLngBounds([e - o, i - s], [e + o, i + s]), l = this._locateOptions; if (l.setView) { var h = Math.min(this.getBoundsZoom(a), l.maxZoom); this.setView(n, h) } var u = { latlng: n, bounds: a, timestamp: t.timestamp }; for (var c in t.coords) "number" == typeof t.coords[c] && (u[c] = t.coords[c]); this.fire("locationfound", u) } }) }(window, document) }, TLA3: function (t, e) { }, Wscr: function (t, e, i) { "use strict"; var n = i("Mh0C"), o = i("mnpd"), s = i("IOTA"), a = i("qHKS"), r = i("o260"), l = i("+1e3"), h = i("YEC+"), u = i("EaSt"), c = i("P/xu"), p = i("CQym"); L.mapbox = t.exports = { VERSION: i("XtVE").version, geocoder: i("waUh"), marker: i("jO/I"), simplestyle: i("KSbk"), tileLayer: l.tileLayer, TileLayer: l.TileLayer, styleLayer: p.styleLayer, StyleLayer: p.StyleLayer, infoControl: h.infoControl, InfoControl: h.InfoControl, shareControl: r.shareControl, ShareControl: r.ShareControl, legendControl: a.legendControl, LegendControl: a.LegendControl, geocoderControl: n.geocoderControl, GeocoderControl: n.GeocoderControl, gridControl: o.gridControl, GridControl: o.GridControl, gridLayer: c.gridLayer, GridLayer: c.GridLayer, featureLayer: s.featureLayer, FeatureLayer: s.FeatureLayer, map: u.map, Map: u.Map, config: i("ZpjM"), sanitize: i("1FN7"), template: i("60t1").to_html, feedback: i("gzzj") }, window.L.Icon.Default.imagePath = ("https:" === document.location.protocol || "http:" === document.location.protocol ? "" : "https:") + "//api.tiles.mapbox.com/mapbox.js/v" + i("XtVE").version + "/images" }, XtVE: function (t, e) { t.exports = { author: "Mapbox", name: "mapbox.js", description: "mapbox javascript api", version: "2.4.0", homepage: "http://mapbox.com/", repository: { type: "git", url: "git://github.com/mapbox/mapbox.js.git" }, main: "src/index.js", dependencies: { corslite: "0.0.6", isarray: "0.0.1", leaflet: "0.7.7", mustache: "2.2.1", "sanitize-caja": "0.1.3" }, scripts: { test: "eslint --no-eslintrc -c .eslintrc src && mocha-phantomjs test/index.html" }, license: "BSD-3-Clause", devDependencies: { browserify: "^13.0.0", "clean-css": "~2.0.7", eslint: "^0.23.0", "expect.js": "0.3.1", happen: "0.1.3", "leaflet-fullscreen": "0.0.4", "leaflet-hash": "0.2.1", marked: "~0.3.0", minifyify: "^6.1.0", minimist: "0.0.5", mocha: "2.4.5", "mocha-phantomjs": "4.0.2", sinon: "1.10.2" }, optionalDependencies: {}, engines: { node: "*" }, _resolved: "https://npm.d.musta.ch/mapbox.js/-/mapbox.js-2.4.0.tgz", _integrity: "sha512-fBXGOsanSURrhcTwzn2uYgFRqGzpC6NgHOfGcn2TRetMjuYeBNd8O8bmvCpC/FpUdE80KTNxf/YabFLkyjvbLQ==", _from: "mapbox.js@2.4.0" } }, "YEC+": function (t, e, i) { "use strict"; var n = L.Control.extend({ options: { position: "bottomright", sanitizer: i("1FN7") }, initialize: function (t) { L.setOptions(this, t), this._info = {}, console.warn("infoControl has been deprecated and will be removed in mapbox.js v3.0.0. Use the default attribution control instead, which is now responsive.") }, onAdd: function (t) { this._container = L.DomUtil.create("div", "mapbox-control-info mapbox-small"), this._content = L.DomUtil.create("div", "map-info-container", this._container); var e = L.DomUtil.create("a", "mapbox-info-toggle mapbox-icon mapbox-icon-info", this._container); for (var i in e.href = "#", L.DomEvent.addListener(e, "click", this._showInfo, this), L.DomEvent.disableClickPropagation(this._container), t._layers) t._layers[i].getAttribution && this.addInfo(t._layers[i].getAttribution()); return t.on("layeradd", this._onLayerAdd, this).on("layerremove", this._onLayerRemove, this), this._update(), this._container }, onRemove: function (t) { t.off("layeradd", this._onLayerAdd, this).off("layerremove", this._onLayerRemove, this) }, addInfo: function (t) { return t ? (this._info[t] || (this._info[t] = 0), this._info[t] = !0, this._update()) : this }, removeInfo: function (t) { return t ? (this._info[t] && (this._info[t] = !1), this._update()) : this }, _showInfo: function (t) { if (L.DomEvent.preventDefault(t), !0 === this._active) return this._hidecontent(); L.DomUtil.addClass(this._container, "active"), this._active = !0, this._update() }, _hidecontent: function () { this._content.innerHTML = "", this._active = !1, L.DomUtil.removeClass(this._container, "active") }, _update: function () { if (!this._map) return this; this._content.innerHTML = ""; var t = "none", e = []; for (var i in this._info) this._info.hasOwnProperty(i) && this._info[i] && (e.push(this.options.sanitizer(i)), t = "block"); return this._content.innerHTML += e.join(" | "), this._container.style.display = t, this }, _onLayerAdd: function (t) { t.layer.getAttribution && t.layer.getAttribution() ? this.addInfo(t.layer.getAttribution()) : "on" in t.layer && t.layer.getAttribution && t.layer.on("ready", L.bind(function () { this.addInfo(t.layer.getAttribution()) }, this)) }, _onLayerRemove: function (t) { t.layer.getAttribution && this.removeInfo(t.layer.getAttribution()) } }); t.exports.InfoControl = n, t.exports.infoControl = function (t) { return new n(t) } }, ZoVb: function (t, e, i) { var n = function () { function t(t) { var e = ("" + t).match(c); return e ? new h(u(e[1]), u(e[2]), u(e[3]), u(e[4]), u(e[5]), u(e[6]), u(e[7])) : null } function e(t) { return "string" == typeof t ? encodeURIComponent(t) : null } function i(t, e) { return "string" == typeof t ? encodeURI(t).replace(e, n) : null } function n(t) { var e = t.charCodeAt(0); return "%" + "0123456789ABCDEF".charAt(e >> 4 & 15) + "0123456789ABCDEF".charAt(15 & e) } var o = new RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"), s = new RegExp(o), a = /^(?:\.\.\/)*(?:\.\.$)?/; function r(t) { if (null === t) return null; for (var e, i = function (t) { return t.replace(/(^|\/)\.(?:\/|$)/g, "$1").replace(/\/{2,}/g, "/") }(t), n = s; (e = i.replace(n, "$1")) != i; i = e); return i } function l(t, e) { var i = t.clone(), n = e.hasScheme(); n ? i.setRawScheme(e.getRawScheme()) : n = e.hasCredentials(), n ? i.setRawCredentials(e.getRawCredentials()) : n = e.hasDomain(), n ? i.setRawDomain(e.getRawDomain()) : n = e.hasPort(); var o = e.getRawPath(), s = r(o); if (n) i.setPort(e.getPort()), s = s && s.replace(a, ""); else if (n = !!o) { if (47 !== s.charCodeAt(0)) { var l = r(i.getRawPath() || "").replace(a, ""), h = l.lastIndexOf("/") + 1; s = r((h ? l.substring(0, h) : "") + r(o)).replace(a, "") } } else (s = s && s.replace(a, "")) !== o && i.setRawPath(s); return n ? i.setRawPath(s) : n = e.hasQuery(), n ? i.setRawQuery(e.getRawQuery()) : n = e.hasFragment(), n && i.setRawFragment(e.getRawFragment()), i } function h(t, e, i, n, o, s, a) { this.scheme_ = t, this.credentials_ = e, this.domain_ = i, this.port_ = n, this.path_ = o, this.query_ = s, this.fragment_ = a, this.paramCache_ = null } function u(t) { return "string" == typeof t && t.length > 0 ? t : null } h.prototype.toString = function () { var t = []; return null !== this.scheme_ && t.push(this.scheme_, ":"), null !== this.domain_ && (t.push("//"), null !== this.credentials_ && t.push(this.credentials_, "@"), t.push(this.domain_), null !== this.port_ && t.push(":", this.port_.toString())), null !== this.path_ && t.push(this.path_), null !== this.query_ && t.push("?", this.query_), null !== this.fragment_ && t.push("#", this.fragment_), t.join("") }, h.prototype.clone = function () { return new h(this.scheme_, this.credentials_, this.domain_, this.port_, this.path_, this.query_, this.fragment_) }, h.prototype.getScheme = function () { return this.scheme_ && decodeURIComponent(this.scheme_).toLowerCase() }, h.prototype.getRawScheme = function () { return this.scheme_ }, h.prototype.setScheme = function (t) { return this.scheme_ = i(t, p), this }, h.prototype.setRawScheme = function (t) { return this.scheme_ = t || null, this }, h.prototype.hasScheme = function () { return null !== this.scheme_ }, h.prototype.getCredentials = function () { return this.credentials_ && decodeURIComponent(this.credentials_) }, h.prototype.getRawCredentials = function () { return this.credentials_ }, h.prototype.setCredentials = function (t) { return this.credentials_ = i(t, p), this }, h.prototype.setRawCredentials = function (t) { return this.credentials_ = t || null, this }, h.prototype.hasCredentials = function () { return null !== this.credentials_ }, h.prototype.getDomain = function () { return this.domain_ && decodeURIComponent(this.domain_) }, h.prototype.getRawDomain = function () { return this.domain_ }, h.prototype.setDomain = function (t) { return this.setRawDomain(t && encodeURIComponent(t)) }, h.prototype.setRawDomain = function (t) { return this.domain_ = t || null, this.setRawPath(this.path_) }, h.prototype.hasDomain = function () { return null !== this.domain_ }, h.prototype.getPort = function () { return this.port_ && decodeURIComponent(this.port_) }, h.prototype.setPort = function (t) { if (t) { if ((t = Number(t)) !== (65535 & t)) throw new Error("Bad port number " + t); this.port_ = "" + t } else this.port_ = null; return this }, h.prototype.hasPort = function () { return null !== this.port_ }, h.prototype.getPath = function () { return this.path_ && decodeURIComponent(this.path_) }, h.prototype.getRawPath = function () { return this.path_ }, h.prototype.setPath = function (t) { return this.setRawPath(i(t, d)) }, h.prototype.setRawPath = function (t) { return t ? (t = String(t), this.path_ = !this.domain_ || /^\//.test(t) ? t : "/" + t) : this.path_ = null, this }, h.prototype.hasPath = function () { return null !== this.path_ }, h.prototype.getQuery = function () { return this.query_ && decodeURIComponent(this.query_).replace(/\+/g, " ") }, h.prototype.getRawQuery = function () { return this.query_ }, h.prototype.setQuery = function (t) { return this.paramCache_ = null, this.query_ = e(t), this }, h.prototype.setRawQuery = function (t) { return this.paramCache_ = null, this.query_ = t || null, this }, h.prototype.hasQuery = function () { return null !== this.query_ }, h.prototype.setAllParameters = function (t) { if ("object" == typeof t && !(t instanceof Array) && (t instanceof Object || "[object Array]" !== Object.prototype.toString.call(t))) { var e = [], i = -1; for (var n in t) { "string" == typeof (r = t[n]) && (e[++i] = n, e[++i] = r) } t = e } this.paramCache_ = null; for (var o = [], s = "", a = 0; a < t.length;) { n = t[a++]; var r = t[a++]; o.push(s, encodeURIComponent(n.toString())), s = "&", r && o.push("=", encodeURIComponent(r.toString())) } return this.query_ = o.join(""), this }, h.prototype.checkParameterCache_ = function () { if (!this.paramCache_) { var t = this.query_; if (t) { for (var e = t.split(/[&\?]/), i = [], n = -1, o = 0; o < e.length; ++o) { var s = e[o].match(/^([^=]*)(?:=(.*))?$/); i[++n] = decodeURIComponent(s[1]).replace(/\+/g, " "), i[++n] = decodeURIComponent(s[2] || "").replace(/\+/g, " ") } this.paramCache_ = i } else this.paramCache_ = [] } }, h.prototype.setParameterValues = function (t, e) { "string" == typeof e && (e = [e]), this.checkParameterCache_(); for (var i = 0, n = this.paramCache_, o = [], s = 0; s < n.length; s += 2)t === n[s] ? i < e.length && o.push(t, e[i++]) : o.push(n[s], n[s + 1]); for (; i < e.length;)o.push(t, e[i++]); return this.setAllParameters(o), this }, h.prototype.removeParameter = function (t) { return this.setParameterValues(t, []) }, h.prototype.getAllParameters = function () { return this.checkParameterCache_(), this.paramCache_.slice(0, this.paramCache_.length) }, h.prototype.getParameterValues = function (t) { this.checkParameterCache_(); for (var e = [], i = 0; i < this.paramCache_.length; i += 2)t === this.paramCache_[i] && e.push(this.paramCache_[i + 1]); return e }, h.prototype.getParameterMap = function (t) { this.checkParameterCache_(); for (var e = {}, i = 0; i < this.paramCache_.length; i += 2) { var n = this.paramCache_[i++], o = this.paramCache_[i++]; n in e ? e[n].push(o) : e[n] = [o] } return e }, h.prototype.getParameterValue = function (t) { this.checkParameterCache_(); for (var e = 0; e < this.paramCache_.length; e += 2)if (t === this.paramCache_[e]) return this.paramCache_[e + 1]; return null }, h.prototype.getFragment = function () { return this.fragment_ && decodeURIComponent(this.fragment_) }, h.prototype.getRawFragment = function () { return this.fragment_ }, h.prototype.setFragment = function (t) { return this.fragment_ = t ? encodeURIComponent(t) : null, this }, h.prototype.setRawFragment = function (t) { return this.fragment_ = t || null, this }, h.prototype.hasFragment = function () { return null !== this.fragment_ }; var c = new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"), p = /[#\/\?@]/g, d = /[\#\?]/g; return h.parse = t, h.create = function (t, o, s, a, r, l, u) { var c = new h(i(t, p), i(o, p), e(s), a > 0 ? a.toString() : null, i(r, d), null, e(u)); return l && ("string" == typeof l ? c.setRawQuery(l.replace(/[^?&=0-9A-Za-z_\-~.%]/g, n)) : c.setAllParameters(l)), c }, h.resolve = l, h.collapse_dots = r, h.utils = { mimeTypeOf: function (e) { var i = t(e); return /\.html$/.test(i.getPath()) ? "text/html" : "application/javascript" }, resolve: function (e, i) { return e ? l(t(e), t(i)).toString() : "" + i } }, h }(), o = { atype: { NONE: 0, URI: 1, URI_FRAGMENT: 11, SCRIPT: 2, STYLE: 3, HTML: 12, ID: 4, IDREF: 5, IDREFS: 6, GLOBAL_NAME: 7, LOCAL_NAME: 8, CLASSES: 9, FRAME_TARGET: 10, MEDIA_QUERY: 13 } }; if (o.atype = o.atype, o.ATTRIBS = { "*::class": 9, "*::dir": 0, "*::draggable": 0, "*::hidden": 0, "*::id": 4, "*::inert": 0, "*::itemprop": 0, "*::itemref": 6, "*::itemscope": 0, "*::lang": 0, "*::onblur": 2, "*::onchange": 2, "*::onclick": 2, "*::ondblclick": 2, "*::onfocus": 2, "*::onkeydown": 2, "*::onkeypress": 2, "*::onkeyup": 2, "*::onload": 2, "*::onmousedown": 2, "*::onmousemove": 2, "*::onmouseout": 2, "*::onmouseover": 2, "*::onmouseup": 2, "*::onreset": 2, "*::onscroll": 2, "*::onselect": 2, "*::onsubmit": 2, "*::onunload": 2, "*::spellcheck": 0, "*::style": 3, "*::title": 0, "*::translate": 0, "a::accesskey": 0, "a::coords": 0, "a::href": 1, "a::hreflang": 0, "a::name": 7, "a::onblur": 2, "a::onfocus": 2, "a::shape": 0, "a::tabindex": 0, "a::target": 10, "a::type": 0, "area::accesskey": 0, "area::alt": 0, "area::coords": 0, "area::href": 1, "area::nohref": 0, "area::onblur": 2, "area::onfocus": 2, "area::shape": 0, "area::tabindex": 0, "area::target": 10, "audio::controls": 0, "audio::loop": 0, "audio::mediagroup": 5, "audio::muted": 0, "audio::preload": 0, "bdo::dir": 0, "blockquote::cite": 1, "br::clear": 0, "button::accesskey": 0, "button::disabled": 0, "button::name": 8, "button::onblur": 2, "button::onfocus": 2, "button::tabindex": 0, "button::type": 0, "button::value": 0, "canvas::height": 0, "canvas::width": 0, "caption::align": 0, "col::align": 0, "col::char": 0, "col::charoff": 0, "col::span": 0, "col::valign": 0, "col::width": 0, "colgroup::align": 0, "colgroup::char": 0, "colgroup::charoff": 0, "colgroup::span": 0, "colgroup::valign": 0, "colgroup::width": 0, "command::checked": 0, "command::command": 5, "command::disabled": 0, "command::icon": 1, "command::label": 0, "command::radiogroup": 0, "command::type": 0, "data::value": 0, "del::cite": 1, "del::datetime": 0, "details::open": 0, "dir::compact": 0, "div::align": 0, "dl::compact": 0, "fieldset::disabled": 0, "font::color": 0, "font::face": 0, "font::size": 0, "form::accept": 0, "form::action": 1, "form::autocomplete": 0, "form::enctype": 0, "form::method": 0, "form::name": 7, "form::novalidate": 0, "form::onreset": 2, "form::onsubmit": 2, "form::target": 10, "h1::align": 0, "h2::align": 0, "h3::align": 0, "h4::align": 0, "h5::align": 0, "h6::align": 0, "hr::align": 0, "hr::noshade": 0, "hr::size": 0, "hr::width": 0, "iframe::align": 0, "iframe::frameborder": 0, "iframe::height": 0, "iframe::marginheight": 0, "iframe::marginwidth": 0, "iframe::width": 0, "img::align": 0, "img::alt": 0, "img::border": 0, "img::height": 0, "img::hspace": 0, "img::ismap": 0, "img::name": 7, "img::src": 1, "img::usemap": 11, "img::vspace": 0, "img::width": 0, "input::accept": 0, "input::accesskey": 0, "input::align": 0, "input::alt": 0, "input::autocomplete": 0, "input::checked": 0, "input::disabled": 0, "input::inputmode": 0, "input::ismap": 0, "input::list": 5, "input::max": 0, "input::maxlength": 0, "input::min": 0, "input::multiple": 0, "input::name": 8, "input::onblur": 2, "input::onchange": 2, "input::onfocus": 2, "input::onselect": 2, "input::placeholder": 0, "input::readonly": 0, "input::required": 0, "input::size": 0, "input::src": 1, "input::step": 0, "input::tabindex": 0, "input::type": 0, "input::usemap": 11, "input::value": 0, "ins::cite": 1, "ins::datetime": 0, "label::accesskey": 0, "label::for": 5, "label::onblur": 2, "label::onfocus": 2, "legend::accesskey": 0, "legend::align": 0, "li::type": 0, "li::value": 0, "map::name": 7, "menu::compact": 0, "menu::label": 0, "menu::type": 0, "meter::high": 0, "meter::low": 0, "meter::max": 0, "meter::min": 0, "meter::value": 0, "ol::compact": 0, "ol::reversed": 0, "ol::start": 0, "ol::type": 0, "optgroup::disabled": 0, "optgroup::label": 0, "option::disabled": 0, "option::label": 0, "option::selected": 0, "option::value": 0, "output::for": 6, "output::name": 8, "p::align": 0, "pre::width": 0, "progress::max": 0, "progress::min": 0, "progress::value": 0, "q::cite": 1, "select::autocomplete": 0, "select::disabled": 0, "select::multiple": 0, "select::name": 8, "select::onblur": 2, "select::onchange": 2, "select::onfocus": 2, "select::required": 0, "select::size": 0, "select::tabindex": 0, "source::type": 0, "table::align": 0, "table::bgcolor": 0, "table::border": 0, "table::cellpadding": 0, "table::cellspacing": 0, "table::frame": 0, "table::rules": 0, "table::summary": 0, "table::width": 0, "tbody::align": 0, "tbody::char": 0, "tbody::charoff": 0, "tbody::valign": 0, "td::abbr": 0, "td::align": 0, "td::axis": 0, "td::bgcolor": 0, "td::char": 0, "td::charoff": 0, "td::colspan": 0, "td::headers": 6, "td::height": 0, "td::nowrap": 0, "td::rowspan": 0, "td::scope": 0, "td::valign": 0, "td::width": 0, "textarea::accesskey": 0, "textarea::autocomplete": 0, "textarea::cols": 0, "textarea::disabled": 0, "textarea::inputmode": 0, "textarea::name": 8, "textarea::onblur": 2, "textarea::onchange": 2, "textarea::onfocus": 2, "textarea::onselect": 2, "textarea::placeholder": 0, "textarea::readonly": 0, "textarea::required": 0, "textarea::rows": 0, "textarea::tabindex": 0, "textarea::wrap": 0, "tfoot::align": 0, "tfoot::char": 0, "tfoot::charoff": 0, "tfoot::valign": 0, "th::abbr": 0, "th::align": 0, "th::axis": 0, "th::bgcolor": 0, "th::char": 0, "th::charoff": 0, "th::colspan": 0, "th::headers": 6, "th::height": 0, "th::nowrap": 0, "th::rowspan": 0, "th::scope": 0, "th::valign": 0, "th::width": 0, "thead::align": 0, "thead::char": 0, "thead::charoff": 0, "thead::valign": 0, "tr::align": 0, "tr::bgcolor": 0, "tr::char": 0, "tr::charoff": 0, "tr::valign": 0, "track::default": 0, "track::kind": 0, "track::label": 0, "track::srclang": 0, "ul::compact": 0, "ul::type": 0, "video::controls": 0, "video::height": 0, "video::loop": 0, "video::mediagroup": 5, "video::muted": 0, "video::poster": 1, "video::preload": 0, "video::width": 0 }, o.ATTRIBS = o.ATTRIBS, o.eflags = { OPTIONAL_ENDTAG: 1, EMPTY: 2, CDATA: 4, RCDATA: 8, UNSAFE: 16, FOLDABLE: 32, SCRIPT: 64, STYLE: 128, VIRTUALIZED: 256 }, o.eflags = o.eflags, o.ELEMENTS = { a: 0, abbr: 0, acronym: 0, address: 0, applet: 272, area: 2, article: 0, aside: 0, audio: 0, b: 0, base: 274, basefont: 274, bdi: 0, bdo: 0, big: 0, blockquote: 0, body: 305, br: 2, button: 0, canvas: 0, caption: 0, center: 0, cite: 0, code: 0, col: 2, colgroup: 1, command: 2, data: 0, datalist: 0, dd: 1, del: 0, details: 0, dfn: 0, dialog: 272, dir: 0, div: 0, dl: 0, dt: 1, em: 0, fieldset: 0, figcaption: 0, figure: 0, font: 0, footer: 0, form: 0, frame: 274, frameset: 272, h1: 0, h2: 0, h3: 0, h4: 0, h5: 0, h6: 0, head: 305, header: 0, hgroup: 0, hr: 2, html: 305, i: 0, iframe: 16, img: 2, input: 2, ins: 0, isindex: 274, kbd: 0, keygen: 274, label: 0, legend: 0, li: 1, link: 274, map: 0, mark: 0, menu: 0, meta: 274, meter: 0, nav: 0, nobr: 0, noembed: 276, noframes: 276, noscript: 276, object: 272, ol: 0, optgroup: 0, option: 1, output: 0, p: 1, param: 274, pre: 0, progress: 0, q: 0, s: 0, samp: 0, script: 84, section: 0, select: 0, small: 0, source: 2, span: 0, strike: 0, strong: 0, style: 148, sub: 0, summary: 0, sup: 0, table: 0, tbody: 1, td: 1, textarea: 8, tfoot: 1, th: 1, thead: 1, time: 0, title: 280, tr: 1, track: 2, tt: 0, u: 0, ul: 0, var: 0, video: 0, wbr: 2 }, o.ELEMENTS = o.ELEMENTS, o.ELEMENT_DOM_INTERFACES = { a: "HTMLAnchorElement", abbr: "HTMLElement", acronym: "HTMLElement", address: "HTMLElement", applet: "HTMLAppletElement", area: "HTMLAreaElement", article: "HTMLElement", aside: "HTMLElement", audio: "HTMLAudioElement", b: "HTMLElement", base: "HTMLBaseElement", basefont: "HTMLBaseFontElement", bdi: "HTMLElement", bdo: "HTMLElement", big: "HTMLElement", blockquote: "HTMLQuoteElement", body: "HTMLBodyElement", br: "HTMLBRElement", button: "HTMLButtonElement", canvas: "HTMLCanvasElement", caption: "HTMLTableCaptionElement", center: "HTMLElement", cite: "HTMLElement", code: "HTMLElement", col: "HTMLTableColElement", colgroup: "HTMLTableColElement", command: "HTMLCommandElement", data: "HTMLElement", datalist: "HTMLDataListElement", dd: "HTMLElement", del: "HTMLModElement", details: "HTMLDetailsElement", dfn: "HTMLElement", dialog: "HTMLDialogElement", dir: "HTMLDirectoryElement", div: "HTMLDivElement", dl: "HTMLDListElement", dt: "HTMLElement", em: "HTMLElement", fieldset: "HTMLFieldSetElement", figcaption: "HTMLElement", figure: "HTMLElement", font: "HTMLFontElement", footer: "HTMLElement", form: "HTMLFormElement", frame: "HTMLFrameElement", frameset: "HTMLFrameSetElement", h1: "HTMLHeadingElement", h2: "HTMLHeadingElement", h3: "HTMLHeadingElement", h4: "HTMLHeadingElement", h5: "HTMLHeadingElement", h6: "HTMLHeadingElement", head: "HTMLHeadElement", header: "HTMLElement", hgroup: "HTMLElement", hr: "HTMLHRElement", html: "HTMLHtmlElement", i: "HTMLElement", iframe: "HTMLIFrameElement", img: "HTMLImageElement", input: "HTMLInputElement", ins: "HTMLModElement", isindex: "HTMLUnknownElement", kbd: "HTMLElement", keygen: "HTMLKeygenElement", label: "HTMLLabelElement", legend: "HTMLLegendElement", li: "HTMLLIElement", link: "HTMLLinkElement", map: "HTMLMapElement", mark: "HTMLElement", menu: "HTMLMenuElement", meta: "HTMLMetaElement", meter: "HTMLMeterElement", nav: "HTMLElement", nobr: "HTMLElement", noembed: "HTMLElement", noframes: "HTMLElement", noscript: "HTMLElement", object: "HTMLObjectElement", ol: "HTMLOListElement", optgroup: "HTMLOptGroupElement", option: "HTMLOptionElement", output: "HTMLOutputElement", p: "HTMLParagraphElement", param: "HTMLParamElement", pre: "HTMLPreElement", progress: "HTMLProgressElement", q: "HTMLQuoteElement", s: "HTMLElement", samp: "HTMLElement", script: "HTMLScriptElement", section: "HTMLElement", select: "HTMLSelectElement", small: "HTMLElement", source: "HTMLSourceElement", span: "HTMLSpanElement", strike: "HTMLElement", strong: "HTMLElement", style: "HTMLStyleElement", sub: "HTMLElement", summary: "HTMLElement", sup: "HTMLElement", table: "HTMLTableElement", tbody: "HTMLTableSectionElement", td: "HTMLTableDataCellElement", textarea: "HTMLTextAreaElement", tfoot: "HTMLTableSectionElement", th: "HTMLTableHeaderCellElement", thead: "HTMLTableSectionElement", time: "HTMLTimeElement", title: "HTMLTitleElement", tr: "HTMLTableRowElement", track: "HTMLTrackElement", tt: "HTMLElement", u: "HTMLElement", ul: "HTMLUListElement", var: "HTMLElement", video: "HTMLVideoElement", wbr: "HTMLElement" }, o.ELEMENT_DOM_INTERFACES = o.ELEMENT_DOM_INTERFACES, o.ueffects = { NOT_LOADED: 0, SAME_DOCUMENT: 1, NEW_DOCUMENT: 2 }, o.ueffects = o.ueffects, o.URIEFFECTS = { "a::href": 2, "area::href": 2, "blockquote::cite": 0, "command::icon": 1, "del::cite": 0, "form::action": 2, "img::src": 1, "input::src": 1, "ins::cite": 0, "q::cite": 0, "video::poster": 1 }, o.URIEFFECTS = o.URIEFFECTS, o.ltypes = { UNSANDBOXED: 2, SANDBOXED: 1, DATA: 0 }, o.ltypes = o.ltypes, o.LOADERTYPES = { "a::href": 2, "area::href": 2, "blockquote::cite": 2, "command::icon": 1, "del::cite": 2, "form::action": 2, "img::src": 1, "input::src": 1, "ins::cite": 2, "q::cite": 2, "video::poster": 1 }, o.LOADERTYPES = o.LOADERTYPES, "i" !== "I".toLowerCase()) throw "I/i problem"; var s = function (t) { var e, i, o; e = window.parseCssDeclarations, i = window.sanitizeCssProperty, o = window.cssSchema; var s = { lt: "<", LT: "<", gt: ">", GT: ">", amp: "&", AMP: "&", quot: '"', apos: "'", nbsp: " " }, a = /^#(\d+)$/, r = /^#x([0-9A-Fa-f]+)$/, l = /^[A-Za-z][A-za-z0-9]+$/, h = window.document ? window.document.createElement("textarea") : null; function u(t, e) { return function (t) { if (s.hasOwnProperty(t)) return s[t]; var e = t.match(a); if (e) return String.fromCharCode(parseInt(e[1], 10)); if (e = t.match(r)) return String.fromCharCode(parseInt(e[1], 16)); if (h && l.test(t)) { h.innerHTML = "&" + t + ";"; var i = h.textContent; return s[t] = i, i } return "&" + t + ";" }(e) } var c = /\0/g; var p = /&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g, d = /^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/; function m(t) { return t.replace(p, u) } var f = /&/g, _ = /&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi, g = /[<]/g, v = />/g, y = /\"/g; function L(t) { return ("" + t).replace(f, "&amp;").replace(g, "&lt;").replace(v, "&gt;").replace(y, "&#34;") } function b(t) { return t.replace(_, "&amp;$1").replace(g, "&lt;").replace(v, "&gt;") } var T = new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?", "i"), P = 3 === "a,b".split(/(,)/).length, x = t.eflags.CDATA | t.eflags.RCDATA; function E(t) { var e = { cdata: t.cdata || t.cdata, comment: t.comment || t.comment, endDoc: t.endDoc || t.endDoc, endTag: t.endTag || t.endTag, pcdata: t.pcdata || t.pcdata, rcdata: t.rcdata || t.rcdata, startDoc: t.startDoc || t.startDoc, startTag: t.startTag || t.startTag }; return function (t, i) { return function (t, e, i) { var n = function (t) { var e = /(<\/|<\!--|<[!?]|[&<>])/g; if (t += "", P) return t.split(e); for (var i, n = [], o = 0; null !== (i = e.exec(t));)n.push(t.substring(o, i.index)), n.push(i[0]), o = i.index + i[0].length; return n.push(t.substring(o)), n }(t); M(e, n, 0, { noMoreGT: !1, noMoreEndComments: !1 }, i) }(t, e, i) } } var w = {}; function C(t, e, i, n, o) { return function () { M(t, e, i, n, o) } } function M(e, i, n, o, s) { try { var a, r, l; e.startDoc && 0 == n && e.startDoc(s); for (var h = n, u = i.length; h < u;) { var c = i[h++], p = i[h]; switch (c) { case "&": d.test(p) ? (e.pcdata && e.pcdata("&" + p, s, w, C(e, i, h, o, s)), h++) : e.pcdata && e.pcdata("&amp;", s, w, C(e, i, h, o, s)); break; case "</": (a = /^([-\w:]+)[^\'\"]*/.exec(p)) ? a[0].length === p.length && ">" === i[h + 1] ? (h += 2, l = a[1].toLowerCase(), e.endTag && e.endTag(l, s, w, C(e, i, h, o, s))) : h = D(i, h, e, s, w, o) : e.pcdata && e.pcdata("&lt;/", s, w, C(e, i, h, o, s)); break; case "<": if (a = /^([-\w:]+)\s*\/?/.exec(p)) if (a[0].length === p.length && ">" === i[h + 1]) { h += 2, l = a[1].toLowerCase(), e.startTag && e.startTag(l, [], s, w, C(e, i, h, o, s)); var m = t.ELEMENTS[l]; if (m & x) h = A(i, { name: l, next: h, eflags: m }, e, s, w, o) } else h = S(i, h, e, s, w, o); else e.pcdata && e.pcdata("&lt;", s, w, C(e, i, h, o, s)); break; case "\x3c!--": if (!o.noMoreEndComments) { for (r = h + 1; r < u && (">" !== i[r] || !/--$/.test(i[r - 1])); r++); if (r < u) { if (e.comment) { var f = i.slice(h, r).join(""); e.comment(f.substr(0, f.length - 2), s, w, C(e, i, r + 1, o, s)) } h = r + 1 } else o.noMoreEndComments = !0 } o.noMoreEndComments && e.pcdata && e.pcdata("&lt;!--", s, w, C(e, i, h, o, s)); break; case "<!": if (/^\w/.test(p)) { if (!o.noMoreGT) { for (r = h + 1; r < u && ">" !== i[r]; r++); r < u ? h = r + 1 : o.noMoreGT = !0 } o.noMoreGT && e.pcdata && e.pcdata("&lt;!", s, w, C(e, i, h, o, s)) } else e.pcdata && e.pcdata("&lt;!", s, w, C(e, i, h, o, s)); break; case "<?": if (!o.noMoreGT) { for (r = h + 1; r < u && ">" !== i[r]; r++); r < u ? h = r + 1 : o.noMoreGT = !0 } o.noMoreGT && e.pcdata && e.pcdata("&lt;?", s, w, C(e, i, h, o, s)); break; case ">": e.pcdata && e.pcdata("&gt;", s, w, C(e, i, h, o, s)); break; case "": break; default: e.pcdata && e.pcdata(c, s, w, C(e, i, h, o, s)) } } e.endDoc && e.endDoc(s) } catch (t) { if (t !== w) throw t } } function D(t, e, i, n, o, s) { var a = U(t, e); return a ? (i.endTag && i.endTag(a.name, n, o, C(i, t, e, s, n)), a.next) : t.length } function S(t, e, i, n, o, s) { var a = U(t, e); return a ? (i.startTag && i.startTag(a.name, a.attrs, n, o, C(i, t, a.next, s, n)), a.eflags & x ? A(t, a, i, n, o, s) : a.next) : t.length } var k = {}; function A(e, i, n, o, s, a) { var r = e.length; k.hasOwnProperty(i.name) || (k[i.name] = new RegExp("^" + i.name + "(?:[\\s\\/]|$)", "i")); for (var l = k[i.name], h = i.next, u = i.next + 1; u < r && ("</" !== e[u - 1] || !l.test(e[u])); u++); u < r && (u -= 1); var c = e.slice(h, u).join(""); if (i.eflags & t.eflags.CDATA) n.cdata && n.cdata(c, o, s, C(n, e, u, a, o)); else { if (!(i.eflags & t.eflags.RCDATA)) throw new Error("bug"); n.rcdata && n.rcdata(b(c), o, s, C(n, e, u, a, o)) } return u } function U(e, i) { var n = /^([-\w:]+)/.exec(e[i]), o = {}; o.name = n[1].toLowerCase(), o.eflags = t.ELEMENTS[o.name]; for (var s = e[i].substr(n[0].length), a = i + 1, r = e.length; a < r && ">" !== e[a]; a++)s += e[a]; if (!(r <= a)) { for (var l = []; "" !== s;)if (n = T.exec(s)) { if (n[4] && !n[5] || n[6] && !n[7]) { for (var h = n[4] || n[6], u = !1, c = [s, e[a++]]; a < r; a++) { if (u) { if (">" === e[a]) break } else 0 <= e[a].indexOf(h) && (u = !0); c.push(e[a]) } if (r <= a) break; s = c.join(""); continue } var p = n[1].toLowerCase(), d = n[2] ? O(n[3]) : ""; l.push(p, d), s = s.substr(n[0].length) } else s = s.replace(/^[\s\S][^a-z\s]*/, ""); return o.attrs = l, o.next = a + 1, o } } function O(t) { var e = t.charCodeAt(0); return 34 !== e && 39 !== e || (t = t.substr(1, t.length - 2)), m(t.replace(c, "")) } function I(e) { var i, n, o = function (t, e) { n || e.push(t) }; return E({ startDoc: function (t) { i = [], n = !1 }, startTag: function (o, s, a) { if (!n && t.ELEMENTS.hasOwnProperty(o)) { var r = t.ELEMENTS[o]; if (!(r & t.eflags.FOLDABLE)) { var l = e(o, s); if (l) { if ("object" != typeof l) throw new Error("tagPolicy did not return object (old API?)"); if (!("attribs" in l)) throw new Error("tagPolicy gave no attribs"); var h, u; if (s = l.attribs, "tagName" in l ? (u = l.tagName, h = t.ELEMENTS[u]) : (u = o, h = r), r & t.eflags.OPTIONAL_ENDTAG) { var c = i[i.length - 1]; !c || c.orig !== o || c.rep === u && o === u || a.push("</", c.rep, ">") } r & t.eflags.EMPTY || i.push({ orig: o, rep: u }), a.push("<", u); for (var p = 0, d = s.length; p < d; p += 2) { var m = s[p], f = s[p + 1]; null != f && a.push(" ", m, '="', L(f), '"') } a.push(">"), r & t.eflags.EMPTY && !(h & t.eflags.EMPTY) && a.push("</", u, ">") } else n = !(r & t.eflags.EMPTY) } } }, endTag: function (e, o) { if (n) n = !1; else if (t.ELEMENTS.hasOwnProperty(e)) { var s = t.ELEMENTS[e]; if (!(s & (t.eflags.EMPTY | t.eflags.FOLDABLE))) { var a; if (s & t.eflags.OPTIONAL_ENDTAG) for (a = i.length; --a >= 0;) { var r = i[a].orig; if (r === e) break; if (!(t.ELEMENTS[r] & t.eflags.OPTIONAL_ENDTAG)) return } else for (a = i.length; --a >= 0 && i[a].orig !== e;); if (a < 0) return; for (var l = i.length; --l > a;) { var h = i[l].rep; t.ELEMENTS[h] & t.eflags.OPTIONAL_ENDTAG || o.push("</", h, ">") } a < i.length && (e = i[a].rep), i.length = a, o.push("</", e, ">") } } }, pcdata: o, rcdata: o, cdata: o, endDoc: function (t) { for (; i.length; i.length--)t.push("</", i[i.length - 1].rep, ">") } }) } var R = /^(?:https?|mailto|data)$/i; function N(t, e, i, o, s) { if (!s) return null; try { var a = n.parse("" + t); if (a && (!a.hasScheme() || R.test(a.getScheme()))) { var r = s(a, e, i, o); return r ? r.toString() : null } } catch (t) { return null } return null } function z(t, e, i, n, o) { if (i || t(e + " removed", { change: "removed", tagName: e }), n !== o) { var s = "changed"; n && !o ? s = "removed" : !n && o && (s = "added"), t(e + "." + i + " " + s, { change: s, tagName: e, attribName: i, oldValue: n, newValue: o }) } } function B(t, e, i) { var n; return n = e + "::" + i, t.hasOwnProperty(n) ? t[n] : (n = "*::" + i, t.hasOwnProperty(n) ? t[n] : void 0) } function H(e, i) { return B(t.LOADERTYPES, e, i) } function Z(e, i) { return B(t.URIEFFECTS, e, i) } function j(n, s, a, r, l) { for (var h = 0; h < s.length; h += 2) { var u, c = s[h], p = s[h + 1], d = p, m = null; if (u = n + "::" + c, (t.ATTRIBS.hasOwnProperty(u) || (u = "*::" + c, t.ATTRIBS.hasOwnProperty(u))) && (m = t.ATTRIBS[u]), null !== m) switch (m) { case t.atype.NONE: break; case t.atype.SCRIPT: p = null, l && z(l, n, c, d, p); break; case t.atype.STYLE: if (void 0 === e) { p = null, l && z(l, n, c, d, p); break } var f = []; e(p, { declaration: function (e, n) { var s = e.toLowerCase(), r = o[s]; r && (i(s, r, n, a ? function (e) { return N(e, t.ueffects.SAME_DOCUMENT, t.ltypes.SANDBOXED, { TYPE: "CSS", CSS_PROP: s }, a) } : null), f.push(e + ": " + n.join(" "))) } }), p = f.length > 0 ? f.join(" ; ") : null, l && z(l, n, c, d, p); break; case t.atype.ID: case t.atype.IDREF: case t.atype.IDREFS: case t.atype.GLOBAL_NAME: case t.atype.LOCAL_NAME: case t.atype.CLASSES: p = r ? r(p) : p, l && z(l, n, c, d, p); break; case t.atype.URI: p = N(p, Z(n, c), H(n, c), { TYPE: "MARKUP", XML_ATTR: c, XML_TAG: n }, a), l && z(l, n, c, d, p); break; case t.atype.URI_FRAGMENT: p && "#" === p.charAt(0) ? (p = p.substring(1), null != (p = r ? r(p) : p) && (p = "#" + p)) : p = null, l && z(l, n, c, d, p); break; default: p = null, l && z(l, n, c, d, p) } else p = null, l && z(l, n, c, d, p); s[h + 1] = p } return s } function F(e, i, n) { return function (o, s) { if (!(t.ELEMENTS[o] & t.eflags.UNSAFE)) return { attribs: j(o, s, e, i, n) }; n && z(n, o, void 0, void 0, void 0) } } function G(t, e) { var i = []; return I(e)(t, i), i.join("") } var W = {}; return W.escapeAttrib = W.escapeAttrib = L, W.makeHtmlSanitizer = W.makeHtmlSanitizer = I, W.makeSaxParser = W.makeSaxParser = E, W.makeTagPolicy = W.makeTagPolicy = F, W.normalizeRCData = W.normalizeRCData = b, W.sanitize = W.sanitize = function (t, e, i, n) { return G(t, F(e, i, n)) }, W.sanitizeAttribs = W.sanitizeAttribs = j, W.sanitizeWithPolicy = W.sanitizeWithPolicy = G, W.unescapeEntities = W.unescapeEntities = m, W }(o).sanitize; o.ATTRIBS["*::style"] = 0, o.ELEMENTS.style = 0, o.ATTRIBS["a::target"] = 0, o.ELEMENTS.video = 0, o.ATTRIBS["video::src"] = 0, o.ATTRIBS["video::poster"] = 0, o.ATTRIBS["video::controls"] = 0, o.ELEMENTS.audio = 0, o.ATTRIBS["audio::src"] = 0, o.ATTRIBS["video::autoplay"] = 0, o.ATTRIBS["video::controls"] = 0, t.exports = s }, ZpjM: function (t, e, i) { "use strict"; t.exports = { HTTP_URL: "http://a.tiles.mapbox.com/v4", HTTPS_URL: "https://a.tiles.mapbox.com/v4", FORCE_HTTPS: !1, REQUIRE_ACCESS_TOKEN: !0 } }, aqup: function (t, e, i) { "use strict"; var n = i("cwpW"), o = i("hcuP"), s = i("PNqo"); t.exports = { _loadTileJSON: function (t) { "string" == typeof t ? (t = o.tileJSON(t, this.options && this.options.accessToken), n(t, L.bind(function (e, i) { e ? (s.log("could not load TileJSON at " + t), this.fire("error", { error: e })) : i && (this._setTileJSON(i), this.fire("ready")) }, this))) : t && "object" == typeof t && this._setTileJSON(t) } } }, cETv: function (t, e, i) { t.exports = function (t, e, i) { var n = !1; if (void 0 === window.XMLHttpRequest) return e(Error("Browser not supported")); if (void 0 === i) { var o = t.match(/^\s*https?:\/\/[^\/]*/); i = o && o[0] !== location.protocol + "//" + location.domain + (location.port ? ":" + location.port : "") } var s = new window.XMLHttpRequest; if (i && !("withCredentials" in s)) { s = new window.XDomainRequest; var a = e; e = function () { if (n) a.apply(this, arguments); else { var t = this, e = arguments; setTimeout(function () { a.apply(t, e) }, 0) } } } function r() { var t; void 0 === s.status || (t = s.status) >= 200 && t < 300 || 304 === t ? e.call(s, null, s) : e.call(s, s, null) } return "onload" in s ? s.onload = r : s.onreadystatechange = function () { 4 === s.readyState && r() }, s.onerror = function (t) { e.call(this, t || !0, null), e = function () { } }, s.onprogress = function () { }, s.ontimeout = function (t) { e.call(this, t, null), e = function () { } }, s.onabort = function (t) { e.call(this, t, null), e = function () { } }, s.open("GET", t, !0), s.send(null), n = !0, s } }, cwpW: function (t, e, i) { "use strict"; var n = i("cETv"), o = i("PNqo").strict, s = i("ZpjM"), a = /^(https?:)?(?=\/\/(.|api)\.tiles\.mapbox\.com\/)/; t.exports = function (t, e) { return o(t, "string"), o(e, "function"), t = t.replace(a, function (t, e) { return "withCredentials" in new window.XMLHttpRequest ? "https:" === e || "https:" === document.location.protocol || s.FORCE_HTTPS ? "https:" : "http:" : document.location.protocol }), n(t, function (t, i) { !t && i && (i = JSON.parse(i.responseText)), e(t, i) }) } }, gzzj: function (t, e, i) { "use strict"; var n = L.Class.extend({ includes: L.Mixin.Events, data: {}, record: function (t) { L.extend(this.data, t), this.fire("change") } }); t.exports = new n }, hcuP: function (t, e, i) { "use strict"; var n = i("ZpjM"), o = i("XtVE").version; t.exports = function (t, e) { if (!(e = e || L.mapbox.accessToken) && n.REQUIRE_ACCESS_TOKEN) throw new Error("An API access token is required to use Mapbox.js. See https://www.mapbox.com/mapbox.js/api/v" + o + "/api-access-tokens/"); var i = "https:" === document.location.protocol || n.FORCE_HTTPS ? n.HTTPS_URL : n.HTTP_URL; if (i = i.replace(/\/v4$/, ""), i += t, n.REQUIRE_ACCESS_TOKEN) { if ("s" === e[0]) throw new Error("Use a public access token (pk.*) with Mapbox.js, not a secret access token (sk.*). See https://www.mapbox.com/mapbox.js/api/v" + o + "/api-access-tokens/"); i += -1 !== i.indexOf("?") ? "&access_token=" : "?access_token=", i += e } return i }, t.exports.tileJSON = function (e, i) { if (0 === e.indexOf("mapbox://styles")) throw new Error("Styles created with Mapbox Studio need to be used with L.mapbox.styleLayer, not L.mapbox.tileLayer"); if (-1 !== e.indexOf("/")) return e; var n = t.exports("/v4/" + e + ".json", i); return 0 === n.indexOf("https") && (n += "&secure"), n }, t.exports.style = function (e, i) { if (-1 === e.indexOf("mapbox://styles/")) throw new Error("Incorrectly formatted Mapbox style at " + e); var n = e.split("mapbox://styles/")[1]; return t.exports("/styles/v1/" + n, i).replace("http://", "https://") } }, "jO/I": function (t, e, i) { "use strict"; var n = i("hcuP"), o = i("PNqo"), s = i("1FN7"); function a(t, e) { var i = { small: [20, 50], medium: [30, 70], large: [35, 90] }, o = (t = t || {})["marker-size"] || "medium", s = "marker-symbol" in t && "" !== t["marker-symbol"] ? "-" + t["marker-symbol"] : "", a = (t["marker-color"] || "7e7e7e").replace("#", ""); return L.icon({ iconUrl: n("/v4/marker/pin-" + o.charAt(0) + s + "+" + a + (L.Browser.retina ? "@2x" : "") + ".png", e && e.accessToken), iconSize: i[o], iconAnchor: [i[o][0] / 2, i[o][1] / 2], popupAnchor: [0, -i[o][1] / 2] }) } t.exports = { icon: a, style: function (t, e, i) { return L.marker(e, { icon: a(t.properties, i), title: o.strip_tags(s(t.properties && t.properties.title || "")) }) }, createPopup: function (t, e) { if (!t || !t.properties) return ""; var i = ""; return t.properties.title && (i += '<div class="marker-title">' + t.properties.title + "</div>"), t.properties.description && (i += '<div class="marker-description">' + t.properties.description + "</div>"), (e || s)(i) } } }, mnpd: function (t, e, i) { "use strict"; var n = i("PNqo"), o = i("60t1"), s = L.Control.extend({ options: { pinnable: !0, follow: !1, sanitizer: i("1FN7"), touchTeaser: !0, location: !0 }, _currentContent: "", _pinned: !1, initialize: function (t, e) { L.Util.setOptions(this, e), n.strict_instance(t, L.Class, "L.mapbox.gridLayer"), this._layer = t }, setTemplate: function (t) { return n.strict(t, "string"), this.options.template = t, this }, _template: function (t, e) { if (e) { var i = this.options.template || this._layer.getTileJSON().template; if (i) { var n = {}; return n["__" + t + "__"] = !0, this.options.sanitizer(o.to_html(i, L.extend(n, e))) } } }, _show: function (t, e) { t !== this._currentContent && (this._currentContent = t, this.options.follow ? (this._popup.setContent(t).setLatLng(e.latLng), this._map._popup !== this._popup && this._popup.openOn(this._map)) : (this._container.style.display = "block", this._contentWrapper.innerHTML = t)) }, hide: function () { return this._pinned = !1, this._currentContent = "", this._map.closePopup(), this._container.style.display = "none", this._contentWrapper.innerHTML = "", L.DomUtil.removeClass(this._container, "closable"), this }, _mouseover: function (t) { if (t.data ? L.DomUtil.addClass(this._map._container, "map-clickable") : L.DomUtil.removeClass(this._map._container, "map-clickable"), !this._pinned) { var e = this._template("teaser", t.data); e ? this._show(e, t) : this.hide() } }, _mousemove: function (t) { this._pinned || this.options.follow && this._popup.setLatLng(t.latLng) }, _navigateTo: function (t) { window.top.location.href = t }, _click: function (t) { var e = this._template("location", t.data); if (this.options.location && e && 0 === e.search(/^https?:/)) return this._navigateTo(this._template("location", t.data)); if (this.options.pinnable) { var i = this._template("full", t.data); !i && this.options.touchTeaser && L.Browser.touch && (i = this._template("teaser", t.data)), i ? (L.DomUtil.addClass(this._container, "closable"), this._pinned = !0, this._show(i, t)) : this._pinned && (L.DomUtil.removeClass(this._container, "closable"), this._pinned = !1, this.hide()) } }, _onPopupClose: function () { this._currentContent = null, this._pinned = !1 }, _createClosebutton: function (t, e) { var i = L.DomUtil.create("a", "close", t); return i.innerHTML = "close", i.href = "#", i.title = "close", L.DomEvent.on(i, "click", L.DomEvent.stopPropagation).on(i, "mousedown", L.DomEvent.stopPropagation).on(i, "dblclick", L.DomEvent.stopPropagation).on(i, "click", L.DomEvent.preventDefault).on(i, "click", e, this), i }, onAdd: function (t) { this._map = t; var e = L.DomUtil.create("div", "leaflet-control-grid map-tooltip"), i = L.DomUtil.create("div", "map-tooltip-content"); return e.style.display = "none", this._createClosebutton(e, this.hide), e.appendChild(i), this._contentWrapper = i, this._popup = new L.Popup({ autoPan: !1, closeOnClick: !1 }), t.on("popupclose", this._onPopupClose, this), L.DomEvent.disableClickPropagation(e).addListener(e, "mousewheel", L.DomEvent.stopPropagation), this._layer.on("mouseover", this._mouseover, this).on("mousemove", this._mousemove, this).on("click", this._click, this), e }, onRemove: function (t) { t.off("popupclose", this._onPopupClose, this), this._layer.off("mouseover", this._mouseover, this).off("mousemove", this._mousemove, this).off("click", this._click, this) } }); t.exports.GridControl = s, t.exports.gridControl = function (t, e) { return new s(t, e) } }, o260: function (t, e, i) { "use strict"; var n = i("hcuP"), o = L.Control.extend({ includes: [i("aqup")], options: { position: "topleft", url: "" }, initialize: function (t, e) { L.setOptions(this, e), this._loadTileJSON(t) }, _setTileJSON: function (t) { this._tilejson = t }, onAdd: function (t) { this._map = t; var e = L.DomUtil.create("div", "leaflet-control-mapbox-share leaflet-bar"), i = L.DomUtil.create("a", "mapbox-share mapbox-icon mapbox-icon-share", e); return i.href = "#", this._modal = L.DomUtil.create("div", "mapbox-modal", this._map._container), this._mask = L.DomUtil.create("div", "mapbox-modal-mask", this._modal), this._content = L.DomUtil.create("div", "mapbox-modal-content", this._modal), L.DomEvent.addListener(i, "click", this._shareClick, this), L.DomEvent.disableClickPropagation(e), this._map.on("mousedown", this._clickOut, this), e }, _clickOut: function (t) { if (this._sharing) return L.DomEvent.preventDefault(t), L.DomUtil.removeClass(this._modal, "active"), this._content.innerHTML = "", void (this._sharing = null) }, _shareClick: function (t) { if (L.DomEvent.stop(t), this._sharing) return this._clickOut(t); var e = this._tilejson || this._map._tilejson || {}, i = encodeURIComponent(this.options.url || e.webpage || window.location), o = encodeURIComponent(e.name), s = "//twitter.com/intent/tweet?status=" + o + " " + i, a = "//www.facebook.com/sharer.php?u=" + i + "&t=" + o, r = "//www.pinterest.com/pin/create/button/?url=" + i + "&media=" + n("/v4/" + e.id + "/" + this._map.getCenter().lng + "," + this._map.getCenter().lat + "," + this._map.getZoom() + "/600x600.png", this.options.accessToken) + "&description=" + o, l = '<iframe width="100%" height="500px" frameBorder="0" src="' + n("/v4/" + e.id + ".html", this.options.accessToken) + '"></iframe>'; function h(t, e, i) { var n = document.createElement("a"); return n.setAttribute("class", t), n.setAttribute("href", e), n.setAttribute("target", "_blank"), i = document.createTextNode(i), n.appendChild(i), n } L.DomUtil.addClass(this._modal, "active"), this._sharing = L.DomUtil.create("div", "mapbox-modal-body", this._content); var u = h("mapbox-button mapbox-button-icon mapbox-icon-twitter", s, "Twitter"), c = h("mapbox-button mapbox-button-icon mapbox-icon-facebook", a, "Facebook"), p = h("mapbox-button mapbox-button-icon mapbox-icon-pinterest", r, "Pinterest"), d = document.createElement("h3"), m = document.createTextNode("Share this map"); d.appendChild(m); var f = document.createElement("div"); f.setAttribute("class", "mapbox-share-buttons"), f.appendChild(c), f.appendChild(u), f.appendChild(p), this._sharing.appendChild(d), this._sharing.appendChild(f); var _ = L.DomUtil.create("input", "mapbox-embed", this._sharing); _.type = "text", _.value = l, L.DomUtil.create("label", "mapbox-embed-description", this._sharing).innerHTML = "Copy and paste this <strong>HTML code</strong> into documents to embed this map on web pages."; var g = L.DomUtil.create("a", "leaflet-popup-close-button", this._sharing); g.href = "#", L.DomEvent.disableClickPropagation(this._sharing), L.DomEvent.addListener(g, "click", this._clickOut, this), L.DomEvent.addListener(_, "click", function (t) { t.target.focus(), t.target.select() }) } }); t.exports.ShareControl = o, t.exports.shareControl = function (t, e) { return new o(t, e) } }, qHKS: function (t, e, i) { "use strict"; var n = L.Control.extend({ options: { position: "bottomright", sanitizer: i("1FN7") }, initialize: function (t) { L.setOptions(this, t), this._legends = {} }, onAdd: function () { return this._container = L.DomUtil.create("div", "map-legends wax-legends"), L.DomEvent.disableClickPropagation(this._container), this._update(), this._container }, addLegend: function (t) { return t ? (this._legends[t] || (this._legends[t] = 0), this._legends[t]++, this._update()) : this }, removeLegend: function (t) { return t ? (this._legends[t] && this._legends[t]--, this._update()) : this }, _update: function () { if (!this._map) return this; this._container.innerHTML = ""; var t = "none"; for (var e in this._legends) { if (this._legends.hasOwnProperty(e) && this._legends[e]) L.DomUtil.create("div", "map-legend wax-legend", this._container).innerHTML = this.options.sanitizer(e), t = "block" } return this._container.style.display = t, this } }); t.exports.LegendControl = n, t.exports.legendControl = function (t) { return new n(t) } }, "w4/X": function (t, e, i) { t.exports = window.L = i("RL9G") }, waUh: function (t, e, i) { "use strict"; var n = i("TDw1"), o = i("PNqo"), s = i("hcuP"), a = i("gzzj"), r = i("cwpW"); t.exports = function (t, e) { e || (e = {}); var i = {}; function l(t, e) { var i = Math.pow(10, e); return t.lat = Math.round(t.lat * i) / i, t.lng = Math.round(t.lng * i) / i, t } return o.strict(t, "string"), -1 === t.indexOf("/") && (t = s("/geocoding/v5/" + t + "/{query}.json", e.accessToken, 5)), i.getURL = function () { return t }, i.queryURL = function (t) { var e = !(n(t) || "string" == typeof t), o = e ? t.query : t; if (n(o)) { for (var s = [], r = 0; r < o.length; r++)s[r] = encodeURIComponent(o[r]); o = s.join(";") } else o = encodeURIComponent(o); a.record({ geocoding: o }); var h = L.Util.template(i.getURL(), { query: o }); if (e) { if (t.types && (n(t.types) ? h += "&types=" + t.types.join() : h += "&types=" + t.types), t.country && (n(t.country) ? h += "&country=" + t.country.join() : h += "&country=" + t.country), t.proximity) { var u = l(L.latLng(t.proximity), 3); h += "&proximity=" + u.lng + "," + u.lat } "boolean" == typeof t.autocomplete && (h += "&autocomplete=" + t.autocomplete) } return h }, i.query = function (t, e) { return o.strict(e, "function"), r(i.queryURL(t), function (t, i) { if (i && (i.length || i.features)) { var n = { results: i }; i.features && i.features.length && (n.latlng = [i.features[0].center[1], i.features[0].center[0]], i.features[0].bbox && (n.bounds = i.features[0].bbox, n.lbounds = o.lbounds(n.bounds))), e(null, n) } else e(t || !0) }), i }, i.reverseQuery = function (t, e) { var n = ""; function o(t) { var e; return (e = l(e = void 0 !== t.lat && void 0 !== t.lng ? L.latLng(t.lat, t.lng) : void 0 !== t.lat && void 0 !== t.lon ? L.latLng(t.lat, t.lon) : L.latLng(t[1], t[0]), 5)).lng + "," + e.lat } if (t.length && t[0].length) { for (var s = 0, a = []; s < t.length; s++)a.push(o(t[s])); n = a.join(";") } else n = o(t); return r(i.queryURL(n), function (t, i) { e(t, i) }), i }, i } }
}, [418]);
    //# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/client/packages/mapbox.bundle-dca8be27.js.map